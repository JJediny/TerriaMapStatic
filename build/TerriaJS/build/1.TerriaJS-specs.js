(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1961:function(t,e,i){var r,n;r=[i(29),i(2),i(0),i(3),i(4)],void 0===(n=function(t,e,i,r,n){"use strict";function o(t,i){t=e(t,0),i=e(i,Number.MAX_VALUE),this.value=new Float32Array([t,i])}return r(o.prototype,{componentDatatype:{get:function(){return t.FLOAT}},componentsPerAttribute:{get:function(){return 2}},normalize:{get:function(){return!1}}}),o.fromDistanceDisplayCondition=function(t){return new o(t.near,t.far)},o.toValue=function(t,e){return i(e)?(e[0]=t.near,e[1]=t.far,e):new Float32Array([t.near,t.far])},o}.apply(e,r))||(t.exports=n)},1962:function(t,e,i){var r,n;r=[i(2),i(0),i(3),i(10),i(119),i(2008),i(2009),i(2010),i(2011),i(2012),i(2013),i(342),i(232)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d){"use strict";function c(i){i=t(i,t.EMPTY_OBJECT);var r=t(i.translucent,!0),n=t(i.closed,!1),o=t(i.materialSupport,c.MaterialSupport.TEXTURED);this.material=e(i.material)?i.material:d.fromType(d.ColorType),this.translucent=r,this._vertexShaderSource=t(i.vertexShaderSource,o.vertexShaderSource),this._fragmentShaderSource=t(i.fragmentShaderSource,o.fragmentShaderSource),this._renderState=p.getDefaultRenderState(r,n,i.renderState),this._closed=n,this._materialSupport=o,this._vertexFormat=o.vertexFormat,this._flat=t(i.flat,!1),this._faceForward=t(i.faceForward,!n)}return i(c.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},materialSupport:{get:function(){return this._materialSupport}},vertexFormat:{get:function(){return this._vertexFormat}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}}}),c.prototype.getFragmentShaderSource=p.prototype.getFragmentShaderSource,c.prototype.isTranslucent=p.prototype.isTranslucent,c.prototype.getRenderState=p.prototype.getRenderState,c.MaterialSupport={BASIC:r({vertexFormat:n.POSITION_AND_NORMAL,vertexShaderSource:l,fragmentShaderSource:s}),TEXTURED:r({vertexFormat:n.POSITION_NORMAL_AND_ST,vertexShaderSource:u,fragmentShaderSource:h}),ALL:r({vertexFormat:n.ALL,vertexShaderSource:a,fragmentShaderSource:o})},c}.apply(e,r))||(t.exports=n)},1963:function(t,e,i){var r,n;r=[i(11),i(21),i(2),i(0),i(3),i(13),i(4),i(192),i(23),i(263),i(466),i(171),i(153),i(332),i(267),i(108),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y){"use strict";var g=new c(e.WHITE),v=new m(!0),_=new m(!0),w=new m(!1),b=new m(e.BLACK),P=new m(d.DISABLED),A=new m(new s),O=new m(p.BOTH);function E(t){var e=t.entity,i=t.geometryPropertyName;this._entity=e,this._scene=t.scene,this._fillEnabled=!1,this._isClosed=!1,this._onTerrain=!1,this._dynamic=!1,this._outlineEnabled=!1,this._geometryChanged=new l,this._showProperty=void 0,this._materialProperty=void 0,this._showOutlineProperty=void 0,this._outlineColorProperty=void 0,this._outlineWidth=1,this._shadowsProperty=void 0,this._distanceDisplayConditionProperty=void 0,this._classificationTypeProperty=void 0,this._options=t.geometryOptions,this._geometryPropertyName=i,this._id=i+"-"+e.id,this._observedPropertyNames=t.observedPropertyNames,this._supportsMaterialsforEntitiesOnTerrain=f.supportsMaterialsforEntitiesOnTerrain(t.scene)}return n(E.prototype,{id:{get:function(){return this._id}},entity:{get:function(){return this._entity}},fillEnabled:{get:function(){return this._fillEnabled}},hasConstantFill:{get:function(){return!this._fillEnabled||!r(this._entity.availability)&&y.isConstant(this._showProperty)&&y.isConstant(this._fillProperty)}},fillMaterialProperty:{get:function(){return this._materialProperty}},outlineEnabled:{get:function(){return this._outlineEnabled}},hasConstantOutline:{get:function(){return!this._outlineEnabled||!r(this._entity.availability)&&y.isConstant(this._showProperty)&&y.isConstant(this._showOutlineProperty)}},outlineColorProperty:{get:function(){return this._outlineColorProperty}},outlineWidth:{get:function(){return this._outlineWidth}},shadowsProperty:{get:function(){return this._shadowsProperty}},distanceDisplayConditionProperty:{get:function(){return this._distanceDisplayConditionProperty}},classificationTypeProperty:{get:function(){return this._classificationTypeProperty}},isDynamic:{get:function(){return this._dynamic}},isClosed:{get:function(){return this._isClosed}},onTerrain:{get:function(){return this._onTerrain}},geometryChanged:{get:function(){return this._geometryChanged}}}),E.prototype.isOutlineVisible=function(t){var e=this._entity,r=this._outlineEnabled&&e.isAvailable(t)&&this._showProperty.getValue(t)&&this._showOutlineProperty.getValue(t);return i(r,!1)},E.prototype.isFilled=function(t){var e=this._entity,r=this._fillEnabled&&e.isAvailable(t)&&this._showProperty.getValue(t)&&this._fillProperty.getValue(t);return i(r,!1)},E.prototype.createFillGeometryInstance=a.throwInstantiationError,E.prototype.createOutlineGeometryInstance=a.throwInstantiationError,E.prototype.isDestroyed=function(){return!1},E.prototype.destroy=function(){o(this)},E.prototype._isHidden=function(t,e){var i=e.show;return r(i)&&i.isConstant&&!i.getValue(h.MINIMUM_VALUE)},E.prototype._isOnTerrain=function(t,e){return!1},E.prototype._getIsClosed=function(t){return!0},E.prototype._isDynamic=a.throwInstantiationError,E.prototype._setStaticOptions=a.throwInstantiationError,E.prototype._onEntityPropertyChanged=function(t,e,n,o){if(-1!==this._observedPropertyNames.indexOf(e)){var a=this._entity[this._geometryPropertyName];if(r(a)){var s=a.fill,l=!r(s)||!s.isConstant||s.getValue(h.MINIMUM_VALUE),p=a.outline,d=r(p);if(d&&p.isConstant&&(d=p.getValue(h.MINIMUM_VALUE)),l||d){var m=a.show;if(this._isHidden(t,a))(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this));else{this._materialProperty=i(a.material,g),this._fillProperty=i(s,_),this._showProperty=i(m,v),this._showOutlineProperty=i(a.outline,w),this._outlineColorProperty=d?i(a.outlineColor,b):void 0,this._shadowsProperty=i(a.shadows,P),this._distanceDisplayConditionProperty=i(a.distanceDisplayCondition,A),this._classificationTypeProperty=i(a.classificationType,O),this._fillEnabled=l;var f=this._isOnTerrain(t,a)&&(this._supportsMaterialsforEntitiesOnTerrain||this._materialProperty instanceof c);if(d&&f&&(u(u.geometryOutlines),d=!1),this._onTerrain=f,this._outlineEnabled=d,this._isDynamic(t,a))this._dynamic||(this._dynamic=!0,this._geometryChanged.raiseEvent(this));else{this._setStaticOptions(t,a),this._isClosed=this._getIsClosed(this._options);var y=a.outlineWidth;this._outlineWidth=r(y)?y.getValue(h.MINIMUM_VALUE):1,this._dynamic=!1,this._geometryChanged.raiseEvent(this)}}}else(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this))}else(this._fillEnabled||this._outlineEnabled)&&(this._fillEnabled=!1,this._outlineEnabled=!1,this._geometryChanged.raiseEvent(this))}},E.prototype.createDynamicUpdater=function(t,e){return new this.constructor.DynamicGeometryUpdater(this,t,e)},E}.apply(e,r))||(t.exports=n)},1964:function(t,e,i){var r,n;r=[i(31),i(11),i(0),i(13),i(4),i(711),i(1962),i(130),i(143),i(465),i(332),i(1966),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d){"use strict";function c(t,e,i){this._primitives=e,this._orderedGroundPrimitives=i,this._primitive=void 0,this._outlinePrimitive=void 0,this._geometryUpdater=t,this._options=t._options,this._entity=t._entity,this._material=void 0}return c.prototype._isHidden=function(t,e,i){return!t.isShowing||!t.isAvailable(i)||!d.getValueOrDefault(e.show,i,!0)},c.prototype._setOptions=n.throwInstantiationError,c.prototype.update=function(t){var e=this._geometryUpdater,r=e._onTerrain,n=this._primitives,h=this._orderedGroundPrimitives;r?h.remove(this._primitive):(n.removeAndDestroy(this._primitive),n.removeAndDestroy(this._outlinePrimitive),this._outlinePrimitive=void 0),this._primitive=void 0;var c=this._entity,m=c[this._geometryUpdater._geometryPropertyName];if(this._setOptions(c,m,t),!this._isHidden(c,m,t)){var f=this._geometryUpdater.shadowsProperty.getValue(t),y=this._options;if(!i(m.fill)||m.fill.getValue(t)){var g,v=e.fillMaterialProperty,_=v instanceof u,w=e._getIsClosed(y);if(_)g=new s({closed:w,flat:r&&!e._supportsMaterialsforEntitiesOnTerrain});else{var b=p.getValue(t,v,this._material);this._material=b,g=new a({material:b,translucent:b.isTranslucent(),closed:w})}if(r)y.vertexFormat=s.VERTEX_FORMAT,this._primitive=h.add(new o({geometryInstances:this._geometryUpdater.createFillGeometryInstance(t),appearance:g,asynchronous:!1,shadows:f,classificationType:this._geometryUpdater.classificationTypeProperty.getValue(t)}),d.getValueOrUndefined(this._geometryUpdater.zIndex,t));else{y.vertexFormat=g.vertexFormat;var P=this._geometryUpdater.createFillGeometryInstance(t);_&&(g.translucent=255!==P.attributes.color.value[3]),this._primitive=n.add(new l({geometryInstances:P,appearance:g,asynchronous:!1,shadows:f}))}}if(!r&&i(m.outline)&&m.outline.getValue(t)){var A=this._geometryUpdater.createOutlineGeometryInstance(t),O=d.getValueOrDefault(m.outlineWidth,t,1);this._outlinePrimitive=n.add(new l({geometryInstances:A,appearance:new s({flat:!0,translucent:255!==A.attributes.color.value[3],renderState:{lineWidth:e._scene.clampLineWidth(O)}}),asynchronous:!1,shadows:f}))}}},c.prototype.getBoundingSphere=function(e){var r,n=this._entity,o=this._primitive,a=this._outlinePrimitive;return i(o)&&o.show&&o.ready&&(r=o.getGeometryInstanceAttributes(n),i(r)&&i(r.boundingSphere))?(t.clone(r.boundingSphere,e),h.DONE):i(a)&&a.show&&a.ready&&(r=a.getGeometryInstanceAttributes(n),i(r)&&i(r.boundingSphere))?(t.clone(r.boundingSphere,e),h.DONE):i(o)&&!o.ready||i(a)&&!a.ready?h.PENDING:h.FAILED},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){var t=this._primitives,e=this._orderedGroundPrimitives;this._geometryUpdater._onTerrain?e.remove(this._primitive):t.removeAndDestroy(this._primitive),t.removeAndDestroy(this._outlinePrimitive),r(this)},c}.apply(e,r))||(t.exports=n)},1965:function(t,e,i){var r,n;r=[i(10)],void 0===(n=function(t){"use strict";return t({ROUNDED:0,MITERED:1,BEVELED:2})}.apply(e,r))||(t.exports=n)},1966:function(t,e,i){var r,n;r=[i(21),i(0),i(3),i(4),i(232)],void 0===(n=function(t,e,i,r,n){"use strict";function o(){r.throwInstantiationError()}return i(o.prototype,{isConstant:{get:r.throwInstantiationError},definitionChanged:{get:r.throwInstantiationError}}),o.prototype.getType=r.throwInstantiationError,o.prototype.getValue=r.throwInstantiationError,o.prototype.equals=r.throwInstantiationError,o.getValue=function(i,r,o){var a;return e(r)&&(a=r.getType(i),e(a))?(e(o)&&o.type===a||(o=n.fromType(a)),r.getValue(i,o.uniforms),o):(e(o)&&o.type===n.ColorType||(o=n.fromType(n.ColorType)),t.clone(t.WHITE,o.uniforms.color),o)},o}.apply(e,r))||(t.exports=n)},1967:function(t,e,i){var r,n;r=[i(0),i(3),i(4),i(23),i(230),i(109),i(128)],void 0===(n=function(t,e,i,r,n,o,a){"use strict";function s(){this._eventHelper=new n,this._definitionChanged=new r,this._intervals=new o,this._intervals.changedEvent.addEventListener(s.prototype._intervalsChanged,this)}return e(s.prototype,{isConstant:{get:function(){return this._intervals.isEmpty}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._intervals}}}),s.prototype.getValue=function(e,i){var r=this._intervals.findDataForIntervalContainingDate(e);if(t(r))return r.getValue(e,i)},s.prototype.equals=function(t){return this===t||t instanceof s&&this._intervals.equals(t._intervals,a.equals)},s.prototype._intervalsChanged=function(){!function(e,i,r,n){function o(){r.raiseEvent(e)}var a=[];i.removeAll();for(var s=n.length,l=0;l<s;l++){var h=n.get(l);t(h.data)&&-1===a.indexOf(h.data)&&i.add(h.data.definitionChanged,o)}}(this,this._eventHelper,this._definitionChanged,this._intervals),this._definitionChanged.raiseEvent(this)},s}.apply(e,r))||(t.exports=n)},1968:function(t,e,i){var r,n;r=[i(2),i(0),i(3),i(4),i(23),i(265),i(1967),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s){"use strict";function l(e){this._referenceFrame=t(e,o.FIXED),this._definitionChanged=new n,this._composite=new a,this._composite.definitionChanged.addEventListener(l.prototype._raiseDefinitionChanged,this)}return i(l.prototype,{isConstant:{get:function(){return this._composite.isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._composite.intervals}},referenceFrame:{get:function(){return this._referenceFrame},set:function(t){this._referenceFrame=t}}}),l.prototype.getValue=function(t,e){return this.getValueInReferenceFrame(t,o.FIXED,e)},l.prototype.getValueInReferenceFrame=function(t,i,r){var n=this._composite._intervals.findDataForIntervalContainingDate(t);if(e(n))return n.getValueInReferenceFrame(t,i,r)},l.prototype.equals=function(t){return this===t||t instanceof l&&this._referenceFrame===t._referenceFrame&&this._composite.equals(t._composite,s.equals)},l.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)},l}.apply(e,r))||(t.exports=n)},1969:function(t,e,i){var r,n;r=[i(0),i(3),i(4),i(23),i(32),i(128)],void 0===(n=function(t,e,i,r,n,o){"use strict";function a(e){var i=e._targetProperty;if(e._resolveProperty){var r=function(e){var i=!0;if(e._resolveEntity){var r=e._targetCollection.getById(e._targetId);if(t(r)?(r.definitionChanged.addEventListener(s.prototype._onTargetEntityDefinitionChanged,e),e._targetEntity=r,e._resolveEntity=!1):(r=e._targetEntity,i=!1),!t(r))throw new n('target entity "'+e._targetId+'" could not be resolved.')}return i}(e),o=e._targetPropertyNames;i=e._targetEntity;for(var a=o.length,l=0;l<a&&t(i);l++)i=i[o[l]];if(t(i))e._targetProperty=i,e._resolveProperty=!r;else if(!t(e._targetProperty))throw new n('targetProperty "'+e._targetId+"."+o.join(".")+'" could not be resolved.')}return i}function s(t,e,i){this._targetCollection=t,this._targetId=e,this._targetPropertyNames=i,this._targetProperty=void 0,this._targetEntity=void 0,this._definitionChanged=new r,this._resolveEntity=!0,this._resolveProperty=!0,t.collectionChanged.addEventListener(s.prototype._onCollectionChanged,this)}return e(s.prototype,{isConstant:{get:function(){return o.isConstant(a(this))}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return a(this).referenceFrame}},targetId:{get:function(){return this._targetId}},targetCollection:{get:function(){return this._targetCollection}},targetPropertyNames:{get:function(){return this._targetPropertyNames}},resolvedProperty:{get:function(){return a(this)}}}),s.fromString=function(t,e){for(var i,r=[],n=!0,o=!1,a="",l=0;l<e.length;++l){var h=e.charAt(l);o?(a+=h,o=!1):"\\"===h?o=!0:n&&"#"===h?(i=a,n=!1,a=""):n||"."!==h?a+=h:(r.push(a),a="")}return r.push(a),new s(t,i,r)},s.prototype.getValue=function(t,e){return a(this).getValue(t,e)},s.prototype.getValueInReferenceFrame=function(t,e,i){return a(this).getValueInReferenceFrame(t,e,i)},s.prototype.getType=function(t){return a(this).getType(t)},s.prototype.equals=function(t){if(this===t)return!0;var e=this._targetPropertyNames,i=t._targetPropertyNames;if(this._targetCollection!==t._targetCollection||this._targetId!==t._targetId||e.length!==i.length)return!1;for(var r=this._targetPropertyNames.length,n=0;n<r;n++)if(e[n]!==i[n])return!1;return!0},s.prototype._onTargetEntityDefinitionChanged=function(t,e,i,r){this._targetPropertyNames[0]===e&&(this._resolveProperty=!0,this._definitionChanged.raiseEvent(this))},s.prototype._onCollectionChanged=function(e,i,r){var n=this._targetEntity;t(n)&&(-1!==r.indexOf(n)?(n.definitionChanged.removeEventListener(s.prototype._onTargetEntityDefinitionChanged,this),this._resolveEntity=!0,this._resolveProperty=!0):this._resolveEntity&&(a(this),this._resolveEntity||this._definitionChanged.raiseEvent(this)))},s}.apply(e,r))||(t.exports=n)},1970:function(t,e,i){var r,n;r=[i(229),i(6),i(11),i(2),i(0),i(3),i(4),i(152),i(263),i(466),i(711),i(169),i(231),i(267),i(1963),i(128),i(1977)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y){"use strict";var g=new c(0);function v(t){m.call(this,t),this._zIndex=0,this._terrainOffsetProperty=void 0}return n(Object.create)&&(v.prototype=Object.create(m.prototype),v.prototype.constructor=v),o(v.prototype,{zIndex:{get:function(){return this._zIndex}},terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),v.prototype._isOnTerrain=function(t,e){return this._fillEnabled&&!n(e.height)&&!n(e.extrudedHeight)&&u.isSupported(this._scene)},v.prototype._getIsClosed=function(t){var e=t.height,i=t.extrudedHeight;return 0===e||n(i)&&i!==e},v.prototype._computeCenter=a.throwInstantiationError,v.prototype._onEntityPropertyChanged=function(t,e,i,o){if(m.prototype._onEntityPropertyChanged.call(this,t,e,i,o),-1!==this._observedPropertyNames.indexOf(e)){var a=this._entity[this._geometryPropertyName];if(n(a)){n(a.zIndex)&&(n(a.height)||n(a.extrudedHeight))&&h(h.geometryZIndex),this._zIndex=r(a.zIndex,g),n(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0);var s=a.heightReference,l=a.extrudedHeightReference;if(n(s)||n(l)){var u=new d(this._computeCenter.bind(this),!this._dynamic);this._terrainOffsetProperty=new y(this._scene,u,s,l)}}}},v.prototype.destroy=function(){n(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0),m.prototype.destroy.call(this)},v.getGeometryHeight=function(t,e){if(n(t))return e!==p.CLAMP_TO_GROUND?t:0;e!==p.NONE&&h(h.geometryHeightReference)},v.getGeometryExtrudedHeight=function(t,e){if(n(t))return e!==p.CLAMP_TO_GROUND?t:v.CLAMP_TO_GROUND;e!==p.NONE&&h(h.geometryExtrudedHeightReference)},v.CLAMP_TO_GROUND="clamp",v.computeGeometryOffsetAttribute=function(t,e,i,r){n(t)&&n(e)||(e=p.NONE),n(i)&&n(r)||(r=p.NONE);var o=0;return e!==p.NONE&&o++,r===p.RELATIVE_TO_GROUND&&o++,2===o?s.ALL:1===o?s.TOP:void 0},v}.apply(e,r))||(t.exports=n)},1971:function(t,e,i){var r,n;r=[i(0),i(3),i(4),i(18),i(23),i(265),i(128)],void 0===(n=function(t,e,i,r,n,o,a){"use strict";function s(t){this._definitionChanged=new n,this._value=void 0,this._removeSubscription=void 0,this.setValue(t)}return e(s.prototype,{isConstant:{get:function(){return a.isConstant(this._value)}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return t(this._value)?this._value.referenceFrame:o.FIXED}}}),s.prototype.getValue=function(t,e){return this.getValueInReferenceFrame(t,o.FIXED,e)},s.prototype.setValue=function(e){this._value!==e&&(this._value=e,t(this._removeSubscription)&&(this._removeSubscription(),this._removeSubscription=void 0),t(e)&&(this._removeSubscription=e.definitionChanged.addEventListener(this._raiseDefinitionChanged,this)),this._definitionChanged.raiseEvent(this))},s.prototype.getValueInReferenceFrame=function(e,i,n){if(t(this._value))return n=this._value.getValueInReferenceFrame(e,i,n),t(n)?r.WGS84.scaleToGeodeticSurface(n,n):void 0},s.prototype.equals=function(t){return this===t||t instanceof s&&this._value===t._value},s.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)},s}.apply(e,r))||(t.exports=n)},1972:function(t,e,i){var r,n;r=[i(2),i(0),i(231),i(1963),i(1977)],void 0===(n=function(t,e,i,r,n){"use strict";return function(t,o,a,s){if(r.prototype._onEntityPropertyChanged.call(this,t,o,a,s),-1!==this._observedPropertyNames.indexOf(o)){var l=this._entity[this._geometryPropertyName];if(e(l)){e(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0);var h=l.heightReference;if(e(h)){var u=new i(this._computeCenter.bind(this),!this._dynamic);this._terrainOffsetProperty=new n(this._scene,u,h)}}}}}.apply(e,r))||(t.exports=n)},1973:function(t,e,i){var r,n;r=[i(16),i(6),i(39),i(22),i(1965),i(467),i(7),i(41),i(17),i(712),i(62),i(55)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p){"use strict";var d=[new e,new e],c=new e,m=new e,f=new e,y=new e,g=new e,v=new e,_=new e,w=new e,b=new e,P=new e,A=new e,O={},E=new r;function C(t,i,r,n){var o,a=t[0],s=t[1],l=e.angleBetween(a,s),h=Math.ceil(l/n),u=new Array(h);if(i===r){for(o=0;o<h;o++)u[o]=i;return u.push(r),u}var p=(r-i)/h;for(o=1;o<h;o++){var d=i+o*p;u[o]=d}return u[0]=i,u.push(r),u}var x=new e,D=new e;var T=new e(-1,0,0),I=new l,M=new l,V=new s,N=s.IDENTITY.clone(),S=new e,L=new i,F=new e;function U(i,r,n,a,h,u,d,c){var m=S,f=L;I=p.eastNorthUpToFixedFrame(i,h,I),m=l.multiplyByPointAsVector(I,T,m);var y=function(i,r,n,a){var s=new o(n,a),l=s.projectPointOntoPlane(e.add(n,i,x),x),h=s.projectPointOntoPlane(e.add(n,r,D),D),u=t.angleBetween(l,h);return h.x*l.y-h.y*l.x>=0?-u:u}(m=e.normalize(m,m),r,i,h);V=s.fromRotationZ(y,V),F.z=u,I=l.multiplyTransformation(I,l.fromRotationTranslation(V,F,M),I);var g=N;g[0]=d;for(var v=0;v<c;v++)for(var _=0;_<n.length;_+=3)f=e.fromArray(n,_,f),f=s.multiplyByVector(g,f,f),f=l.multiplyByPoint(I,f,f),a.push(f.x,f.y,f.z);return a}var R=new e;function H(t,i,r,n,o,a,s){for(var l=0;l<t.length;l+=3){n=U(e.fromArray(t,l,R),i,r,n,o,a[l/3],s,1)}return n}function B(t,e){for(var i=t.length,r=new Array(3*i),n=0,o=e.x+e.width/2,a=e.y+e.height/2,s=0;s<i;s++)r[n++]=t[s].x-o,r[n++]=0,r[n++]=t[s].y-a;return r}var G=new u,k=new e,z=new s;function j(t,i,r,o,l,h,p,d,c,m){var f,y,g=e.angleBetween(e.subtract(i,t,P),e.subtract(r,t,A)),v=o===n.BEVELED?0:Math.ceil(g/a.toRadians(5));if(f=l?s.fromQuaternion(u.fromAxisAngle(e.negate(t,P),g/(v+1),G),z):s.fromQuaternion(u.fromAxisAngle(t,g/(v+1),G),z),i=e.clone(i,k),v>0)for(var _=m?2:1,w=0;w<v;w++)i=s.multiplyByVector(f,i,i),y=e.subtract(i,t,P),y=e.normalize(y,y),l||(y=e.negate(y,y)),p=U(h.scaleToGeodeticSurface(i,A),y,d,p,h,c,1,_);else y=e.subtract(i,t,P),y=e.normalize(y,y),l||(y=e.negate(y,y)),p=U(h.scaleToGeodeticSurface(i,A),y,d,p,h,c,1,1),r=e.clone(r,k),y=e.subtract(r,t,P),y=e.normalize(y,y),l||(y=e.negate(y,y)),p=U(h.scaleToGeodeticSurface(r,A),y,d,p,h,c,1,1);return p}O.removeDuplicatesFromShape=function(e){for(var i=e.length,r=[],n=i-1,o=0;o<i;n=o++){var a=e[n],s=e[o];t.equals(a,s)||r.push(s)}return r},O.angleIsGreaterThanPi=function(t,i,r,n){var a=new o(r,n),s=a.projectPointOntoPlane(e.add(r,t,x),x),l=a.projectPointOntoPlane(e.add(r,i,D),D);return l.x*s.y-l.y*s.x>=0};var W=new e,Y=new e;return O.computePositions=function(t,i,r,o,s){var l=o._ellipsoid,u=function(t,e){for(var i=new Array(t.length),r=0;r<t.length;r++){var n=t[r];E=e.cartesianToCartographic(n,E),i[r]=E.height,t[r]=e.scaleToGeodeticSurface(n,n)}return i}(t,l),p=o._granularity,A=o._cornerType,x=s?function(t,e){var i=t.length,r=new Array(6*i),n=0,o=e.x+e.width/2,a=e.y+e.height/2,s=t[0];r[n++]=s.x-o,r[n++]=0,r[n++]=s.y-a;for(var l=1;l<i;l++){var h=(s=t[l]).x-o,u=s.y-a;r[n++]=h,r[n++]=0,r[n++]=u,r[n++]=h,r[n++]=0,r[n++]=u}return s=t[0],r[n++]=s.x-o,r[n++]=0,r[n++]=s.y-a,r}(i,r):B(i,r),D=s?B(i,r):void 0,T=r.height/2,I=r.width/2,M=t.length,V=[],N=s?[]:void 0,S=c,L=m,F=f,R=y,G=g,k=v,z=_,q=w,X=b,Z=t[0],J=t[1];R=l.geodeticSurfaceNormal(Z,R),S=e.subtract(J,Z,S),S=e.normalize(S,S),q=e.cross(R,S,q),q=e.normalize(q,q);var K,Q=u[0],$=u[1];s&&(N=U(Z,q,D,N,l,Q+T,1,1)),X=e.clone(Z,X),Z=J,L=e.negate(S,L);for(var tt=1;tt<M-1;tt++){var et=s?2:1;J=t[tt+1],S=e.subtract(J,Z,S),S=e.normalize(S,S),F=e.add(S,L,F),F=e.normalize(F,F),R=l.geodeticSurfaceNormal(Z,R);var it=e.multiplyByScalar(R,e.dot(S,R),W);e.subtract(S,it,it),e.normalize(it,it);var rt=e.multiplyByScalar(R,e.dot(L,R),Y);if(e.subtract(L,rt,rt),e.normalize(rt,rt),!a.equalsEpsilon(Math.abs(e.dot(it,rt)),1,a.EPSILON7)){F=e.cross(F,R,F),F=e.cross(R,F,F),F=e.normalize(F,F);var nt=1/Math.max(.25,e.magnitude(e.cross(F,L,P))),ot=O.angleIsGreaterThanPi(S,L,Z,l);ot?(G=e.add(Z,e.multiplyByScalar(F,nt*I,F),G),k=e.add(G,e.multiplyByScalar(q,I,k),k),d[0]=e.clone(X,d[0]),d[1]=e.clone(k,d[1]),K=C(d,Q+T,$+T,p),V=H(h.generateArc({positions:d,granularity:p,ellipsoid:l}),q,x,V,l,K,1),q=e.cross(R,S,q),q=e.normalize(q,q),z=e.add(G,e.multiplyByScalar(q,I,z),z),A===n.ROUNDED||A===n.BEVELED?j(G,k,z,A,ot,l,V,x,$+T,s):V=U(Z,F=e.negate(F,F),x,V,l,$+T,nt,et),X=e.clone(z,X)):(G=e.add(Z,e.multiplyByScalar(F,nt*I,F),G),k=e.add(G,e.multiplyByScalar(q,-I,k),k),d[0]=e.clone(X,d[0]),d[1]=e.clone(k,d[1]),K=C(d,Q+T,$+T,p),V=H(h.generateArc({positions:d,granularity:p,ellipsoid:l}),q,x,V,l,K,1),q=e.cross(R,S,q),q=e.normalize(q,q),z=e.add(G,e.multiplyByScalar(q,-I,z),z),A===n.ROUNDED||A===n.BEVELED?j(G,k,z,A,ot,l,V,x,$+T,s):V=U(Z,F,x,V,l,$+T,nt,et),X=e.clone(z,X)),L=e.negate(S,L)}else V=U(X,q,x,V,l,Q+T,1,1),X=Z;Q=$,$=u[tt+1],Z=J}d[0]=e.clone(X,d[0]),d[1]=e.clone(Z,d[1]),K=C(d,Q+T,$+T,p),V=H(h.generateArc({positions:d,granularity:p,ellipsoid:l}),q,x,V,l,K,1),s&&(N=U(Z,q,D,N,l,$+T,1,1)),M=V.length;var at=s?M+N.length:M,st=new Float64Array(at);return st.set(V),s&&st.set(N,M),st},O}.apply(e,r))||(t.exports=n)},1977:function(t,e,i){var r,n;r=[i(6),i(22),i(11),i(0),i(3),i(13),i(23),i(263),i(7),i(169),i(35),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p){"use strict";var d=new t,c=new e;function m(i,n,o,l){this._scene=i,this._heightReference=o,this._extrudedHeightReference=l,this._positionProperty=n,this._position=new t,this._cartographicPosition=new e,this._normal=new t,this._definitionChanged=new a,this._terrainHeight=0,this._removeCallbackFunc=void 0,this._removeEventListener=void 0,this._removeModeListener=void 0;var h=this;if(r(i.globe)&&(this._removeEventListener=i.terrainProviderChanged.addEventListener(function(){h._updateClamping()}),this._removeModeListener=i.morphComplete.addEventListener(function(){h._updateClamping()})),n.isConstant){var u=n.getValue(s.MINIMUM_VALUE,d);if(!r(u)||t.equals(u,t.ZERO)||!r(i.globe))return;this._position=t.clone(u,this._position),this._updateClamping(),this._normal=i.globe.ellipsoid.geodeticSurfaceNormal(u,this._normal)}}return n(m.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}}}),m.prototype._updateClamping=function(){r(this._removeCallbackFunc)&&this._removeCallbackFunc();var e=this._scene,i=e.globe,n=this._position;if(r(i)&&!t.equals(n,t.ZERO)){var o=i.ellipsoid,a=i._surface,s=this,l=o.cartesianToCartographic(n,this._cartographicPosition),h=i.getHeight(l);r(h)?this._terrainHeight=h:this._terrainHeight=0,this._removeCallbackFunc=a.updateHeight(l,function(t){if(e.mode===u.SCENE3D){var i=o.cartesianToCartographic(t,c);s._terrainHeight=i.height}else s._terrainHeight=t.x;s.definitionChanged.raiseEvent()})}else this._terrainHeight=0},m.prototype.getValue=function(e,i){var n=p.getValueOrDefault(this._heightReference,e,h.NONE),o=p.getValueOrDefault(this._extrudedHeightReference,e,h.NONE);if(n===h.NONE&&o!==h.RELATIVE_TO_GROUND)return this._position=t.clone(t.ZERO,this._position),t.clone(t.ZERO,i);if(this._positionProperty.isConstant)return t.multiplyByScalar(this._normal,this._terrainHeight,i);var a=this._scene,s=this._positionProperty.getValue(e,d);if(!r(s)||t.equals(s,t.ZERO)||!r(a.globe))return t.clone(t.ZERO,i);if(t.equalsEpsilon(this._position,s,l.EPSILON10))return t.multiplyByScalar(this._normal,this._terrainHeight,i);this._position=t.clone(s,this._position),this._updateClamping();var u=a.globe.ellipsoid.geodeticSurfaceNormal(s,this._normal);return t.multiplyByScalar(u,this._terrainHeight,i)},m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){return r(this._removeEventListener)&&this._removeEventListener(),r(this._removeModeListener)&&this._removeModeListener(),r(this._removeCallbackFunc)&&this._removeCallbackFunc(),o(this)},m}.apply(e,r))||(t.exports=n)},1978:function(t,e,i){var r,n;r=[i(6),i(1965),i(0),i(7),i(41),i(712),i(1973),i(62)],void 0===(n=function(t,e,i,r,n,o,a,s){"use strict";var l={},h=new t,u=new t,p=new t,d=new t,c=[new t,new t],m=new t,f=new t,y=new t,g=new t,v=new t,_=new t,w=new t,b=new t,P=new t,A=new t,O=new s,E=new n;function C(i,o,a,l,p){var d,c=t.angleBetween(t.subtract(o,i,h),t.subtract(a,i,u)),m=l===e.BEVELED?1:Math.ceil(c/r.toRadians(5))+1,f=3*m,y=new Array(f);y[f-3]=a.x,y[f-2]=a.y,y[f-1]=a.z,d=p?n.fromQuaternion(s.fromAxisAngle(t.negate(i,h),c/m,O),E):n.fromQuaternion(s.fromAxisAngle(i,c/m,O),E);var g=0;o=t.clone(o,h);for(var v=0;v<m;v++)o=n.multiplyByVector(d,o,o),y[g++]=o.x,y[g++]=o.y,y[g++]=o.z;return y}function x(e,i,r,n){var o=h;return n?o=t.add(e,i,o):(i=t.negate(i,i),o=t.add(e,i,o)),[o.x,o.y,o.z,r.x,r.y,r.z]}function D(e,i,r,n){for(var o=new Array(e.length),a=new Array(e.length),s=t.multiplyByScalar(i,r,h),l=t.negate(s,u),c=0,m=e.length-1,f=0;f<e.length;f+=3){var y=t.fromArray(e,f,p),g=t.add(y,l,d);o[c++]=g.x,o[c++]=g.y,o[c++]=g.z;var v=t.add(y,s,d);a[m--]=v.z,a[m--]=v.y,a[m--]=v.x}return n.push(o,a),n}l.addAttribute=function(t,e,r,n){var o=e.x,a=e.y,s=e.z;i(r)&&(t[r]=o,t[r+1]=a,t[r+2]=s),i(n)&&(t[n]=s,t[n-1]=a,t[n-2]=o)};var T=new t,I=new t;return l.computePositions=function(i){var n=i.granularity,s=i.positions,l=i.ellipsoid,u=i.width/2,p=i.cornerType,d=i.saveAttributes,O=m,E=f,M=y,V=g,N=v,S=_,L=w,F=b,U=P,R=A,H=[],B=d?[]:void 0,G=d?[]:void 0,k=s[0],z=s[1];E=t.normalize(t.subtract(z,k,E),E),O=l.geodeticSurfaceNormal(k,O),V=t.normalize(t.cross(O,E,V),V),d&&(B.push(V.x,V.y,V.z),G.push(O.x,O.y,O.z)),L=t.clone(k,L),k=z,M=t.negate(E,M);var j,W,Y=[],q=s.length;for(j=1;j<q-1;j++){O=l.geodeticSurfaceNormal(k,O),z=s[j+1],E=t.normalize(t.subtract(z,k,E),E),N=t.normalize(t.add(E,M,N),N);var X=t.multiplyByScalar(O,t.dot(E,O),T);t.subtract(E,X,X),t.normalize(X,X);var Z=t.multiplyByScalar(O,t.dot(M,O),I);if(t.subtract(M,Z,Z),t.normalize(Z,Z),!r.equalsEpsilon(Math.abs(t.dot(X,Z)),1,r.EPSILON7)){N=t.cross(N,O,N),N=t.cross(O,N,N),N=t.normalize(N,N);var J=u/Math.max(.25,t.magnitude(t.cross(N,M,h))),K=a.angleIsGreaterThanPi(E,M,k,l);N=t.multiplyByScalar(N,J,N),K?(F=t.add(k,N,F),R=t.add(F,t.multiplyByScalar(V,u,R),R),U=t.add(F,t.multiplyByScalar(V,2*u,U),U),c[0]=t.clone(L,c[0]),c[1]=t.clone(R,c[1]),H=D(o.generateArc({positions:c,granularity:n,ellipsoid:l}),V,u,H),d&&(B.push(V.x,V.y,V.z),G.push(O.x,O.y,O.z)),S=t.clone(U,S),V=t.normalize(t.cross(O,E,V),V),U=t.add(F,t.multiplyByScalar(V,2*u,U),U),L=t.add(F,t.multiplyByScalar(V,u,L),L),p===e.ROUNDED||p===e.BEVELED?Y.push({leftPositions:C(F,S,U,p,K)}):Y.push({leftPositions:x(k,t.negate(N,N),U,K)})):(U=t.add(k,N,U),R=t.add(U,t.negate(t.multiplyByScalar(V,u,R),R),R),F=t.add(U,t.negate(t.multiplyByScalar(V,2*u,F),F),F),c[0]=t.clone(L,c[0]),c[1]=t.clone(R,c[1]),H=D(o.generateArc({positions:c,granularity:n,ellipsoid:l}),V,u,H),d&&(B.push(V.x,V.y,V.z),G.push(O.x,O.y,O.z)),S=t.clone(F,S),V=t.normalize(t.cross(O,E,V),V),F=t.add(U,t.negate(t.multiplyByScalar(V,2*u,F),F),F),L=t.add(U,t.negate(t.multiplyByScalar(V,u,L),L),L),p===e.ROUNDED||p===e.BEVELED?Y.push({rightPositions:C(U,S,F,p,K)}):Y.push({rightPositions:x(k,N,F,K)})),M=t.negate(E,M)}k=z}return O=l.geodeticSurfaceNormal(k,O),c[0]=t.clone(L,c[0]),c[1]=t.clone(k,c[1]),H=D(o.generateArc({positions:c,granularity:n,ellipsoid:l}),V,u,H),d&&(B.push(V.x,V.y,V.z),G.push(O.x,O.y,O.z)),p===e.ROUNDED&&(W=function(i){var r=m,n=f,o=y,a=i[1];n=t.fromArray(i[1],a.length-3,n),o=t.fromArray(i[0],0,o);var s=C(r=t.midpoint(n,o,r),n,o,e.ROUNDED,!1),l=i.length-1,h=i[l-1];return a=i[l],n=t.fromArray(h,h.length-3,n),o=t.fromArray(a,0,o),[s,C(r=t.midpoint(n,o,r),n,o,e.ROUNDED,!1)]}(H)),{positions:H,corners:Y,lefts:B,normals:G,endPositions:W}},l}.apply(e,r))||(t.exports=n)},1979:function(t,e,i){var r,n;r=[i(7)],void 0===(n=function(t){"use strict";var e={computePositions:function(e,i,r,n,o){var a,s=.5*e,l=-s,h=n+n,u=new Float64Array(3*(o?2*h:h)),p=0,d=0,c=o?3*h:0,m=o?3*(h+n):3*n;for(a=0;a<n;a++){var f=a/n*t.TWO_PI,y=Math.cos(f),g=Math.sin(f),v=y*r,_=g*r,w=y*i,b=g*i;u[d+c]=v,u[d+c+1]=_,u[d+c+2]=l,u[d+m]=w,u[d+m+1]=b,u[d+m+2]=s,d+=3,o&&(u[p++]=v,u[p++]=_,u[p++]=l,u[p++]=w,u[p++]=b,u[p++]=s)}return u}};return e}.apply(e,r))||(t.exports=n)},1980:function(t,e,i){var r,n;r=[i(228),i(0),i(465)],void 0===(n=function(t,e,i){"use strict";function r(e,i){this._primitives=e,this._orderedGroundPrimitives=i,this._dynamicUpdaters=new t}return r.prototype.add=function(t,e){this._dynamicUpdaters.set(e.id,e.createDynamicUpdater(this._primitives,this._orderedGroundPrimitives))},r.prototype.remove=function(t){var i=t.id,r=this._dynamicUpdaters.get(i);e(r)&&(this._dynamicUpdaters.remove(i),r.destroy())},r.prototype.update=function(t){for(var e=this._dynamicUpdaters.values,i=0,r=e.length;i<r;i++)e[i].update(t);return!0},r.prototype.removeAllPrimitives=function(){for(var t=this._dynamicUpdaters.values,e=0,i=t.length;e<i;e++)t[e].destroy();this._dynamicUpdaters.removeAll()},r.prototype.getBoundingSphere=function(t,r){return t=this._dynamicUpdaters.get(t.id),e(t)&&e(t.getBoundingSphere)?t.getBoundingSphere(r):i.FAILED},r}.apply(e,r))||(t.exports=n)},1981:function(t,e,i){var r,n;r=[i(6),i(7),i(41),i(62)],void 0===(n=function(t,e,i,r){"use strict";var n={},o=new t,a=new t,s=new r,l=new i;function h(e,n,h,u,p,d,c,m,f,y){var g=e+n;t.multiplyByScalar(u,Math.cos(g),o),t.multiplyByScalar(h,Math.sin(g),a),t.add(o,a,o);var v=Math.cos(e);v*=v;var _=Math.sin(e);_*=_;var w=d/Math.sqrt(c*v+p*_)/m;return r.fromAxisAngle(o,w,s),i.fromQuaternion(s,l),i.multiplyByVector(l,f,y),t.normalize(y,y),t.multiplyByScalar(y,m,y),y}var u=new t,p=new t,d=new t,c=new t;n.raisePositionsToHeight=function(e,i,r){for(var n=i.ellipsoid,o=i.height,a=i.extrudedHeight,s=r?e.length/3*2:e.length/3,l=new Float64Array(3*s),h=e.length,m=r?h:0,f=0;f<h;f+=3){var y=f+1,g=f+2,v=t.fromArray(e,f,u);n.scaleToGeodeticSurface(v,v);var _=t.clone(v,p),w=n.geodeticSurfaceNormal(v,c),b=t.multiplyByScalar(w,o,d);t.add(v,b,v),r&&(t.multiplyByScalar(w,a,b),t.add(_,b,_),l[f+m]=_.x,l[y+m]=_.y,l[g+m]=_.z),l[f]=v.x,l[y]=v.y,l[g]=v.z}return l};var m=new t,f=new t,y=new t;return n.computeEllipsePositions=function(i,r,n){var o=i.semiMinorAxis,a=i.semiMajorAxis,s=i.rotation,l=i.center,c=8*i.granularity,g=o*o,v=a*a,_=a*o,w=t.magnitude(l),b=t.normalize(l,m),P=t.cross(t.UNIT_Z,l,f);P=t.normalize(P,P);var A=t.cross(b,P,y),O=1+Math.ceil(e.PI_OVER_TWO/c),E=e.PI_OVER_TWO/(O-1),C=e.PI_OVER_TWO-O*E;C<0&&(O-=Math.ceil(Math.abs(C)/E));var x,D,T,I,M,V=r?new Array(3*(O*(O+2)*2)):void 0,N=0,S=u,L=p,F=4*O*3,U=F-1,R=0,H=n?new Array(F):void 0;for(S=h(C=e.PI_OVER_TWO,s,A,P,g,_,v,w,b,S),r&&(V[N++]=S.x,V[N++]=S.y,V[N++]=S.z),n&&(H[U--]=S.z,H[U--]=S.y,H[U--]=S.x),C=e.PI_OVER_TWO-E,x=1;x<O+1;++x){if(S=h(C,s,A,P,g,_,v,w,b,S),L=h(Math.PI-C,s,A,P,g,_,v,w,b,L),r){for(V[N++]=S.x,V[N++]=S.y,V[N++]=S.z,T=2*x+2,D=1;D<T-1;++D)I=D/(T-1),M=t.lerp(S,L,I,d),V[N++]=M.x,V[N++]=M.y,V[N++]=M.z;V[N++]=L.x,V[N++]=L.y,V[N++]=L.z}n&&(H[U--]=S.z,H[U--]=S.y,H[U--]=S.x,H[R++]=L.x,H[R++]=L.y,H[R++]=L.z),C=e.PI_OVER_TWO-(x+1)*E}for(x=O;x>1;--x){if(S=h(-(C=e.PI_OVER_TWO-(x-1)*E),s,A,P,g,_,v,w,b,S),L=h(C+Math.PI,s,A,P,g,_,v,w,b,L),r){for(V[N++]=S.x,V[N++]=S.y,V[N++]=S.z,T=2*(x-1)+2,D=1;D<T-1;++D)I=D/(T-1),M=t.lerp(S,L,I,d),V[N++]=M.x,V[N++]=M.y,V[N++]=M.z;V[N++]=L.x,V[N++]=L.y,V[N++]=L.z}n&&(H[U--]=S.z,H[U--]=S.y,H[U--]=S.x,H[R++]=L.x,H[R++]=L.y,H[R++]=L.z)}S=h(-(C=e.PI_OVER_TWO),s,A,P,g,_,v,w,b,S);var B={};return r&&(V[N++]=S.x,V[N++]=S.y,V[N++]=S.z,B.positions=V,B.numPts=O),n&&(H[U--]=S.z,H[U--]=S.y,H[U--]=S.x,B.outerPositions=H),B},n}.apply(e,r))||(t.exports=n)},1982:function(t,e,i){var r,n;r=[i(0),i(16),i(6),i(11),i(131),i(7),i(41),i(111)],void 0===(n=function(t,e,i,r,n,o,a,s){"use strict";var l={},h=new i,u=new i,p=new i,d=new i,c=new s;function m(t,r,n,o,a){var s=i.subtract(t,r,h),l=i.dot(n,s),u=i.dot(o,s);return e.fromElements(l,u,a)}return l.validOutline=function(t){var e=s.fromPoints(t,c).halfAxes,r=a.getColumn(e,0,u),n=a.getColumn(e,1,p),o=a.getColumn(e,2,d),l=i.magnitude(r),h=i.magnitude(n),m=i.magnitude(o);return!(0===l&&(0===h||0===m)||0===h&&0===m)},l.computeProjectTo2DArguments=function(t,e,r,n){var o,l,h=s.fromPoints(t,c),m=h.halfAxes,f=a.getColumn(m,0,u),y=a.getColumn(m,1,p),g=a.getColumn(m,2,d),v=i.magnitude(f),_=i.magnitude(y),w=i.magnitude(g),b=Math.min(v,_,w);return(0!==v||0!==_&&0!==w)&&(0!==_||0!==w)&&(b!==_&&b!==w||(o=f),b===v?o=y:b===w&&(l=y),b!==v&&b!==_||(l=g),i.normalize(o,r),i.normalize(l,n),i.clone(h.center,e),!0)},l.createProjectPointsTo2DFunction=function(t,e,i){return function(r){for(var n=new Array(r.length),o=0;o<r.length;o++)n[o]=m(r[o],t,e,i);return n}},l.createProjectPointTo2DFunction=function(t,e,i){return function(r,n){return m(r,t,e,i,n)}},l}.apply(e,r))||(t.exports=n)},1983:function(t,e,i){var r,n;r=[i(228),i(6),i(21),i(129),i(0),i(192),i(1961),i(710),i(709),i(143),i(465),i(332),i(1966),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c){"use strict";var m=new i,f=new o,y=new o,g=e.ZERO,v=new e;function _(e,i,r,o,a,s,l){var h;this.translucent=i,this.appearanceType=r,this.depthFailAppearanceType=o,this.depthFailMaterialProperty=a,this.depthFailMaterial=void 0,this.closed=s,this.shadows=l,this.primitives=e,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new t,this.updaters=new t,this.updatersWithAttributes=new t,this.attributes=new t,this.subscriptions=new t,this.showsUpdated=new t,this.itemsToRemove=[],this.invalidated=!1,n(a)&&(h=a.definitionChanged.addEventListener(_.prototype.onMaterialChanged,this)),this.removeMaterialSubscription=h}function w(t,e,i,r,n){this._solidItems=[],this._translucentItems=[],this._primitives=t,this._appearanceType=e,this._depthFailAppearanceType=i,this._closed=r,this._shadows=n}function b(t,e){for(var i=t.length-1;i>=0;i--){var r=t[i];if(r.remove(e))return 0===r.updaters.length&&(t.splice(i,1),r.destroy()),!0}return!1}function P(t,e,i){for(var r=!1,n=e.length,o=0;o<n;++o){var a=e[o],s=a.itemsToRemove,l=s.length;if(l>0)for(o=0;o<l;o++){var h=s[o];a.remove(h),t.add(i,h),r=!0}}return r}function A(t,e,i,r){var n,o=e.length;for(n=o-1;n>=0;n--){var a=e[n];if(a.invalidated){e.splice(n,1);for(var s=a.updaters.values,l=s.length,h=0;h<l;h++)t.add(i,s[h]);a.destroy()}}for(o=e.length,n=0;n<o;++n)r=e[n].update(i)&&r;return r}function O(t,e,i){for(var r=t.length,n=0;n<r;n++){var o=t[n];if(o.contains(e))return o.getBoundingSphere(e,i)}return u.FAILED}function E(t){for(var e=t.length,i=0;i<e;i++)t[i].destroy();t.length=0}return _.prototype.onMaterialChanged=function(){this.invalidated=!0},_.prototype.isMaterial=function(t){var e=this.depthFailMaterialProperty,i=t.depthFailMaterialProperty;return i===e||!!n(e)&&e.equals(i)},_.prototype.add=function(t,e){var i=t.id;if(this.createPrimitive=!0,this.geometry.set(i,e),this.updaters.set(i,t),t.hasConstantFill&&t.fillMaterialProperty.isConstant&&c.isConstant(t.distanceDisplayConditionProperty)&&c.isConstant(t.terrainOffsetProperty)){var r=this;this.subscriptions.set(i,t.entity.definitionChanged.addEventListener(function(e,i,n,o){"isShowing"===i&&r.showsUpdated.set(t.id,t)}))}else this.updatersWithAttributes.set(i,t)},_.prototype.remove=function(t){var e=t.id;if(this.createPrimitive=this.geometry.remove(e)||this.createPrimitive,this.updaters.remove(e)){this.updatersWithAttributes.remove(e);var i=this.subscriptions.get(e);return n(i)&&(i(),this.subscriptions.remove(e),this.showsUpdated.remove(e)),!0}return!1},_.prototype.update=function(t){var u,_=!0,w=0,b=this.primitive,P=this.primitives;if(this.createPrimitive){var A=this.geometry.values;if(A.length>0){var O;n(b)&&(n(this.oldPrimitive)?P.remove(b):this.oldPrimitive=b),n(this.depthFailAppearanceType)&&(n(this.depthFailMaterialProperty)&&(this.depthFailMaterial=d.getValue(t,this.depthFailMaterialProperty,this.depthFailMaterial)),O=new this.depthFailAppearanceType({material:this.depthFailMaterial,translucent:this.translucent,closed:this.closed})),b=new h({show:!1,asynchronous:!0,geometryInstances:A,appearance:new this.appearanceType({translucent:this.translucent,closed:this.closed}),depthFailAppearance:O,shadows:this.shadows}),P.add(b),_=!1}else{n(b)&&(P.remove(b),b=void 0);var E=this.oldPrimitive;n(E)&&(P.remove(E),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=b,this.createPrimitive=!1,this.waitingOnCreate=!0}else if(n(b)&&b.ready){b.show=!0,n(this.oldPrimitive)&&(P.remove(this.oldPrimitive),this.oldPrimitive=void 0),!n(this.depthFailAppearanceType)||this.depthFailMaterialProperty instanceof p||(this.depthFailMaterial=d.getValue(t,this.depthFailMaterialProperty,this.depthFailMaterial),this.primitive.depthFailAppearance.material=this.depthFailMaterial);var C=this.updatersWithAttributes.values,x=C.length,D=this.waitingOnCreate;for(u=0;u<x;u++){var T=C[u],I=this.geometry.get(T.id),M=this.attributes.get(I.id.id);if(n(M)||(M=b.getGeometryInstanceAttributes(I.id),this.attributes.set(I.id.id,M)),!T.fillMaterialProperty.isConstant||D){var V=T.fillMaterialProperty.color,N=c.getValueOrDefault(V,t,i.WHITE,m);i.equals(M._lastColor,N)||(M._lastColor=i.clone(N,M._lastColor),M.color=r.toValue(N,M.color),(this.translucent&&255===M.color[3]||!this.translucent&&255!==M.color[3])&&(this.itemsToRemove[w++]=T))}if(n(this.depthFailAppearanceType)&&T.depthFailMaterialProperty instanceof p&&(!T.depthFailMaterialProperty.isConstant||D)){var S=T.depthFailMaterialProperty.color,L=c.getValueOrDefault(S,t,i.WHITE,m);i.equals(M._lastDepthFailColor,L)||(M._lastDepthFailColor=i.clone(L,M._lastDepthFailColor),M.depthFailColor=r.toValue(L,M.depthFailColor))}var F=T.entity.isShowing&&(T.hasConstantFill||T.isFilled(t));F!==(1===M.show[0])&&(M.show=l.toValue(F,M.show));var U=T.distanceDisplayConditionProperty;if(!c.isConstant(U)){var R=c.getValueOrDefault(U,t,y,f);o.equals(R,M._lastDistanceDisplayCondition)||(M._lastDistanceDisplayCondition=o.clone(R,M._lastDistanceDisplayCondition),M.distanceDisplayCondition=a.toValue(R,M.distanceDisplayCondition))}var H=T.terrainOffsetProperty;if(!c.isConstant(H)){var B=c.getValueOrDefault(H,t,g,v);e.equals(B,M._lastOffset)||(M._lastOffset=e.clone(B,M._lastOffset),M.offset=s.toValue(B,M.offset))}}this.updateShows(b),this.waitingOnCreate=!1}else n(b)&&!b.ready&&(_=!1);return this.itemsToRemove.length=w,_},_.prototype.updateShows=function(t){for(var e=this.showsUpdated.values,i=e.length,r=0;r<i;r++){var o=e[r],a=this.geometry.get(o.id),s=this.attributes.get(a.id.id);n(s)||(s=t.getGeometryInstanceAttributes(a.id),this.attributes.set(a.id.id,s));var h=o.entity.isShowing;h!==(1===s.show[0])&&(s.show=l.toValue(h,s.show),a.attributes.show.value[0]=s.show[0])}this.showsUpdated.removeAll()},_.prototype.contains=function(t){return this.updaters.contains(t.id)},_.prototype.getBoundingSphere=function(t,e){var i=this.primitive;if(!i.ready)return u.PENDING;var r=i.getGeometryInstanceAttributes(t.entity);return!n(r)||!n(r.boundingSphere)||n(r.show)&&0===r.show[0]?u.FAILED:(r.boundingSphere.clone(e),u.DONE)},_.prototype.destroy=function(){var t=this.primitive,e=this.primitives;n(t)&&e.remove(t);var i=this.oldPrimitive;n(i)&&e.remove(i),n(this.removeMaterialSubscription)&&this.removeMaterialSubscription()},w.prototype.add=function(t,e){var i,r,n=e.createFillGeometryInstance(t);255===n.attributes.color.value[3]?(i=this._solidItems,r=!1):(i=this._translucentItems,r=!0);for(var o=i.length,a=0;a<o;a++){var s=i[a];if(s.isMaterial(e))return void s.add(e,n)}var l=new _(this._primitives,r,this._appearanceType,this._depthFailAppearanceType,e.depthFailMaterialProperty,this._closed,this._shadows);l.add(e,n),i.push(l)},w.prototype.remove=function(t){b(this._solidItems,t)||b(this._translucentItems,t)},w.prototype.update=function(t){var e=A(this,this._solidItems,t,!0);e=A(this,this._translucentItems,t,e)&&e;var i=P(this,this._solidItems,t),r=P(this,this._translucentItems,t);return(i||r)&&(e=A(this,this._solidItems,t,e)&&e,e=A(this,this._translucentItems,t,e)&&e),e},w.prototype.getBoundingSphere=function(t,e){var i=O(this._solidItems,t,e);return i===u.FAILED?O(this._translucentItems,t,e):i},w.prototype.removeAllPrimitives=function(){E(this._solidItems),E(this._translucentItems)},w}.apply(e,r))||(t.exports=n)},1984:function(t,e,i){var r,n;r=[i(228),i(6),i(21),i(129),i(0),i(192),i(1961),i(710),i(709),i(143),i(465),i(332),i(1966),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c){"use strict";var m=new o,f=new o,y=e.ZERO,g=new e;function v(e,i,r,n,o,a,s){this.primitives=e,this.appearanceType=i,this.materialProperty=r,this.depthFailAppearanceType=n,this.depthFailMaterialProperty=o,this.closed=a,this.shadows=s,this.updaters=new t,this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new t,this.material=void 0,this.depthFailMaterial=void 0,this.updatersWithAttributes=new t,this.attributes=new t,this.invalidated=!1,this.removeMaterialSubscription=r.definitionChanged.addEventListener(v.prototype.onMaterialChanged,this),this.subscriptions=new t,this.showsUpdated=new t}v.prototype.onMaterialChanged=function(){this.invalidated=!0},v.prototype.isMaterial=function(t){var e=this.materialProperty,i=t.fillMaterialProperty,r=this.depthFailMaterialProperty,o=t.depthFailMaterialProperty;if(i===e&&o===r)return!0;var a=n(e)&&e.equals(i);return a=(!n(r)&&!n(o)||n(r)&&r.equals(o))&&a},v.prototype.add=function(t,e){var i=e.id;if(this.updaters.set(i,e),this.geometry.set(i,e.createFillGeometryInstance(t)),e.hasConstantFill&&e.fillMaterialProperty.isConstant&&c.isConstant(e.distanceDisplayConditionProperty)&&c.isConstant(e.terrainOffsetProperty)){var r=this;this.subscriptions.set(i,e.entity.definitionChanged.addEventListener(function(t,i,n,o){"isShowing"===i&&r.showsUpdated.set(e.id,e)}))}else this.updatersWithAttributes.set(i,e);this.createPrimitive=!0},v.prototype.remove=function(t){var e=t.id;if(this.createPrimitive=this.geometry.remove(e)||this.createPrimitive,this.updaters.remove(e)){this.updatersWithAttributes.remove(e);var i=this.subscriptions.get(e);return n(i)&&(i(),this.subscriptions.remove(e),this.showsUpdated.remove(e)),!0}return!1};var _=new i;function w(t,e,i,r,n){this._items=[],this._primitives=t,this._appearanceType=e,this._depthFailAppearanceType=i,this._closed=r,this._shadows=n}return v.prototype.update=function(t){var u,v=!0,w=this.primitive,b=this.primitives,P=this.geometry.values;if(this.createPrimitive){if(P.length>0){var A;n(w)&&(n(this.oldPrimitive)?b.remove(w):this.oldPrimitive=w),this.material=d.getValue(t,this.materialProperty,this.material),n(this.depthFailMaterialProperty)&&(this.depthFailMaterial=d.getValue(t,this.depthFailMaterialProperty,this.depthFailMaterial),A=new this.depthFailAppearanceType({material:this.depthFailMaterial,translucent:this.depthFailMaterial.isTranslucent(),closed:this.closed})),w=new h({show:!1,asynchronous:!0,geometryInstances:P,appearance:new this.appearanceType({material:this.material,translucent:this.material.isTranslucent(),closed:this.closed}),depthFailAppearance:A,shadows:this.shadows}),b.add(w),v=!1}else{n(w)&&(b.remove(w),w=void 0);var O=this.oldPrimitive;n(O)&&(b.remove(O),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=w,this.createPrimitive=!1}else if(n(w)&&w.ready){w.show=!0,n(this.oldPrimitive)&&(b.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.material=d.getValue(t,this.materialProperty,this.material),this.primitive.appearance.material=this.material,!n(this.depthFailAppearanceType)||this.depthFailMaterialProperty instanceof p||(this.depthFailMaterial=d.getValue(t,this.depthFailMaterialProperty,this.depthFailMaterial),this.primitive.depthFailAppearance.material=this.depthFailMaterial);var E=this.updatersWithAttributes.values,C=E.length;for(u=0;u<C;u++){var x=E[u],D=x.entity,T=this.geometry.get(x.id),I=this.attributes.get(T.id.id);if(n(I)||(I=w.getGeometryInstanceAttributes(T.id),this.attributes.set(T.id.id,I)),n(this.depthFailAppearanceType)&&this.depthFailMaterialProperty instanceof p&&!x.depthFailMaterialProperty.isConstant){var M=x.depthFailMaterialProperty.color,V=c.getValueOrDefault(M,t,i.WHITE,_);i.equals(I._lastDepthFailColor,V)||(I._lastDepthFailColor=i.clone(V,I._lastDepthFailColor),I.depthFailColor=r.toValue(V,I.depthFailColor))}var N=D.isShowing&&(x.hasConstantFill||x.isFilled(t));N!==(1===I.show[0])&&(I.show=l.toValue(N,I.show));var S=x.distanceDisplayConditionProperty;if(!c.isConstant(S)){var L=c.getValueOrDefault(S,t,f,m);o.equals(L,I._lastDistanceDisplayCondition)||(I._lastDistanceDisplayCondition=o.clone(L,I._lastDistanceDisplayCondition),I.distanceDisplayCondition=a.toValue(L,I.distanceDisplayCondition))}var F=x.terrainOffsetProperty;if(!c.isConstant(F)){var U=c.getValueOrDefault(F,t,y,g);e.equals(U,I._lastOffset)||(I._lastOffset=e.clone(U,I._lastOffset),I.offset=s.toValue(U,I.offset))}}this.updateShows(w)}else n(w)&&!w.ready&&(v=!1);return v},v.prototype.updateShows=function(t){for(var e=this.showsUpdated.values,i=e.length,r=0;r<i;r++){var o=e[r],a=o.entity,s=this.geometry.get(o.id),h=this.attributes.get(s.id.id);n(h)||(h=t.getGeometryInstanceAttributes(s.id),this.attributes.set(s.id.id,h));var u=a.isShowing;u!==(1===h.show[0])&&(h.show=l.toValue(u,h.show),s.attributes.show.value[0]=h.show[0])}this.showsUpdated.removeAll()},v.prototype.contains=function(t){return this.updaters.contains(t.id)},v.prototype.getBoundingSphere=function(t,e){var i=this.primitive;if(!i.ready)return u.PENDING;var r=i.getGeometryInstanceAttributes(t.entity);return!n(r)||!n(r.boundingSphere)||n(r.show)&&0===r.show[0]?u.FAILED:(r.boundingSphere.clone(e),u.DONE)},v.prototype.destroy=function(){var t=this.primitive,e=this.primitives;n(t)&&e.remove(t);var i=this.oldPrimitive;n(i)&&e.remove(i),this.removeMaterialSubscription()},w.prototype.add=function(t,e){for(var i=this._items,r=i.length,n=0;n<r;n++){var o=i[n];if(o.isMaterial(e))return void o.add(t,e)}var a=new v(this._primitives,this._appearanceType,e.fillMaterialProperty,this._depthFailAppearanceType,e.depthFailMaterialProperty,this._closed,this._shadows);a.add(t,e),i.push(a)},w.prototype.remove=function(t){for(var e=this._items,i=e.length-1;i>=0;i--){var r=e[i];if(r.remove(t)){0===r.updaters.length&&(e.splice(i,1),r.destroy());break}}},w.prototype.update=function(t){var e,i=this._items;for(e=i.length-1;e>=0;e--){var r=i[e];if(r.invalidated){i.splice(e,1);for(var n=r.updaters.values,o=n.length,a=0;a<o;a++)this.add(t,n[a]);r.destroy()}}var s=!0;for(e=0;e<i.length;e++)s=i[e].update(t)&&s;return s},w.prototype.getBoundingSphere=function(t,e){for(var i=this._items,r=i.length,n=0;n<r;n++){var o=i[n];if(o.contains(t))return o.getBoundingSphere(t,e)}return u.FAILED},w.prototype.removeAllPrimitives=function(){for(var t=this._items,e=t.length,i=0;i<e;i++)t[i].destroy();this._items.length=0},w}.apply(e,r))||(t.exports=n)},1985:function(t,e,i){var r,n;r=[i(22),i(0),i(467),i(7),i(333),i(712),i(193)],void 0===(n=function(t,e,i,r,n,o,a){"use strict";var s={};function l(t,e){return r.equalsEpsilon(t.latitude,e.latitude,r.EPSILON14)&&r.equalsEpsilon(t.longitude,e.longitude,r.EPSILON14)}var h=new t,u=new t;var p=new Array(2),d=new Array(2),c={positions:void 0,height:void 0,granularity:void 0,ellipsoid:void 0};return s.computePositions=function(s,m,f,y,g,v){var _=function(i,r,n,o){var a=r.length;if(!(a<2)){var s=e(o),p=e(n),d=!0,c=new Array(a),m=new Array(a),f=new Array(a),y=r[0];c[0]=y;var g=i.cartesianToCartographic(y,h);p&&(g.height=n[0]),d=d&&g.height<=0,m[0]=g.height,f[0]=s?o[0]:0;for(var v=1,_=1;_<a;++_){var w=r[_],b=i.cartesianToCartographic(w,u);p&&(b.height=n[_]),d=d&&b.height<=0,l(g,b)?g.height<b.height&&(m[v-1]=b.height):(c[v]=w,m[v]=b.height,f[v]=s?o[_]:0,t.clone(b,g),++v)}if(!(d||v<2))return c.length=v,m.length=v,f.length=v,{positions:c,topHeights:m,bottomHeights:f}}}(s,m,f,y);if(e(_)){if(m=_.positions,f=_.topHeights,y=_.bottomHeights,m.length>=3){var w=i.fromPoints(m,s).projectPointsOntoPlane(m);n.computeWindingOrder2D(w)===a.CLOCKWISE&&(m.reverse(),f.reverse(),y.reverse())}var b,P,A=m.length,O=A-2,E=r.chordLength(g,s.maximumRadius),C=c;if(C.minDistance=E,C.ellipsoid=s,v){var x,D=0;for(x=0;x<A-1;x++)D+=o.numberOfPoints(m[x],m[x+1],E)+1;b=new Float64Array(3*D),P=new Float64Array(3*D);var T=p,I=d;C.positions=T,C.height=I;var M=0;for(x=0;x<A-1;x++){T[0]=m[x],T[1]=m[x+1],I[0]=f[x],I[1]=f[x+1];var V=o.generateArc(C);b.set(V,M),I[0]=y[x],I[1]=y[x+1],P.set(o.generateArc(C),M),M+=V.length}}else C.positions=m,C.height=f,b=new Float64Array(o.generateArc(C)),C.height=y,P=new Float64Array(o.generateArc(C));return{bottomPositions:P,topPositions:b,numCorners:O}}},s}.apply(e,r))||(t.exports=n)},2005:function(t,e,i){var r,n;r=[i(2),i(0),i(3),i(13),i(11),i(4),i(725)],void 0===(n=function(t,e,i,r,n,o,a){"use strict";function s(){this._length=0,this._collections={},this._collectionsArray=[],this.show=!0}return i(s.prototype,{length:{get:function(){return this._length}}}),s.prototype.add=function(i,r){r=t(r,0);var n=this._collections[r];if(!e(n)){(n=new a({destroyPrimitives:!1}))._zIndex=r,this._collections[r]=n;for(var o=this._collectionsArray,s=0;s<o.length&&o[s]._zIndex<r;)s++;o.splice(s,0,n)}return n.add(i),this._length++,i._zIndex=r,i},s.prototype.set=function(t,e){return e===t._zIndex?t:(this.remove(t,!0),this.add(t,e),t)},s.prototype.remove=function(t,e){if(this.contains(t)){var i,r=t._zIndex,n=this._collections[r];return(i=e?n.remove(t):n.removeAndDestroy(t))&&this._length--,0===n.length&&(this._collectionsArray.splice(this._collectionsArray.indexOf(n),1),this._collections[r]=void 0,n.destroy()),i}return!1},s.prototype.removeAll=function(){for(var t=this._collectionsArray,e=0;e<t.length;e++){var i=t[e];i.destroyPrimitives=!0,i.destroy()}this._collections={},this._collectionsArray=[],this._length=0},s.prototype.contains=function(t){if(!e(t))return!1;var i=this._collections[t._zIndex];return e(i)&&i.contains(t)},s.prototype.update=function(t){if(this.show)for(var e=this._collectionsArray,i=0;i<e.length;i++)e[i].update(t)},s.prototype.isDestroyed=function(){return!1},s.prototype.destroy=function(){return this.removeAll(),r(this)},s}.apply(e,r))||(t.exports=n)},2006:function(t,e,i){var r,n;r=[i(228),i(68),i(16),i(6),i(21),i(0),i(13),i(4),i(192),i(266),i(169),i(194),i(154),i(465),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m){"use strict";var f=n.WHITE,y=r.ZERO,g=u.NONE,v=i.ZERO,_=r.ZERO,w=p.CENTER,b=d.CENTER,P=new r,A=new n,O=new r,E=new i,C=new h,x=new h,D=new h,T=new e,I=new l;function M(t){this.entity=t,this.billboard=void 0,this.textureValue=void 0}function V(e,i){i.collectionChanged.addEventListener(V.prototype._onCollectionChanged,this),this._cluster=e,this._entityCollection=i,this._items=new t,this._onCollectionChanged(i,i.values,[],[])}function N(t,e,i){o(t)&&(t.billboard=void 0,i.removeBillboard(e))}return V.prototype.update=function(t){for(var e=this._items.values,i=this._cluster,r=0,n=e.length;r<n;r++){var a,s,l=e[r],h=l.entity,u=h._billboard,p=l.billboard,d=h.isShowing&&h.isAvailable(t)&&m.getValueOrDefault(u._show,t,!0);if(d&&(s=m.getValueOrUndefined(h._position,t,P),a=m.getValueOrUndefined(u._image,t),d=o(s)&&o(a)),d){m.isConstant(h._position)||(i._clusterDirty=!0),o(p)||((p=i.getBillboard(h)).id=h,p.image=void 0,l.billboard=p),p.show=d,o(p.image)&&l.textureValue===a||(p.image=a,l.textureValue=a),p.position=s,p.color=m.getValueOrDefault(u._color,t,f,A),p.eyeOffset=m.getValueOrDefault(u._eyeOffset,t,y,O),p.heightReference=m.getValueOrDefault(u._heightReference,t,g),p.pixelOffset=m.getValueOrDefault(u._pixelOffset,t,v,E),p.scale=m.getValueOrDefault(u._scale,t,1),p.rotation=m.getValueOrDefault(u._rotation,t,0),p.alignedAxis=m.getValueOrDefault(u._alignedAxis,t,_),p.horizontalOrigin=m.getValueOrDefault(u._horizontalOrigin,t,w),p.verticalOrigin=m.getValueOrDefault(u._verticalOrigin,t,b),p.width=m.getValueOrUndefined(u._width,t),p.height=m.getValueOrUndefined(u._height,t),p.scaleByDistance=m.getValueOrUndefined(u._scaleByDistance,t,C),p.translucencyByDistance=m.getValueOrUndefined(u._translucencyByDistance,t,x),p.pixelOffsetScaleByDistance=m.getValueOrUndefined(u._pixelOffsetScaleByDistance,t,D),p.sizeInMeters=m.getValueOrDefault(u._sizeInMeters,t,!1),p.distanceDisplayCondition=m.getValueOrUndefined(u._distanceDisplayCondition,t,I),p.disableDepthTestDistance=m.getValueOrUndefined(u._disableDepthTestDistance,t);var c=m.getValueOrUndefined(u._imageSubRegion,t,T);o(c)&&p.setImageSubRegion(p._imageId,c)}else N(l,h,i)}return!0},V.prototype.getBoundingSphere=function(t,e){var i=this._items.get(t.id);if(!o(i)||!o(i.billboard))return c.FAILED;var n=i.billboard;if(n.heightReference===u.NONE)e.center=r.clone(n.position,e.center);else{if(!o(n._clampedPosition))return c.PENDING;e.center=r.clone(n._clampedPosition,e.center)}return e.radius=0,c.DONE},V.prototype.isDestroyed=function(){return!1},V.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(V.prototype._onCollectionChanged,this);for(var t=this._entityCollection.values,e=0;e<t.length;e++)this._cluster.removeBillboard(t[e]);return a(this)},V.prototype._onCollectionChanged=function(t,e,i,r){var n,a,s=this._items,l=this._cluster;for(n=e.length-1;n>-1;n--)a=e[n],o(a._billboard)&&o(a._position)&&s.set(a.id,new M(a));for(n=r.length-1;n>-1;n--)a=r[n],o(a._billboard)&&o(a._position)?s.contains(a.id)||s.set(a.id,new M(a)):(N(s.get(a.id),a,l),s.remove(a.id));for(n=i.length-1;n>-1;n--)a=i[n],N(s.get(a.id),a,l),s.remove(a.id)},V}.apply(e,r))||(t.exports=n)},2007:function(t,e,i){var r,n;r=[i(228),i(31),i(11),i(2),i(0),i(13),i(23),i(230),i(171),i(1962),i(130),i(153),i(465),i(2014),i(332),i(2015),i(2018),i(1980),i(2021),i(2024),i(108),i(2025),i(2028),i(2033),i(2036),i(1983),i(1984),i(2037),i(2038),i(2042),i(2043)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y,g,v,_,w,b,P,A,O,E,C,x,D,T,I){"use strict";var M=[],V=[c,y,f,v,_,b,P,A,O,I];function N(t,e){this.entity=t,this.scene=e;var i=new Array(V.length),r=new a;function n(t){r.raiseEvent(t)}for(var o=new s,l=0;l<i.length;l++){var h=new V[l](t,e);o.add(h.geometryChanged,n),i[l]=h}this.updaters=i,this.geometryChanged=r,this.eventHelper=o,this._removeEntitySubscription=t.definitionChanged.addEventListener(N.prototype._onEntityPropertyChanged,this)}function S(e,i,n,o){n=r(n,e.primitives),o=r(o,e.groundPrimitives),this._scene=e,this._primitives=n,this._groundPrimitives=o,this._entityCollection=void 0,this._addedObjects=new t,this._removedObjects=new t,this._changedObjects=new t;var a=p.NUMBER_OF_SHADOW_MODES;this._outlineBatches=new Array(2*a),this._closedColorBatches=new Array(2*a),this._closedMaterialBatches=new Array(2*a),this._openColorBatches=new Array(2*a),this._openMaterialBatches=new Array(2*a);var s,d=w.supportsMaterialsforEntitiesOnTerrain(e);for(this._supportsMaterialsforEntitiesOnTerrain=d,s=0;s<a;++s)this._outlineBatches[s]=new T(n,e,s,!1),this._outlineBatches[a+s]=new T(n,e,s,!0),this._closedColorBatches[s]=new E(n,u,void 0,!0,s,!0),this._closedColorBatches[a+s]=new E(n,u,void 0,!0,s,!1),this._closedMaterialBatches[s]=new C(n,h,void 0,!0,s,!0),this._closedMaterialBatches[a+s]=new C(n,h,void 0,!0,s,!1),this._openColorBatches[s]=new E(n,u,void 0,!1,s,!0),this._openColorBatches[a+s]=new E(n,u,void 0,!1,s,!1),this._openMaterialBatches[s]=new C(n,h,void 0,!1,s,!0),this._openMaterialBatches[a+s]=new C(n,h,void 0,!1,s,!1);var c=l.NUMBER_OF_CLASSIFICATION_TYPES,m=new Array(c),f=[];if(d)for(s=0;s<c;++s)f.push(new D(o,s,h)),m[s]=new D(o,s,u);else for(s=0;s<c;++s)m[s]=new x(o,s);this._groundColorBatches=m,this._groundMaterialBatches=f,this._dynamicBatch=new g(n,o),this._batches=this._outlineBatches.concat(this._closedColorBatches,this._closedMaterialBatches,this._openColorBatches,this._openMaterialBatches,this._groundColorBatches,this._groundMaterialBatches,this._dynamicBatch),this._subscriptions=new t,this._updaterSets=new t,this._entityCollection=i,i.collectionChanged.addEventListener(S.prototype._onCollectionChanged,this),this._onCollectionChanged(i,i.values,M)}N.prototype._onEntityPropertyChanged=function(t,e,i,r){for(var n=this.updaters,o=0;o<n.length;o++)n[o]._onEntityPropertyChanged(t,e,i,r)},N.prototype.forEach=function(t){for(var e=this.updaters,i=0;i<e.length;i++)t(e[i])},N.prototype.destroy=function(){this.eventHelper.removeAll();for(var t=this.updaters,e=0;e<t.length;e++)t[e].destroy();this._removeEntitySubscription(),o(this)},S.prototype.update=function(t){var e,i,r,n,o=this._addedObjects,a=o.values,s=this._removedObjects,l=s.values,h=this._changedObjects,u=h.values,p=this;for(e=u.length-1;e>-1;e--)r=(i=u[e]).id,(n=this._updaterSets.get(r)).entity===i?n.forEach(function(e){p._removeUpdater(e),p._insertUpdaterIntoBatch(t,e)}):(l.push(i),a.push(i));for(e=l.length-1;e>-1;e--)r=(i=l[e]).id,(n=this._updaterSets.get(r)).forEach(this._removeUpdater.bind(this)),n.destroy(),this._updaterSets.remove(r),this._subscriptions.get(r)(),this._subscriptions.remove(r);for(e=a.length-1;e>-1;e--)r=(i=a[e]).id,n=new N(i,this._scene),this._updaterSets.set(r,n),n.forEach(function(e){p._insertUpdaterIntoBatch(t,e)}),this._subscriptions.set(r,n.geometryChanged.addEventListener(S._onGeometryChanged,this));o.removeAll(),s.removeAll(),h.removeAll();var d=!0,c=this._batches,m=c.length;for(e=0;e<m;e++)d=c[e].update(t)&&d;return d};var L=[],F=new e;return S.prototype.getBoundingSphere=function(t,i){for(var r=L,n=F,o=0,a=d.DONE,s=this._batches,l=s.length,h=t.id,u=this._updaterSets.get(h).updaters,p=0;p<u.length;p++)for(var c=u[p],m=0;m<l;m++){if((a=s[m].getBoundingSphere(c,n))===d.PENDING)return d.PENDING;a===d.DONE&&(r[o]=e.clone(n,r[o]),o++)}return 0===o?d.FAILED:(r.length=o,e.fromBoundingSpheres(r,i),d.DONE)},S.prototype.isDestroyed=function(){return!1},S.prototype.destroy=function(){var t;this._entityCollection.collectionChanged.removeEventListener(S.prototype._onCollectionChanged,this),this._addedObjects.removeAll(),this._removedObjects.removeAll();var e=this._batches,i=e.length;for(t=0;t<i;t++)e[t].removeAllPrimitives();var r=this._subscriptions.values;for(i=r.length,t=0;t<i;t++)r[t]();this._subscriptions.removeAll();var n=this._updaterSets.values;for(i=n.length,t=0;t<i;t++)n[t].destroy();return this._updaterSets.removeAll(),o(this)},S.prototype._removeUpdater=function(t){for(var e=this._batches,i=e.length,r=0;r<i;r++)e[r].remove(t)},S.prototype._insertUpdaterIntoBatch=function(t,e){if(e.isDynamic)this._dynamicBatch.add(t,e);else{var i;(e.outlineEnabled||e.fillEnabled)&&(i=e.shadowsProperty.getValue(t));var r=p.NUMBER_OF_SHADOW_MODES;if(e.outlineEnabled&&(n(e.terrainOffsetProperty)?this._outlineBatches[r+i].add(t,e):this._outlineBatches[i].add(t,e)),e.fillEnabled)if(e.onTerrain){var o=e.classificationTypeProperty.getValue(t);e.fillMaterialProperty instanceof m?this._groundColorBatches[o].add(t,e):this._groundMaterialBatches[o].add(t,e)}else e.isClosed?e.fillMaterialProperty instanceof m?n(e.terrainOffsetProperty)?this._closedColorBatches[r+i].add(t,e):this._closedColorBatches[i].add(t,e):n(e.terrainOffsetProperty)?this._closedMaterialBatches[r+i].add(t,e):this._closedMaterialBatches[i].add(t,e):e.fillMaterialProperty instanceof m?n(e.terrainOffsetProperty)?this._openColorBatches[r+i].add(t,e):this._openColorBatches[i].add(t,e):n(e.terrainOffsetProperty)?this._openMaterialBatches[r+i].add(t,e):this._openMaterialBatches[i].add(t,e)}},S._onGeometryChanged=function(t){var e=this._removedObjects,i=this._changedObjects,r=t.entity,o=r.id;n(e.get(o))||n(i.get(o))||i.set(o,r)},S.prototype._onCollectionChanged=function(t,e,i){var r,n,o,a=this._addedObjects,s=this._removedObjects,l=this._changedObjects;for(r=i.length-1;r>-1;r--)n=(o=i[r]).id,a.remove(n)||(s.set(n,o),l.remove(n));for(r=e.length-1;r>-1;r--)n=(o=e[r]).id,s.remove(n)?l.set(n,o):a.set(n,o)},S}.apply(e,r))||(t.exports=n)},2008:function(t,e,i){var r;void 0===(r=function(){"use strict";return"varying vec3 v_positionEC;\nvarying vec3 v_normalEC;\nvarying vec3 v_tangentEC;\nvarying vec3 v_bitangentEC;\nvarying vec2 v_st;\n\nvoid main()\n{\n    vec3 positionToEyeEC = -v_positionEC;\n    mat3 tangentToEyeMatrix = czm_tangentToEyeSpaceMatrix(v_normalEC, v_tangentEC, v_bitangentEC);\n\n    vec3 normalEC = normalize(v_normalEC);\n#ifdef FACE_FORWARD\n    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n#endif\n\n    czm_materialInput materialInput;\n    materialInput.normalEC = normalEC;\n    materialInput.tangentToEyeMatrix = tangentToEyeMatrix;\n    materialInput.positionToEyeEC = positionToEyeEC;\n    materialInput.st = v_st;\n    czm_material material = czm_getMaterial(materialInput);\n\n#ifdef FLAT\n    gl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#else\n    gl_FragColor = czm_phong(normalize(positionToEyeEC), material);\n#endif\n}\n"}.call(e,i,e,t))||(t.exports=r)},2009:function(t,e,i){var r;void 0===(r=function(){"use strict";return"attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute vec3 normal;\nattribute vec3 tangent;\nattribute vec3 bitangent;\nattribute vec2 st;\nattribute float batchId;\n\nvarying vec3 v_positionEC;\nvarying vec3 v_normalEC;\nvarying vec3 v_tangentEC;\nvarying vec3 v_bitangentEC;\nvarying vec2 v_st;\n\nvoid main()\n{\n    vec4 p = czm_computePosition();\n\n    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates\n    v_normalEC = czm_normal * normal;                         // normal in eye coordinates\n    v_tangentEC = czm_normal * tangent;                       // tangent in eye coordinates\n    v_bitangentEC = czm_normal * bitangent;                   // bitangent in eye coordinates\n    v_st = st;\n\n    gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n"}.call(e,i,e,t))||(t.exports=r)},2010:function(t,e,i){var r;void 0===(r=function(){"use strict";return"varying vec3 v_positionEC;\nvarying vec3 v_normalEC;\n\nvoid main()\n{\n    vec3 positionToEyeEC = -v_positionEC;\n\n    vec3 normalEC = normalize(v_normalEC);\n#ifdef FACE_FORWARD\n    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n#endif\n\n    czm_materialInput materialInput;\n    materialInput.normalEC = normalEC;\n    materialInput.positionToEyeEC = positionToEyeEC;\n    czm_material material = czm_getMaterial(materialInput);\n\n#ifdef FLAT\n    gl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#else\n    gl_FragColor = czm_phong(normalize(positionToEyeEC), material);\n#endif\n}\n"}.call(e,i,e,t))||(t.exports=r)},2011:function(t,e,i){var r;void 0===(r=function(){"use strict";return"attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute vec3 normal;\nattribute float batchId;\n\nvarying vec3 v_positionEC;\nvarying vec3 v_normalEC;\n\nvoid main()\n{\n    vec4 p = czm_computePosition();\n\n    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates\n    v_normalEC = czm_normal * normal;                         // normal in eye coordinates\n\n    gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n"}.call(e,i,e,t))||(t.exports=r)},2012:function(t,e,i){var r;void 0===(r=function(){"use strict";return"varying vec3 v_positionEC;\nvarying vec3 v_normalEC;\nvarying vec2 v_st;\n\nvoid main()\n{\n    vec3 positionToEyeEC = -v_positionEC;\n\n    vec3 normalEC = normalize(v_normalEC);\n#ifdef FACE_FORWARD\n    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n#endif\n\n    czm_materialInput materialInput;\n    materialInput.normalEC = normalEC;\n    materialInput.positionToEyeEC = positionToEyeEC;\n    materialInput.st = v_st;\n    czm_material material = czm_getMaterial(materialInput);\n\n#ifdef FLAT\n    gl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#else\n    gl_FragColor = czm_phong(normalize(positionToEyeEC), material);\n#endif\n}\n"}.call(e,i,e,t))||(t.exports=r)},2013:function(t,e,i){var r;void 0===(r=function(){"use strict";return"attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute vec3 normal;\nattribute vec2 st;\nattribute float batchId;\n\nvarying vec3 v_positionEC;\nvarying vec3 v_normalEC;\nvarying vec2 v_st;\n\nvoid main()\n{\n    vec4 p = czm_computePosition();\n\n    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates\n    v_normalEC = czm_normal * normal;                         // normal in eye coordinates\n    v_st = st;\n\n    gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n"}.call(e,i,e,t))||(t.exports=r)},2014:function(t,e,i){var r,n;r=[i(345),i(343),i(6),i(11),i(21),i(129),i(0),i(3),i(4),i(1961),i(117),i(152),i(263),i(710),i(709),i(169),i(1962),i(130),i(1972),i(332),i(1964),i(1963),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y,g,v,_,w,b,P){"use strict";var A=i.ZERO,O=new i,E=new i,C=new n;function x(t){this.id=t,this.vertexFormat=void 0,this.dimensions=void 0,this.offsetAttribute=void 0}function D(t,e){b.call(this,{entity:t,scene:e,geometryOptions:new x(t),geometryPropertyName:"box",observedPropertyNames:["availability","position","orientation","box"]}),this._onEntityPropertyChanged(t,"box",t.box,void 0)}function T(t,e,i){w.call(this,t,e,i)}return a(Object.create)&&(D.prototype=Object.create(b.prototype),D.prototype.constructor=D),s(D.prototype,{terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),D.prototype.createFillGeometryInstance=function(e){var i,r=this._entity,s=r.isAvailable(e),l=new m(s&&r.isShowing&&this._showProperty.getValue(e)&&this._fillProperty.getValue(e)),p=this._distanceDisplayConditionProperty.getValue(e),d={show:l,distanceDisplayCondition:h.fromDistanceDisplayCondition(p),color:void 0,offset:void 0};this._materialProperty instanceof _&&(a(this._materialProperty.color)&&(this._materialProperty.color.isConstant||s)&&(i=this._materialProperty.color.getValue(e,C)),a(i)||(i=n.WHITE),d.color=o.fromColor(i));return a(this._options.offsetAttribute)&&(d.offset=c.fromCartesian3(P.getValueOrDefault(this._terrainOffsetProperty,e,A,O))),new u({id:r,geometry:t.fromDimensions(this._options),modelMatrix:r.computeModelMatrixForHeightReference(e,r.box.heightReference,.5*this._options.dimensions.z,this._scene.mapProjection.ellipsoid),attributes:d})},D.prototype.createOutlineGeometryInstance=function(t){var i=this._entity,r=i.isAvailable(t),s=P.getValueOrDefault(this._outlineColorProperty,t,n.BLACK,C),l=this._distanceDisplayConditionProperty.getValue(t),p={show:new m(r&&i.isShowing&&this._showProperty.getValue(t)&&this._showOutlineProperty.getValue(t)),color:o.fromColor(s),distanceDisplayCondition:h.fromDistanceDisplayCondition(l),offset:void 0};return a(this._options.offsetAttribute)&&(p.offset=c.fromCartesian3(P.getValueOrDefault(this._terrainOffsetProperty,t,A,O))),new u({id:i,geometry:e.fromDimensions(this._options),modelMatrix:i.computeModelMatrixForHeightReference(t,i.box.heightReference,.5*this._options.dimensions.z,this._scene.mapProjection.ellipsoid),attributes:p})},D.prototype._computeCenter=function(t,e){return P.getValueOrUndefined(this._entity.position,t,e)},D.prototype._isHidden=function(t,e){return!a(e.dimensions)||!a(t.position)||b.prototype._isHidden.call(this,t,e)},D.prototype._isDynamic=function(t,e){return!(t.position.isConstant&&P.isConstant(t.orientation)&&e.dimensions.isConstant&&P.isConstant(e.outlineWidth))},D.prototype._setStaticOptions=function(t,e){var i=P.getValueOrDefault(e.heightReference,d.MINIMUM_VALUE,f.NONE),r=this._options;r.vertexFormat=this._materialProperty instanceof _?g.VERTEX_FORMAT:y.MaterialSupport.TEXTURED.vertexFormat,r.dimensions=e.dimensions.getValue(d.MINIMUM_VALUE,r.dimensions),r.offsetAttribute=i!==f.NONE?p.ALL:void 0},D.prototype._onEntityPropertyChanged=v,D.DynamicGeometryUpdater=T,a(Object.create)&&(T.prototype=Object.create(w.prototype),T.prototype.constructor=T),T.prototype._isHidden=function(t,e,i){var r=P.getValueOrUndefined(t.position,i,E),n=this._options.dimensions;return!a(r)||!a(n)||w.prototype._isHidden.call(this,t,e,i)},T.prototype._setOptions=function(t,e,i){var r=P.getValueOrDefault(e.heightReference,i,f.NONE),n=this._options;n.dimensions=P.getValueOrUndefined(e.dimensions,i,n.dimensions),n.offsetAttribute=r!==f.NONE?p.ALL:void 0},D}.apply(e,r))||(t.exports=n)},2015:function(t,e,i){var r,n;r=[i(229),i(6),i(11),i(21),i(129),i(2016),i(2017),i(0),i(4),i(1961),i(117),i(152),i(263),i(710),i(15),i(709),i(711),i(169),i(1962),i(130),i(332),i(1964),i(1963),i(1970),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y,g,v,_,w,b,P,A,O){"use strict";var E=new r,C=e.ZERO,x=new e,D=new m;function T(t){this.id=t,this.vertexFormat=void 0,this.positions=void 0,this.width=void 0,this.cornerType=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.offsetAttribute=void 0}function I(t,e){A.call(this,{entity:t,scene:e,geometryOptions:new T(t),geometryPropertyName:"corridor",observedPropertyNames:["availability","corridor"]}),this._onEntityPropertyChanged(t,"corridor",t.corridor,void 0)}function M(t,e,i){b.call(this,t,e,i)}return s(Object.create)&&(I.prototype=Object.create(A.prototype),I.prototype.constructor=I),I.prototype.createFillGeometryInstance=function(t){var e,i=this._entity,a=i.isAvailable(t),l={show:new f(a&&i.isShowing&&this._showProperty.getValue(t)&&this._fillProperty.getValue(t)),distanceDisplayCondition:h.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(t)),offset:void 0,color:void 0};this._materialProperty instanceof w&&(s(this._materialProperty.color)&&(this._materialProperty.color.isConstant||a)&&(e=this._materialProperty.color.getValue(t,E)),s(e)||(e=r.WHITE),l.color=n.fromColor(e));return s(this._options.offsetAttribute)&&(l.offset=c.fromCartesian3(O.getValueOrDefault(this._terrainOffsetProperty,t,C,x))),new u({id:i,geometry:new o(this._options),attributes:l})},I.prototype.createOutlineGeometryInstance=function(t){var e=this._entity,i=e.isAvailable(t),o=O.getValueOrDefault(this._outlineColorProperty,t,r.BLACK,E),l={show:new f(i&&e.isShowing&&this._showProperty.getValue(t)&&this._showOutlineProperty.getValue(t)),color:n.fromColor(o),distanceDisplayCondition:h.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(t)),offset:void 0};return s(this._options.offsetAttribute)&&(l.offset=c.fromCartesian3(O.getValueOrDefault(this._terrainOffsetProperty,t,C,x))),new u({id:e,geometry:new a(this._options),attributes:l})},I.prototype._computeCenter=function(t,i){var r=O.getValueOrUndefined(this._entity.corridor.positions,t);if(s(r)&&0!==r.length)return e.clone(r[Math.floor(r.length/2)],i)},I.prototype._isHidden=function(t,e){return!s(e.positions)||!s(e.width)||P.prototype._isHidden.call(this,t,e)},I.prototype._isDynamic=function(t,e){return!e.positions.isConstant||!O.isConstant(e.height)||!O.isConstant(e.extrudedHeight)||!O.isConstant(e.granularity)||!O.isConstant(e.width)||!O.isConstant(e.outlineWidth)||!O.isConstant(e.cornerType)||!O.isConstant(e.zIndex)||this._onTerrain&&!O.isConstant(this._materialProperty)},I.prototype._setStaticOptions=function(e,i){var r=O.getValueOrUndefined(i.height,d.MINIMUM_VALUE),n=O.getValueOrDefault(i.heightReference,d.MINIMUM_VALUE,g.NONE),a=O.getValueOrUndefined(i.extrudedHeight,d.MINIMUM_VALUE),l=O.getValueOrDefault(i.extrudedHeightReference,d.MINIMUM_VALUE,g.NONE);s(a)&&!s(r)&&(r=0);var h=this._options;h.vertexFormat=this._materialProperty instanceof w?_.VERTEX_FORMAT:v.MaterialSupport.TEXTURED.vertexFormat,h.positions=i.positions.getValue(d.MINIMUM_VALUE,h.positions),h.width=i.width.getValue(d.MINIMUM_VALUE),h.granularity=O.getValueOrUndefined(i.granularity,d.MINIMUM_VALUE),h.cornerType=O.getValueOrUndefined(i.cornerType,d.MINIMUM_VALUE),h.offsetAttribute=A.computeGeometryOffsetAttribute(r,n,a,l),h.height=A.getGeometryHeight(r,n),(a=A.getGeometryExtrudedHeight(a,l))===A.CLAMP_TO_GROUND&&(a=t.getMinimumMaximumHeights(o.computeRectangle(h,D)).minimumTerrainHeight),h.extrudedHeight=a},I.DynamicGeometryUpdater=M,s(Object.create)&&(M.prototype=Object.create(b.prototype),M.prototype.constructor=M),M.prototype._isHidden=function(t,e,i){var r=this._options;return!s(r.positions)||!s(r.width)||b.prototype._isHidden.call(this,t,e,i)},M.prototype._setOptions=function(e,i,r){var n=this._options,a=O.getValueOrUndefined(i.height,r),l=O.getValueOrDefault(i.heightReference,r,g.NONE),h=O.getValueOrUndefined(i.extrudedHeight,r),u=O.getValueOrDefault(i.extrudedHeightReference,r,g.NONE);s(h)&&!s(a)&&(a=0),n.positions=O.getValueOrUndefined(i.positions,r),n.width=O.getValueOrUndefined(i.width,r),n.granularity=O.getValueOrUndefined(i.granularity,r),n.cornerType=O.getValueOrUndefined(i.cornerType,r),n.offsetAttribute=A.computeGeometryOffsetAttribute(a,l,h,u),n.height=A.getGeometryHeight(a,l),(h=A.getGeometryExtrudedHeight(h,u))===A.CLAMP_TO_GROUND&&(h=t.getMinimumMaximumHeights(o.computeRectangle(n,D)).minimumTerrainHeight),n.extrudedHeight=h},I}.apply(e,r))||(t.exports=n)},2016:function(t,e,i){var r,n;r=[i(142),i(334),i(31),i(6),i(22),i(11),i(29),i(1965),i(1978),i(2),i(0),i(3),i(18),i(79),i(85),i(118),i(152),i(61),i(7),i(333),i(59),i(15),i(119)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y,g,v,_,w,b,P){"use strict";var A=new r,O=new r,E=new r,C=new r,x=new r,D=new r,T=new r,I=new r;function M(t,e){for(var i=0;i<t.length;i++)t[i]=e.scaleToGeodeticSurface(t[i],t[i]);return t}function V(t,e,i,n,o,a){var s=t.normals,h=t.tangents,u=t.bitangents,p=r.normalize(r.cross(i,e,T),T);a.normal&&l.addAttribute(s,e,n,o),a.tangent&&l.addAttribute(h,p,n,o),a.bitangent&&l.addAttribute(u,i,n,o)}function N(t,e,i){var n,o,s,h=t.positions,p=t.corners,d=t.endPositions,c=t.lefts,y=t.normals,_=new f,w=0,b=0,P=0;for(o=0;o<h.length;o+=2)w+=s=h[o].length-3,P+=2*s,b+=h[o+1].length-3;for(w+=3,b+=3,o=0;o<p.length;o++){n=p[o];var x=p[o].leftPositions;u(x)?(w+=s=x.length,P+=s):(b+=s=p[o].rightPositions.length,P+=s)}var M,N=u(d);N&&(w+=M=d[0].length-3,b+=M,P+=6*(M/=3));var S,L,F,U,R,H,B=w+b,G=new Float64Array(B),k={normals:e.normal?new Float32Array(B):void 0,tangents:e.tangent?new Float32Array(B):void 0,bitangents:e.bitangent?new Float32Array(B):void 0},z=0,j=B-1,W=A,Y=O,q=M/2,X=g.createTypedArray(B/3,P),Z=0;if(N){H=E,R=C;var J=d[0];for(W=r.fromArray(y,0,W),Y=r.fromArray(c,0,Y),o=0;o<q;o++)H=r.fromArray(J,3*(q-1-o),H),R=r.fromArray(J,3*(q+o),R),l.addAttribute(G,R,z),l.addAttribute(G,H,void 0,j),V(k,W,Y,z,j,e),U=(L=z/3)+1,F=(S=(j-2)/3)-1,X[Z++]=S,X[Z++]=L,X[Z++]=F,X[Z++]=F,X[Z++]=L,X[Z++]=U,z+=3,j-=3}var K,Q,$=0,tt=0,et=h[$++],it=h[$++];for(G.set(et,z),G.set(it,j-it.length+1),Y=r.fromArray(c,tt,Y),s=it.length-3,o=0;o<s;o+=3)K=i.geodeticSurfaceNormal(r.fromArray(et,o,T),T),Q=i.geodeticSurfaceNormal(r.fromArray(it,s-o,I),I),V(k,W=r.normalize(r.add(K,Q,W),W),Y,z,j,e),U=(L=z/3)+1,F=(S=(j-2)/3)-1,X[Z++]=S,X[Z++]=L,X[Z++]=F,X[Z++]=F,X[Z++]=L,X[Z++]=U,z+=3,j-=3;for(K=i.geodeticSurfaceNormal(r.fromArray(et,s,T),T),Q=i.geodeticSurfaceNormal(r.fromArray(it,s,I),I),W=r.normalize(r.add(K,Q,W),W),tt+=3,o=0;o<p.length;o++){var rt,nt,ot,at=(n=p[o]).leftPositions,st=n.rightPositions,lt=D,ht=E,ut=C;if(W=r.fromArray(y,tt,W),u(at)){for(V(k,W,Y,void 0,j,e),j-=3,nt=U,ot=F,rt=0;rt<at.length/3;rt++)lt=r.fromArray(at,3*rt,lt),X[Z++]=nt,X[Z++]=ot-rt-1,X[Z++]=ot-rt,l.addAttribute(G,lt,void 0,j),ht=r.fromArray(G,3*(ot-rt-1),ht),ut=r.fromArray(G,3*nt,ut),V(k,W,Y=r.normalize(r.subtract(ht,ut,Y),Y),void 0,j,e),j-=3;lt=r.fromArray(G,3*nt,lt),ht=r.subtract(r.fromArray(G,3*ot,ht),lt,ht),ut=r.subtract(r.fromArray(G,3*(ot-rt),ut),lt,ut),V(k,W,Y=r.normalize(r.add(ht,ut,Y),Y),z,void 0,e),z+=3}else{for(V(k,W,Y,z,void 0,e),z+=3,nt=F,ot=U,rt=0;rt<st.length/3;rt++)lt=r.fromArray(st,3*rt,lt),X[Z++]=nt,X[Z++]=ot+rt,X[Z++]=ot+rt+1,l.addAttribute(G,lt,z),ht=r.fromArray(G,3*nt,ht),ut=r.fromArray(G,3*(ot+rt),ut),V(k,W,Y=r.normalize(r.subtract(ht,ut,Y),Y),z,void 0,e),z+=3;lt=r.fromArray(G,3*nt,lt),ht=r.subtract(r.fromArray(G,3*(ot+rt),ht),lt,ht),ut=r.subtract(r.fromArray(G,3*ot,ut),lt,ut),V(k,W,Y=r.normalize(r.negate(r.add(ut,ht,Y),Y),Y),void 0,j,e),j-=3}for(et=h[$++],it=h[$++],et.splice(0,3),it.splice(it.length-3,3),G.set(et,z),G.set(it,j-it.length+1),s=it.length-3,tt+=3,Y=r.fromArray(c,tt,Y),rt=0;rt<it.length;rt+=3)K=i.geodeticSurfaceNormal(r.fromArray(et,rt,T),T),Q=i.geodeticSurfaceNormal(r.fromArray(it,s-rt,I),I),V(k,W=r.normalize(r.add(K,Q,W),W),Y,z,j,e),L=(U=z/3)-1,S=(F=(j-2)/3)+1,X[Z++]=S,X[Z++]=L,X[Z++]=F,X[Z++]=F,X[Z++]=L,X[Z++]=U,z+=3,j-=3;z-=3,j+=3}if(V(k,W=r.fromArray(y,y.length-3,W),Y,z,j,e),N){z+=3,j-=3,H=E,R=C;var pt=d[1];for(o=0;o<q;o++)H=r.fromArray(pt,3*(M-o-1),H),R=r.fromArray(pt,3*o,R),l.addAttribute(G,H,void 0,j),l.addAttribute(G,R,z),V(k,W,Y,z,j,e),L=(U=z/3)-1,S=(F=(j-2)/3)+1,X[Z++]=S,X[Z++]=L,X[Z++]=F,X[Z++]=F,X[Z++]=L,X[Z++]=U,z+=3,j-=3}if(_.position=new m({componentDatatype:a.DOUBLE,componentsPerAttribute:3,values:G}),e.st){var dt,ct,mt=new Float32Array(B/3*2),ft=0;if(N){w/=3,b/=3;var yt,gt=Math.PI/(M+1);ct=1/(w-M+1),dt=1/(b-M+1);var vt=M/2;for(o=vt+1;o<M+1;o++)yt=v.PI_OVER_TWO+gt*o,mt[ft++]=dt*(1+Math.cos(yt)),mt[ft++]=.5*(1+Math.sin(yt));for(o=1;o<b-M+1;o++)mt[ft++]=o*dt,mt[ft++]=0;for(o=M;o>vt;o--)yt=v.PI_OVER_TWO-o*gt,mt[ft++]=1-dt*(1+Math.cos(yt)),mt[ft++]=.5*(1+Math.sin(yt));for(o=vt;o>0;o--)yt=v.PI_OVER_TWO-gt*o,mt[ft++]=1-ct*(1+Math.cos(yt)),mt[ft++]=.5*(1+Math.sin(yt));for(o=w-M;o>0;o--)mt[ft++]=o*ct,mt[ft++]=1;for(o=1;o<vt+1;o++)yt=v.PI_OVER_TWO+gt*o,mt[ft++]=ct*(1+Math.cos(yt)),mt[ft++]=.5*(1+Math.sin(yt))}else{for(ct=1/((w/=3)-1),dt=1/((b/=3)-1),o=0;o<b;o++)mt[ft++]=o*dt,mt[ft++]=0;for(o=w;o>0;o--)mt[ft++]=(o-1)*ct,mt[ft++]=1}_.st=new m({componentDatatype:a.FLOAT,componentsPerAttribute:2,values:mt})}return e.normal&&(_.normal=new m({componentDatatype:a.FLOAT,componentsPerAttribute:3,values:k.normals})),e.tangent&&(_.tangent=new m({componentDatatype:a.FLOAT,componentsPerAttribute:3,values:k.tangents})),e.bitangent&&(_.bitangent=new m({componentDatatype:a.FLOAT,componentsPerAttribute:3,values:k.bitangents})),{attributes:_,indices:X}}function S(t,e,i){i[e++]=t[0],i[e++]=t[1],i[e++]=t[2];for(var r=3;r<t.length;r+=3){var n=t[r],o=t[r+1],a=t[r+2];i[e++]=n,i[e++]=o,i[e++]=a,i[e++]=n,i[e++]=o,i[e++]=a}return i[e++]=t[0],i[e++]=t[1],i[e++]=t[2],i}function L(e,i){var n=new P({position:i.position,normal:i.normal||i.bitangent||e.shadowVolume,tangent:i.tangent,bitangent:i.normal||i.bitangent,st:i.st}),o=e.ellipsoid,s=N(l.computePositions(e),n,o),h=e.height,p=e.extrudedHeight,d=s.attributes,c=s.indices,f=d.position.values,v=f.length,w=new Float64Array(6*v),b=new Float64Array(v);b.set(f);var T,I=new Float64Array(4*v);I=S(f=_.scaleToGeodeticHeight(f,h,o),0,I),I=S(b=_.scaleToGeodeticHeight(b,p,o),2*v,I),w.set(f),w.set(b,v),w.set(I,2*v),d.position.values=w,d=function(t,e){if(!(e.normal||e.tangent||e.bitangent||e.st))return t;var i,n,o=t.position.values;(e.normal||e.bitangent)&&(i=t.normal.values,n=t.bitangent.values);var a,s=t.position.values.length/18,h=3*s,u=2*s,p=2*h;if(e.normal||e.bitangent||e.tangent){var d=e.normal?new Float32Array(6*h):void 0,c=e.tangent?new Float32Array(6*h):void 0,m=e.bitangent?new Float32Array(6*h):void 0,f=A,y=O,g=E,v=C,_=x,w=D,b=p;for(a=0;a<h;a+=3){var P=b+p;f=r.fromArray(o,a,f),y=r.fromArray(o,a+h,y),g=r.fromArray(o,(a+3)%h,g),y=r.subtract(y,f,y),g=r.subtract(g,f,g),v=r.normalize(r.cross(y,g,v),v),e.normal&&(l.addAttribute(d,v,P),l.addAttribute(d,v,P+3),l.addAttribute(d,v,b),l.addAttribute(d,v,b+3)),(e.tangent||e.bitangent)&&(w=r.fromArray(i,a,w),e.bitangent&&(l.addAttribute(m,w,P),l.addAttribute(m,w,P+3),l.addAttribute(m,w,b),l.addAttribute(m,w,b+3)),e.tangent&&(_=r.normalize(r.cross(w,v,_),_),l.addAttribute(c,_,P),l.addAttribute(c,_,P+3),l.addAttribute(c,_,b),l.addAttribute(c,_,b+3))),b+=6}if(e.normal){for(d.set(i),a=0;a<h;a+=3)d[a+h]=-i[a],d[a+h+1]=-i[a+1],d[a+h+2]=-i[a+2];t.normal.values=d}else t.normal=void 0;if(e.bitangent?(m.set(n),m.set(n,h),t.bitangent.values=m):t.bitangent=void 0,e.tangent){var T=t.tangent.values;c.set(T),c.set(T,h),t.tangent.values=c}}if(e.st){var I=t.st.values,M=new Float32Array(6*u);M.set(I),M.set(I,u);for(var V=2*u,N=0;N<2;N++){for(M[V++]=I[0],M[V++]=I[1],a=2;a<u;a+=2){var S=I[a],L=I[a+1];M[V++]=S,M[V++]=L,M[V++]=S,M[V++]=L}M[V++]=I[0],M[V++]=I[1]}t.st.values=M}return t}(d,i);var M=v/3;if(e.shadowVolume){var V=d.normal.values;v=V.length;var L=new Float32Array(6*v);for(T=0;T<v;T++)V[T]=-V[T];L.set(V,v),L=S(V,4*v,L),d.extrudeDirection=new m({componentDatatype:a.FLOAT,componentsPerAttribute:3,values:L}),i.normal||(d.normal=void 0)}if(u(e.offsetAttribute)){var F=new Uint8Array(6*M);if(e.offsetAttribute===y.TOP)F=t(F,1,0,M),F=t(F,1,2*M,4*M);else{var U=e.offsetAttribute===y.NONE?0:1;F=t(F,U)}d.applyOffset=new m({componentDatatype:a.UNSIGNED_BYTE,componentsPerAttribute:1,values:F})}var R=c.length,H=M+M,B=g.createTypedArray(w.length/3,2*R+3*H);B.set(c);var G,k,z,j,W=R;for(T=0;T<R;T+=3){var Y=c[T],q=c[T+1],X=c[T+2];B[W++]=X+M,B[W++]=q+M,B[W++]=Y+M}for(T=0;T<H;T+=2)z=(G=T+H)+1,j=(k=G+H)+1,B[W++]=G,B[W++]=k,B[W++]=z,B[W++]=z,B[W++]=k,B[W++]=j;return{attributes:d,indices:B}}var F=new r,U=new r,R=new n;function H(t,e,i,n,o,a){var s=r.subtract(e,t,F);r.normalize(s,s);var l=i.geodeticSurfaceNormal(t,U),h=r.cross(s,l,F);r.multiplyByScalar(h,n,h);var u=o.latitude,p=o.longitude,d=a.latitude,c=a.longitude;r.add(t,h,U),i.cartesianToCartographic(U,R);var m=R.latitude,f=R.longitude;u=Math.min(u,m),p=Math.min(p,f),d=Math.max(d,m),c=Math.max(c,f),r.subtract(t,h,U),i.cartesianToCartographic(U,R),m=R.latitude,f=R.longitude,u=Math.min(u,m),p=Math.min(p,f),d=Math.max(d,m),c=Math.max(c,f),o.latitude=u,o.longitude=p,a.latitude=d,a.longitude=c}var B=new r,G=new r,k=new n,z=new n;function j(t,i,n,o,a){t=M(t,i);var l=e(t,r.equalsEpsilon),h=l.length;if(h<2||n<=0)return new b;var p,d,c=.5*n;if(k.latitude=Number.POSITIVE_INFINITY,k.longitude=Number.POSITIVE_INFINITY,z.latitude=Number.NEGATIVE_INFINITY,z.longitude=Number.NEGATIVE_INFINITY,o===s.ROUNDED){var m=l[0];r.subtract(m,l[1],B),r.normalize(B,B),r.multiplyByScalar(B,c,B),r.add(m,B,G),i.cartesianToCartographic(G,R),p=R.latitude,d=R.longitude,k.latitude=Math.min(k.latitude,p),k.longitude=Math.min(k.longitude,d),z.latitude=Math.max(z.latitude,p),z.longitude=Math.max(z.longitude,d)}for(var f=0;f<h-1;++f)H(l[f],l[f+1],i,c,k,z);var y=l[h-1];r.subtract(y,l[h-2],B),r.normalize(B,B),r.multiplyByScalar(B,c,B),r.add(y,B,G),H(y,G,i,c,k,z),o===s.ROUNDED&&(i.cartesianToCartographic(G,R),p=R.latitude,d=R.longitude,k.latitude=Math.min(k.latitude,p),k.longitude=Math.min(k.longitude,d),z.latitude=Math.max(z.latitude,p),z.longitude=Math.max(z.longitude,d));var g=u(a)?a:new b;return g.north=z.latitude,g.south=k.latitude,g.east=z.longitude,g.west=k.longitude,g}function W(t){var e=(t=h(t,h.EMPTY_OBJECT)).positions,i=t.width,n=h(t.height,0),o=h(t.extrudedHeight,n);this._positions=e,this._ellipsoid=d.clone(h(t.ellipsoid,d.WGS84)),this._vertexFormat=P.clone(h(t.vertexFormat,P.DEFAULT)),this._width=i,this._height=Math.max(n,o),this._extrudedHeight=Math.min(n,o),this._cornerType=h(t.cornerType,s.ROUNDED),this._granularity=h(t.granularity,v.RADIANS_PER_DEGREE),this._shadowVolume=h(t.shadowVolume,!1),this._workerName="createCorridorGeometry",this._offsetAttribute=t.offsetAttribute,this._rectangle=void 0,this.packedLength=1+e.length*r.packedLength+d.packedLength+P.packedLength+7}W.pack=function(t,e,i){i=h(i,0);var n=t._positions,o=n.length;e[i++]=o;for(var a=0;a<o;++a,i+=r.packedLength)r.pack(n[a],e,i);return d.pack(t._ellipsoid,e,i),i+=d.packedLength,P.pack(t._vertexFormat,e,i),i+=P.packedLength,e[i++]=t._width,e[i++]=t._height,e[i++]=t._extrudedHeight,e[i++]=t._cornerType,e[i++]=t._granularity,e[i++]=t._shadowVolume?1:0,e[i]=h(t._offsetAttribute,-1),e};var Y=d.clone(d.UNIT_SPHERE),q=new P,X={positions:void 0,ellipsoid:Y,vertexFormat:q,width:void 0,height:void 0,extrudedHeight:void 0,cornerType:void 0,granularity:void 0,shadowVolume:void 0,offsetAttribute:void 0};return W.unpack=function(t,e,i){e=h(e,0);for(var n=t[e++],o=new Array(n),a=0;a<n;++a,e+=r.packedLength)o[a]=r.unpack(t,e);var s=d.unpack(t,e,Y);e+=d.packedLength;var l=P.unpack(t,e,q);e+=P.packedLength;var p=t[e++],c=t[e++],m=t[e++],f=t[e++],y=t[e++],g=1===t[e++],v=t[e];return u(i)?(i._positions=o,i._ellipsoid=d.clone(s,i._ellipsoid),i._vertexFormat=P.clone(l,i._vertexFormat),i._width=p,i._height=c,i._extrudedHeight=m,i._cornerType=f,i._granularity=y,i._shadowVolume=g,i._offsetAttribute=-1===v?void 0:v,i):(X.positions=o,X.width=p,X.height=c,X.extrudedHeight=m,X.cornerType=f,X.granularity=y,X.shadowVolume=g,X.offsetAttribute=-1===v?void 0:v,new W(X))},W.computeRectangle=function(t,e){var i=(t=h(t,h.EMPTY_OBJECT)).positions,r=t.width;return j(i,h(t.ellipsoid,d.WGS84),r,h(t.cornerType,s.ROUNDED),e)},W.createGeometry=function(n){var o=n._positions,s=n._width,h=n._ellipsoid;o=M(o,h);var p=e(o,r.equalsEpsilon);if(!(p.length<2||s<=0)){var d,f=n._height,g=n._extrudedHeight,b=!v.equalsEpsilon(f,g,0,v.EPSILON2),P=n._vertexFormat,A={ellipsoid:h,positions:p,width:s,cornerType:n._cornerType,granularity:n._granularity,saveAttributes:!0};if(b)A.height=f,A.extrudedHeight=g,A.shadowVolume=n._shadowVolume,A.offsetAttribute=n._offsetAttribute,d=L(A,P);else if((d=N(l.computePositions(A),P,h)).attributes.position.values=_.scaleToGeodeticHeight(d.attributes.position.values,f,h),u(n._offsetAttribute)){var O=n._offsetAttribute===y.NONE?0:1,E=d.attributes.position.values.length,C=new Uint8Array(E/3);t(C,O),d.attributes.applyOffset=new m({componentDatatype:a.UNSIGNED_BYTE,componentsPerAttribute:1,values:C})}var x=d.attributes,D=i.fromVertices(x.position.values,void 0,3);return P.position||(d.attributes.position.values=void 0),new c({attributes:x,indices:d.indices,primitiveType:w.TRIANGLES,boundingSphere:D,offsetAttribute:n._offsetAttribute})}},W.createShadowVolume=function(t,e,i){var r=t._granularity,n=t._ellipsoid,o=e(r,n),a=i(r,n);return new W({positions:t._positions,width:t._width,cornerType:t._cornerType,ellipsoid:n,granularity:r,extrudedHeight:o,height:a,vertexFormat:P.POSITION_ONLY,shadowVolume:!0})},p(W.prototype,{rectangle:{get:function(){return u(this._rectangle)||(this._rectangle=j(this._positions,this._ellipsoid,this._width,this._cornerType)),this._rectangle}},textureCoordinateRotationPoints:{get:function(){return[0,0,0,1,1,0]}}}),W}.apply(e,r))||(t.exports=n)},2017:function(t,e,i){var r,n;r=[i(142),i(334),i(31),i(6),i(11),i(29),i(1965),i(1978),i(2),i(0),i(18),i(79),i(85),i(118),i(152),i(61),i(7),i(333),i(59)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y,g,v){"use strict";var _=new r,w=new r,b=new r;function P(t,e){var i,n,l,u=[],p=t.positions,m=t.corners,y=t.endPositions,g=new c,v=0,P=0,A=0;for(n=0;n<p.length;n+=2)v+=l=p[n].length-3,A+=l/3*4,P+=p[n+1].length-3;for(v+=3,P+=3,n=0;n<m.length;n++){i=m[n];var O=m[n].leftPositions;h(O)?(v+=l=O.length,A+=l/3*2):(P+=l=m[n].rightPositions.length,A+=l/3*2)}var E,C=h(y);C&&(v+=E=y[0].length-3,P+=E,A+=4*(E/=3));var x,D,T,I,M,V,N=v+P,S=new Float64Array(N),L=0,F=N-1,U=E/2,R=f.createTypedArray(N/3,A+4),H=0;if(R[H++]=L/3,R[H++]=(F-2)/3,C){u.push(L/3),V=_,M=w;var B=y[0];for(n=0;n<U;n++)V=r.fromArray(B,3*(U-1-n),V),M=r.fromArray(B,3*(U+n),M),s.addAttribute(S,M,L),s.addAttribute(S,V,void 0,F),I=(D=L/3)+1,T=(x=(F-2)/3)-1,R[H++]=x,R[H++]=T,R[H++]=D,R[H++]=I,L+=3,F-=3}var G=0,k=p[G++],z=p[G++];for(S.set(k,L),S.set(z,F-z.length+1),l=z.length-3,u.push(L/3,(F-2)/3),n=0;n<l;n+=3)I=(D=L/3)+1,T=(x=(F-2)/3)-1,R[H++]=x,R[H++]=T,R[H++]=D,R[H++]=I,L+=3,F-=3;for(n=0;n<m.length;n++){var j,W,Y=(i=m[n]).leftPositions,q=i.rightPositions,X=b;if(h(Y)){for(F-=3,W=T,u.push(I),j=0;j<Y.length/3;j++)X=r.fromArray(Y,3*j,X),R[H++]=W-j-1,R[H++]=W-j,s.addAttribute(S,X,void 0,F),F-=3;u.push(W-Math.floor(Y.length/6)),e===a.BEVELED&&u.push((F-2)/3+1),L+=3}else{for(L+=3,W=I,u.push(T),j=0;j<q.length/3;j++)X=r.fromArray(q,3*j,X),R[H++]=W+j,R[H++]=W+j+1,s.addAttribute(S,X,L),L+=3;u.push(W+Math.floor(q.length/6)),e===a.BEVELED&&u.push(L/3-1),F-=3}for(k=p[G++],z=p[G++],k.splice(0,3),z.splice(z.length-3,3),S.set(k,L),S.set(z,F-z.length+1),l=z.length-3,j=0;j<z.length;j+=3)D=(I=L/3)-1,x=(T=(F-2)/3)+1,R[H++]=x,R[H++]=T,R[H++]=D,R[H++]=I,L+=3,F-=3;L-=3,F+=3,u.push(L/3,(F-2)/3)}if(C){L+=3,F-=3,V=_,M=w;var Z=y[1];for(n=0;n<U;n++)V=r.fromArray(Z,3*(E-n-1),V),M=r.fromArray(Z,3*n,M),s.addAttribute(S,V,void 0,F),s.addAttribute(S,M,L),D=(I=L/3)-1,x=(T=(F-2)/3)+1,R[H++]=x,R[H++]=T,R[H++]=D,R[H++]=I,L+=3,F-=3;u.push(L/3)}else u.push(L/3,(F-2)/3);return R[H++]=L/3,R[H++]=(F-2)/3,g.position=new d({componentDatatype:o.DOUBLE,componentsPerAttribute:3,values:S}),{attributes:g,indices:R,wallIndices:u}}function A(t){var e=(t=l(t,l.EMPTY_OBJECT)).positions,i=t.width,n=l(t.height,0),o=l(t.extrudedHeight,n);this._positions=e,this._ellipsoid=u.clone(l(t.ellipsoid,u.WGS84)),this._width=i,this._height=Math.max(n,o),this._extrudedHeight=Math.min(n,o),this._cornerType=l(t.cornerType,a.ROUNDED),this._granularity=l(t.granularity,y.RADIANS_PER_DEGREE),this._offsetAttribute=t.offsetAttribute,this._workerName="createCorridorOutlineGeometry",this.packedLength=1+e.length*r.packedLength+u.packedLength+6}A.pack=function(t,e,i){i=l(i,0);var n=t._positions,o=n.length;e[i++]=o;for(var a=0;a<o;++a,i+=r.packedLength)r.pack(n[a],e,i);return u.pack(t._ellipsoid,e,i),i+=u.packedLength,e[i++]=t._width,e[i++]=t._height,e[i++]=t._extrudedHeight,e[i++]=t._cornerType,e[i++]=t._granularity,e[i]=l(t._offsetAttribute,-1),e};var O=u.clone(u.UNIT_SPHERE),E={positions:void 0,ellipsoid:O,width:void 0,height:void 0,extrudedHeight:void 0,cornerType:void 0,granularity:void 0,offsetAttribute:void 0};return A.unpack=function(t,e,i){e=l(e,0);for(var n=t[e++],o=new Array(n),a=0;a<n;++a,e+=r.packedLength)o[a]=r.unpack(t,e);var s=u.unpack(t,e,O);e+=u.packedLength;var p=t[e++],d=t[e++],c=t[e++],m=t[e++],f=t[e++],y=t[e];return h(i)?(i._positions=o,i._ellipsoid=u.clone(s,i._ellipsoid),i._width=p,i._height=d,i._extrudedHeight=c,i._cornerType=m,i._granularity=f,i._offsetAttribute=-1===y?void 0:y,i):(E.positions=o,E.width=p,E.height=d,E.extrudedHeight=c,E.cornerType=m,E.granularity=f,E.offsetAttribute=-1===y?void 0:y,new A(E))},A.createGeometry=function(n){var a=n._positions,l=n._width,u=n._ellipsoid;a=function(t,e){for(var i=0;i<t.length;i++)t[i]=e.scaleToGeodeticSurface(t[i],t[i]);return t}(a,u);var c=e(a,r.equalsEpsilon);if(!(c.length<2||l<=0)){var _,w=n._height,b=n._extrudedHeight,A=!y.equalsEpsilon(w,b,0,y.EPSILON2),O={ellipsoid:u,positions:c,width:l,cornerType:n._cornerType,granularity:n._granularity,saveAttributes:!1};if(A)O.height=w,O.extrudedHeight=b,O.offsetAttribute=n._offsetAttribute,_=function(e){var i=e.ellipsoid,r=P(s.computePositions(e),e.cornerType),n=r.wallIndices,a=e.height,l=e.extrudedHeight,u=r.attributes,p=r.indices,c=u.position.values,y=c.length,v=new Float64Array(y);v.set(c);var _,w=new Float64Array(2*y);if(c=g.scaleToGeodeticHeight(c,a,i),v=g.scaleToGeodeticHeight(v,l,i),w.set(c),w.set(v,y),u.position.values=w,y/=3,h(e.offsetAttribute)){var b=new Uint8Array(2*y);if(e.offsetAttribute===m.TOP)b=t(b,1,0,y);else{var A=e.offsetAttribute===m.NONE?0:1;b=t(b,A)}u.applyOffset=new d({componentDatatype:o.UNSIGNED_BYTE,componentsPerAttribute:1,values:b})}var O=p.length,E=f.createTypedArray(w.length/3,2*(O+n.length));E.set(p);var C,x,D=O;for(_=0;_<O;_+=2){var T=p[_],I=p[_+1];E[D++]=T+y,E[D++]=I+y}for(_=0;_<n.length;_++)x=(C=n[_])+y,E[D++]=C,E[D++]=x;return{attributes:u,indices:E}}(O);else if((_=P(s.computePositions(O),O.cornerType)).attributes.position.values=g.scaleToGeodeticHeight(_.attributes.position.values,w,u),h(n._offsetAttribute)){var E=_.attributes.position.values.length,C=new Uint8Array(E/3),x=n._offsetAttribute===m.NONE?0:1;t(C,x),_.attributes.applyOffset=new d({componentDatatype:o.UNSIGNED_BYTE,componentsPerAttribute:1,values:C})}var D=_.attributes,T=i.fromVertices(D.position.values,void 0,3);return new p({attributes:D,indices:_.indices,primitiveType:v.LINES,boundingSphere:T,offsetAttribute:n._offsetAttribute})}},A}.apply(e,r))||(t.exports=n)},2018:function(t,e,i){var r,n;r=[i(6),i(11),i(21),i(129),i(2019),i(2020),i(0),i(3),i(4),i(1961),i(117),i(152),i(263),i(710),i(709),i(169),i(1962),i(130),i(1972),i(332),i(1964),i(1963),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y,g,v,_,w,b,P){"use strict";var A=t.ZERO,O=new t,E=new t,C=new i;function x(t){this.id=t,this.vertexFormat=void 0,this.length=void 0,this.topRadius=void 0,this.bottomRadius=void 0,this.slices=void 0,this.numberOfVerticalLines=void 0,this.offsetAttribute=void 0}function D(t,e){b.call(this,{entity:t,scene:e,geometryOptions:new x(t),geometryPropertyName:"cylinder",observedPropertyNames:["availability","position","orientation","cylinder"]}),this._onEntityPropertyChanged(t,"cylinder",t.cylinder,void 0)}function T(t,e,i){w.call(this,t,e,i)}return a(Object.create)&&(D.prototype=Object.create(b.prototype),D.prototype.constructor=D),s(D.prototype,{terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),D.prototype.createFillGeometryInstance=function(t){var e,o=this._entity,s=o.isAvailable(t),l=new m(s&&o.isShowing&&this._showProperty.getValue(t)&&this._fillProperty.getValue(t)),p=this._distanceDisplayConditionProperty.getValue(t),d={show:l,distanceDisplayCondition:h.fromDistanceDisplayCondition(p),color:void 0,offset:void 0};this._materialProperty instanceof _&&(a(this._materialProperty.color)&&(this._materialProperty.color.isConstant||s)&&(e=this._materialProperty.color.getValue(t,C)),a(e)||(e=i.WHITE),d.color=r.fromColor(e));return a(this._options.offsetAttribute)&&(d.offset=c.fromCartesian3(P.getValueOrDefault(this._terrainOffsetProperty,t,A,O))),new u({id:o,geometry:new n(this._options),modelMatrix:o.computeModelMatrixForHeightReference(t,o.cylinder.heightReference,.5*this._options.length,this._scene.mapProjection.ellipsoid),attributes:d})},D.prototype.createOutlineGeometryInstance=function(t){var e=this._entity,n=e.isAvailable(t),s=P.getValueOrDefault(this._outlineColorProperty,t,i.BLACK,C),l=this._distanceDisplayConditionProperty.getValue(t),p={show:new m(n&&e.isShowing&&this._showProperty.getValue(t)&&this._showOutlineProperty.getValue(t)),color:r.fromColor(s),distanceDisplayCondition:h.fromDistanceDisplayCondition(l),offset:void 0};return a(this._options.offsetAttribute)&&(p.offset=c.fromCartesian3(P.getValueOrDefault(this._terrainOffsetProperty,t,A,O))),new u({id:e,geometry:new o(this._options),modelMatrix:e.computeModelMatrixForHeightReference(t,e.cylinder.heightReference,.5*this._options.length,this._scene.mapProjection.ellipsoid),attributes:p})},D.prototype._computeCenter=function(t,e){return P.getValueOrUndefined(this._entity.position,t,e)},D.prototype._isHidden=function(t,e){return!a(t.position)||!a(e.length)||!a(e.topRadius)||!a(e.bottomRadius)||b.prototype._isHidden.call(this,t,e)},D.prototype._isDynamic=function(t,e){return!(t.position.isConstant&&P.isConstant(t.orientation)&&e.length.isConstant&&e.topRadius.isConstant&&e.bottomRadius.isConstant&&P.isConstant(e.slices)&&P.isConstant(e.outlineWidth)&&P.isConstant(e.numberOfVerticalLines))},D.prototype._setStaticOptions=function(t,e){var i=P.getValueOrDefault(e.heightReference,d.MINIMUM_VALUE,f.NONE),r=this._options;r.vertexFormat=this._materialProperty instanceof _?g.VERTEX_FORMAT:y.MaterialSupport.TEXTURED.vertexFormat,r.length=e.length.getValue(d.MINIMUM_VALUE),r.topRadius=e.topRadius.getValue(d.MINIMUM_VALUE),r.bottomRadius=e.bottomRadius.getValue(d.MINIMUM_VALUE),r.slices=P.getValueOrUndefined(e.slices,d.MINIMUM_VALUE),r.numberOfVerticalLines=P.getValueOrUndefined(e.numberOfVerticalLines,d.MINIMUM_VALUE),r.offsetAttribute=i!==f.NONE?p.ALL:void 0},D.prototype._onEntityPropertyChanged=v,D.DynamicGeometryUpdater=T,a(Object.create)&&(T.prototype=Object.create(w.prototype),T.prototype.constructor=T),T.prototype._isHidden=function(t,e,i){var r=this._options,n=P.getValueOrUndefined(t.position,i,E);return!a(n)||!a(r.length)||!a(r.topRadius)||!a(r.bottomRadius)||w.prototype._isHidden.call(this,t,e,i)},T.prototype._setOptions=function(t,e,i){var r=P.getValueOrDefault(e.heightReference,i,f.NONE),n=this._options;n.length=P.getValueOrUndefined(e.length,i),n.topRadius=P.getValueOrUndefined(e.topRadius,i),n.bottomRadius=P.getValueOrUndefined(e.bottomRadius,i),n.slices=P.getValueOrUndefined(e.slices,i),n.numberOfVerticalLines=P.getValueOrUndefined(e.numberOfVerticalLines,i),n.offsetAttribute=r!==f.NONE?p.ALL:void 0},D}.apply(e,r))||(t.exports=n)},2019:function(t,e,i){var r,n;r=[i(142),i(31),i(16),i(6),i(29),i(1979),i(2),i(0),i(4),i(79),i(85),i(118),i(152),i(61),i(7),i(59),i(119)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y){"use strict";var g=new i,v=new r,_=new r,w=new r,b=new r;function P(t){var e=(t=a(t,a.EMPTY_OBJECT)).length,i=t.topRadius,r=t.bottomRadius,n=a(t.vertexFormat,y.DEFAULT),o=a(t.slices,128);this._length=e,this._topRadius=i,this._bottomRadius=r,this._vertexFormat=y.clone(n),this._slices=o,this._offsetAttribute=t.offsetAttribute,this._workerName="createCylinderGeometry"}P.packedLength=y.packedLength+5,P.pack=function(t,e,i){return i=a(i,0),y.pack(t._vertexFormat,e,i),i+=y.packedLength,e[i++]=t._length,e[i++]=t._topRadius,e[i++]=t._bottomRadius,e[i++]=t._slices,e[i]=a(t._offsetAttribute,-1),e};var A,O=new y,E={vertexFormat:O,length:void 0,topRadius:void 0,bottomRadius:void 0,slices:void 0,offsetAttribute:void 0};return P.unpack=function(t,e,i){e=a(e,0);var r=y.unpack(t,e,O);e+=y.packedLength;var n=t[e++],o=t[e++],l=t[e++],h=t[e++],u=t[e];return s(i)?(i._vertexFormat=y.clone(r,i._vertexFormat),i._length=n,i._topRadius=o,i._bottomRadius=l,i._slices=h,i._offsetAttribute=-1===u?void 0:u,i):(E.length=n,E.topRadius=o,E.bottomRadius=l,E.slices=h,E.offsetAttribute=-1===u?void 0:u,new P(E))},P.createGeometry=function(a){var l=a._length,y=a._topRadius,P=a._bottomRadius,A=a._vertexFormat,O=a._slices;if(!(l<=0||y<0||P<0||0===y&&0===P)){var E,C=O+O,x=O+C,D=C+C,T=o.computePositions(l,y,P,O,!0),I=A.st?new Float32Array(2*D):void 0,M=A.normal?new Float32Array(3*D):void 0,V=A.tangent?new Float32Array(3*D):void 0,N=A.bitangent?new Float32Array(3*D):void 0,S=A.normal||A.tangent||A.bitangent;if(S){var L=A.tangent||A.bitangent,F=0,U=0,R=0,H=Math.atan2(P-y,l),B=v;B.z=Math.sin(H);var G=Math.cos(H),k=w,z=_;for(E=0;E<O;E++){var j=E/O*m.TWO_PI,W=G*Math.cos(j),Y=G*Math.sin(j);S&&(B.x=W,B.y=Y,L&&(k=r.normalize(r.cross(r.UNIT_Z,B,k),k)),A.normal&&(M[F++]=B.x,M[F++]=B.y,M[F++]=B.z,M[F++]=B.x,M[F++]=B.y,M[F++]=B.z),A.tangent&&(V[U++]=k.x,V[U++]=k.y,V[U++]=k.z,V[U++]=k.x,V[U++]=k.y,V[U++]=k.z),A.bitangent&&(z=r.normalize(r.cross(B,k,z),z),N[R++]=z.x,N[R++]=z.y,N[R++]=z.z,N[R++]=z.x,N[R++]=z.y,N[R++]=z.z))}for(E=0;E<O;E++)A.normal&&(M[F++]=0,M[F++]=0,M[F++]=-1),A.tangent&&(V[U++]=1,V[U++]=0,V[U++]=0),A.bitangent&&(N[R++]=0,N[R++]=-1,N[R++]=0);for(E=0;E<O;E++)A.normal&&(M[F++]=0,M[F++]=0,M[F++]=1),A.tangent&&(V[U++]=1,V[U++]=0,V[U++]=0),A.bitangent&&(N[R++]=0,N[R++]=1,N[R++]=0)}var q=12*O-12,X=c.createTypedArray(D,q),Z=0,J=0;for(E=0;E<O-1;E++)X[Z++]=J,X[Z++]=J+2,X[Z++]=J+3,X[Z++]=J,X[Z++]=J+3,X[Z++]=J+1,J+=2;for(X[Z++]=C-2,X[Z++]=0,X[Z++]=1,X[Z++]=C-2,X[Z++]=1,X[Z++]=C-1,E=1;E<O-1;E++)X[Z++]=C+E+1,X[Z++]=C+E,X[Z++]=C;for(E=1;E<O-1;E++)X[Z++]=x,X[Z++]=x+E,X[Z++]=x+E+1;var K=0;if(A.st){var Q=Math.max(y,P);for(E=0;E<D;E++){var $=r.fromArray(T,3*E,b);I[K++]=($.x+Q)/(2*Q),I[K++]=($.y+Q)/(2*Q)}}var tt=new p;A.position&&(tt.position=new u({componentDatatype:n.DOUBLE,componentsPerAttribute:3,values:T})),A.normal&&(tt.normal=new u({componentDatatype:n.FLOAT,componentsPerAttribute:3,values:M})),A.tangent&&(tt.tangent=new u({componentDatatype:n.FLOAT,componentsPerAttribute:3,values:V})),A.bitangent&&(tt.bitangent=new u({componentDatatype:n.FLOAT,componentsPerAttribute:3,values:N})),A.st&&(tt.st=new u({componentDatatype:n.FLOAT,componentsPerAttribute:2,values:I})),g.x=.5*l,g.y=Math.max(P,y);var et=new e(r.ZERO,i.magnitude(g));if(s(a._offsetAttribute)){l=T.length;var it=new Uint8Array(l/3),rt=a._offsetAttribute===d.NONE?0:1;t(it,rt),tt.applyOffset=new u({componentDatatype:n.UNSIGNED_BYTE,componentsPerAttribute:1,values:it})}return new h({attributes:tt,indices:X,primitiveType:f.TRIANGLES,boundingSphere:et,offsetAttribute:a._offsetAttribute})}},P.getUnitCylinder=function(){return s(A)||(A=P.createGeometry(new P({topRadius:1,bottomRadius:1,length:1,vertexFormat:y.POSITION_ONLY}))),A},P}.apply(e,r))||(t.exports=n)},2020:function(t,e,i){var r,n;r=[i(142),i(31),i(16),i(6),i(11),i(29),i(1979),i(2),i(0),i(4),i(79),i(85),i(118),i(152),i(61),i(59)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f){"use strict";var y=new i;function g(t){var e=(t=s(t,s.EMPTY_OBJECT)).length,i=t.topRadius,r=t.bottomRadius,n=s(t.slices,128),o=Math.max(s(t.numberOfVerticalLines,16),0);this._length=e,this._topRadius=i,this._bottomRadius=r,this._slices=n,this._numberOfVerticalLines=o,this._offsetAttribute=t.offsetAttribute,this._workerName="createCylinderOutlineGeometry"}g.packedLength=6,g.pack=function(t,e,i){return i=s(i,0),e[i++]=t._length,e[i++]=t._topRadius,e[i++]=t._bottomRadius,e[i++]=t._slices,e[i++]=t._numberOfVerticalLines,e[i]=s(t._offsetAttribute,-1),e};var v={length:void 0,topRadius:void 0,bottomRadius:void 0,slices:void 0,numberOfVerticalLines:void 0,offsetAttribute:void 0};return g.unpack=function(t,e,i){e=s(e,0);var r=t[e++],n=t[e++],o=t[e++],a=t[e++],h=t[e++],u=t[e];return l(i)?(i._length=r,i._topRadius=n,i._bottomRadius=o,i._slices=a,i._numberOfVerticalLines=h,i._offsetAttribute=-1===u?void 0:u,i):(v.length=r,v.topRadius=n,v.bottomRadius=o,v.slices=a,v.numberOfVerticalLines=h,v.offsetAttribute=-1===u?void 0:u,new g(v))},g.createGeometry=function(n){var s=n._length,h=n._topRadius,g=n._bottomRadius,v=n._slices,_=n._numberOfVerticalLines;if(!(s<=0||h<0||g<0||0===h&&0===g)){var w,b=2*v,P=a.computePositions(s,h,g,v,!1),A=2*v;if(_>0){var O=Math.min(_,v);w=Math.round(v/O),A+=O}var E,C=m.createTypedArray(b,2*A),x=0;for(E=0;E<v-1;E++)C[x++]=E,C[x++]=E+1,C[x++]=E+v,C[x++]=E+1+v;if(C[x++]=v-1,C[x++]=0,C[x++]=v+v-1,C[x++]=v,_>0)for(E=0;E<v;E+=w)C[x++]=E,C[x++]=E+v;var D=new d;D.position=new p({componentDatatype:o.DOUBLE,componentsPerAttribute:3,values:P}),y.x=.5*s,y.y=Math.max(g,h);var T=new e(r.ZERO,i.magnitude(y));if(l(n._offsetAttribute)){s=P.length;var I=new Uint8Array(s/3),M=n._offsetAttribute===c.NONE?0:1;t(I,M),D.applyOffset=new p({componentDatatype:o.UNSIGNED_BYTE,componentsPerAttribute:1,values:I})}return new u({attributes:D,indices:C,primitiveType:f.LINES,boundingSphere:T,offsetAttribute:n._offsetAttribute})}},g}.apply(e,r))||(t.exports=n)},2021:function(t,e,i){var r,n;r=[i(229),i(6),i(11),i(21),i(129),i(0),i(4),i(1961),i(2022),i(2023),i(117),i(152),i(263),i(710),i(15),i(709),i(711),i(169),i(1962),i(130),i(332),i(1964),i(1963),i(1970),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y,g,v,_,w,b,P,A,O){"use strict";var E=new r,C=e.ZERO,x=new e,D=new m;function T(t){this.id=t,this.vertexFormat=void 0,this.center=void 0,this.semiMajorAxis=void 0,this.semiMinorAxis=void 0,this.rotation=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.numberOfVerticalLines=void 0,this.offsetAttribute=void 0}function I(t,e){A.call(this,{entity:t,scene:e,geometryOptions:new T(t),geometryPropertyName:"ellipse",observedPropertyNames:["availability","position","ellipse"]}),this._onEntityPropertyChanged(t,"ellipse",t.ellipse,void 0)}function M(t,e,i){b.call(this,t,e,i)}return o(Object.create)&&(I.prototype=Object.create(A.prototype),I.prototype.constructor=I),I.prototype.createFillGeometryInstance=function(t){var e,i=this._entity,a=i.isAvailable(t),h={show:new f(a&&i.isShowing&&this._showProperty.getValue(t)&&this._fillProperty.getValue(t)),distanceDisplayCondition:s.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(t)),offset:void 0,color:void 0};this._materialProperty instanceof w&&(o(this._materialProperty.color)&&(this._materialProperty.color.isConstant||a)&&(e=this._materialProperty.color.getValue(t,E)),o(e)||(e=r.WHITE),h.color=n.fromColor(e));return o(this._options.offsetAttribute)&&(h.offset=c.fromCartesian3(O.getValueOrDefault(this._terrainOffsetProperty,t,C,x))),new u({id:i,geometry:new l(this._options),attributes:h})},I.prototype.createOutlineGeometryInstance=function(t){var e=this._entity,i=e.isAvailable(t),a=O.getValueOrDefault(this._outlineColorProperty,t,r.BLACK,E),l=this._distanceDisplayConditionProperty.getValue(t),p={show:new f(i&&e.isShowing&&this._showProperty.getValue(t)&&this._showOutlineProperty.getValue(t)),color:n.fromColor(a),distanceDisplayCondition:s.fromDistanceDisplayCondition(l),offset:void 0};return o(this._options.offsetAttribute)&&(p.offset=c.fromCartesian3(O.getValueOrDefault(this._terrainOffsetProperty,t,C,x))),new u({id:e,geometry:new h(this._options),attributes:p})},I.prototype._computeCenter=function(t,e){return O.getValueOrUndefined(this._entity.position,t,e)},I.prototype._isHidden=function(t,e){var i=t.position;return!o(i)||!o(e.semiMajorAxis)||!o(e.semiMinorAxis)||P.prototype._isHidden.call(this,t,e)},I.prototype._isDynamic=function(t,e){return!t.position.isConstant||!e.semiMajorAxis.isConstant||!e.semiMinorAxis.isConstant||!O.isConstant(e.rotation)||!O.isConstant(e.height)||!O.isConstant(e.extrudedHeight)||!O.isConstant(e.granularity)||!O.isConstant(e.stRotation)||!O.isConstant(e.outlineWidth)||!O.isConstant(e.numberOfVerticalLines)||!O.isConstant(e.zIndex)||this._onTerrain&&!O.isConstant(this._materialProperty)},I.prototype._setStaticOptions=function(e,i){var r=O.getValueOrUndefined(i.height,d.MINIMUM_VALUE),n=O.getValueOrDefault(i.heightReference,d.MINIMUM_VALUE,g.NONE),a=O.getValueOrUndefined(i.extrudedHeight,d.MINIMUM_VALUE),s=O.getValueOrDefault(i.extrudedHeightReference,d.MINIMUM_VALUE,g.NONE);o(a)&&!o(r)&&(r=0);var h=this._options;h.vertexFormat=this._materialProperty instanceof w?_.VERTEX_FORMAT:v.MaterialSupport.TEXTURED.vertexFormat,h.center=e.position.getValue(d.MINIMUM_VALUE,h.center),h.semiMajorAxis=i.semiMajorAxis.getValue(d.MINIMUM_VALUE,h.semiMajorAxis),h.semiMinorAxis=i.semiMinorAxis.getValue(d.MINIMUM_VALUE,h.semiMinorAxis),h.rotation=O.getValueOrUndefined(i.rotation,d.MINIMUM_VALUE),h.granularity=O.getValueOrUndefined(i.granularity,d.MINIMUM_VALUE),h.stRotation=O.getValueOrUndefined(i.stRotation,d.MINIMUM_VALUE),h.numberOfVerticalLines=O.getValueOrUndefined(i.numberOfVerticalLines,d.MINIMUM_VALUE),h.offsetAttribute=A.computeGeometryOffsetAttribute(r,n,a,s),h.height=A.getGeometryHeight(r,n),(a=A.getGeometryExtrudedHeight(a,s))===A.CLAMP_TO_GROUND&&(a=t.getMinimumMaximumHeights(l.computeRectangle(h,D)).minimumTerrainHeight),h.extrudedHeight=a},I.DynamicGeometryUpdater=M,o(Object.create)&&(M.prototype=Object.create(b.prototype),M.prototype.constructor=M),M.prototype._isHidden=function(t,e,i){var r=this._options;return!o(r.center)||!o(r.semiMajorAxis)||!o(r.semiMinorAxis)||b.prototype._isHidden.call(this,t,e,i)},M.prototype._setOptions=function(e,i,r){var n=this._options,a=O.getValueOrUndefined(i.height,r),s=O.getValueOrDefault(i.heightReference,r,g.NONE),h=O.getValueOrUndefined(i.extrudedHeight,r),u=O.getValueOrDefault(i.extrudedHeightReference,r,g.NONE);o(h)&&!o(a)&&(a=0),n.center=O.getValueOrUndefined(e.position,r,n.center),n.semiMajorAxis=O.getValueOrUndefined(i.semiMajorAxis,r),n.semiMinorAxis=O.getValueOrUndefined(i.semiMinorAxis,r),n.rotation=O.getValueOrUndefined(i.rotation,r),n.granularity=O.getValueOrUndefined(i.granularity,r),n.stRotation=O.getValueOrUndefined(i.stRotation,r),n.numberOfVerticalLines=O.getValueOrUndefined(i.numberOfVerticalLines,r),n.offsetAttribute=A.computeGeometryOffsetAttribute(a,s,h,u),n.height=A.getGeometryHeight(a,s),(h=A.getGeometryExtrudedHeight(h,u))===A.CLAMP_TO_GROUND&&(h=t.getMinimumMaximumHeights(l.computeRectangle(n,D)).minimumTerrainHeight),n.extrudedHeight=h},I}.apply(e,r))||(t.exports=n)},2022:function(t,e,i){var r,n;r=[i(142),i(31),i(16),i(6),i(22),i(11),i(29),i(2),i(0),i(3),i(4),i(1981),i(18),i(102),i(79),i(85),i(118),i(117),i(152),i(170),i(61),i(7),i(41),i(59),i(62),i(15),i(119)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y,g,v,_,w,b,P,A,O,E,C){"use strict";var x=new r,D=new r,T=new r,I=new r,M=new i,V=new P,N=new P,S=new O,L=new r,F=new r,U=new r,R=new n,H=new r,B=new i,G=new i;function k(e,n,o){var s=n.vertexFormat,h=n.center,u=n.semiMajorAxis,d=n.semiMinorAxis,m=n.ellipsoid,g=n.stRotation,_=o?e.length/3*2:e.length/3,w=n.shadowVolume,b=s.st?new Float32Array(2*_):void 0,A=s.normal?new Float32Array(3*_):void 0,E=s.tangent?new Float32Array(3*_):void 0,C=s.bitangent?new Float32Array(3*_):void 0,I=w?new Float32Array(3*_):void 0,k=0,z=L,j=F,W=U,Y=new c(m),q=Y.project(m.cartesianToCartographic(h,R),H),X=m.scaleToGeodeticSurface(h,x);m.geodeticSurfaceNormal(X,X);var Z=V,J=N;if(0!==g){var K=O.fromAxisAngle(X,g,S);Z=P.fromQuaternion(K,Z),K=O.fromAxisAngle(X,-g,S),J=P.fromQuaternion(K,J)}else Z=P.clone(P.IDENTITY,Z),J=P.clone(P.IDENTITY,J);for(var Q=i.fromElements(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,B),$=i.fromElements(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,G),tt=e.length,et=o?tt:0,it=et/3*2,rt=0;rt<tt;rt+=3){var nt=rt+1,ot=rt+2,at=r.fromArray(e,rt,x);if(s.st){var st=P.multiplyByVector(Z,at,D),lt=Y.project(m.cartesianToCartographic(st,R),T);r.subtract(lt,q,lt),M.x=(lt.x+u)/(2*u),M.y=(lt.y+d)/(2*d),Q.x=Math.min(M.x,Q.x),Q.y=Math.min(M.y,Q.y),$.x=Math.max(M.x,$.x),$.y=Math.max(M.y,$.y),o&&(b[k+it]=M.x,b[k+1+it]=M.y),b[k++]=M.x,b[k++]=M.y}(s.normal||s.tangent||s.bitangent||w)&&(z=m.geodeticSurfaceNormal(at,z),w&&(I[rt+et]=-z.x,I[nt+et]=-z.y,I[ot+et]=-z.z),(s.normal||s.tangent||s.bitangent)&&((s.tangent||s.bitangent)&&(j=r.normalize(r.cross(r.UNIT_Z,z,j),j),P.multiplyByVector(J,j,j)),s.normal&&(A[rt]=z.x,A[nt]=z.y,A[ot]=z.z,o&&(A[rt+et]=-z.x,A[nt+et]=-z.y,A[ot+et]=-z.z)),s.tangent&&(E[rt]=j.x,E[nt]=j.y,E[ot]=j.z,o&&(E[rt+et]=-j.x,E[nt+et]=-j.y,E[ot+et]=-j.z)),s.bitangent&&(W=r.normalize(r.cross(z,j,W),W),C[rt]=W.x,C[nt]=W.y,C[ot]=W.z,o&&(C[rt+et]=W.x,C[nt+et]=W.y,C[ot+et]=W.z))))}if(s.st){tt=b.length;for(var ht=0;ht<tt;ht+=2)b[ht]=(b[ht]-Q.x)/($.x-Q.x),b[ht+1]=(b[ht+1]-Q.y)/($.y-Q.y)}var ut=new y;if(s.position){var pt=p.raisePositionsToHeight(e,n,o);ut.position=new f({componentDatatype:a.DOUBLE,componentsPerAttribute:3,values:pt})}if(s.st&&(ut.st=new f({componentDatatype:a.FLOAT,componentsPerAttribute:2,values:b})),s.normal&&(ut.normal=new f({componentDatatype:a.FLOAT,componentsPerAttribute:3,values:A})),s.tangent&&(ut.tangent=new f({componentDatatype:a.FLOAT,componentsPerAttribute:3,values:E})),s.bitangent&&(ut.bitangent=new f({componentDatatype:a.FLOAT,componentsPerAttribute:3,values:C})),w&&(ut.extrudeDirection=new f({componentDatatype:a.FLOAT,componentsPerAttribute:3,values:I})),o&&l(n.offsetAttribute)){var dt=new Uint8Array(_);if(n.offsetAttribute===v.TOP)dt=t(dt,1,0,_/2);else{var ct=n.offsetAttribute===v.NONE?0:1;dt=t(dt,ct)}ut.applyOffset=new f({componentDatatype:a.UNSIGNED_BYTE,componentsPerAttribute:1,values:dt})}return ut}function z(t){var e,i,r,n,o,a=new Array(t*(t+1)*12-6),s=0;for(e=0,r=1,n=0;n<3;n++)a[s++]=r++,a[s++]=e,a[s++]=r;for(n=2;n<t+1;++n){for(r=n*(n+1)-1,e=(n-1)*n-1,a[s++]=r++,a[s++]=e,a[s++]=r,i=2*n,o=0;o<i-1;++o)a[s++]=r,a[s++]=e++,a[s++]=e,a[s++]=r++,a[s++]=e,a[s++]=r;a[s++]=r++,a[s++]=e,a[s++]=r}for(i=2*t,++r,++e,n=0;n<i-1;++n)a[s++]=r,a[s++]=e++,a[s++]=e,a[s++]=r++,a[s++]=e,a[s++]=r;for(a[s++]=r,a[s++]=e++,a[s++]=e,a[s++]=r++,a[s++]=e++,a[s++]=e,++e,n=t-1;n>1;--n){for(a[s++]=e++,a[s++]=e,a[s++]=r,i=2*n,o=0;o<i-1;++o)a[s++]=r,a[s++]=e++,a[s++]=e,a[s++]=r++,a[s++]=e,a[s++]=r;a[s++]=e++,a[s++]=e++,a[s++]=r++}for(n=0;n<3;n++)a[s++]=e++,a[s++]=e,a[s++]=r;return a}var j=new r;var W=new e,Y=new e;function q(n){var o=n.center,s=n.ellipsoid,h=n.semiMajorAxis,u=r.multiplyByScalar(s.geodeticSurfaceNormal(o,x),n.height,x);W.center=r.add(o,u,W.center),W.radius=h,u=r.multiplyByScalar(s.geodeticSurfaceNormal(o,u),n.extrudedHeight,u),Y.center=r.add(o,u,Y.center),Y.radius=h;var d=p.computeEllipsePositions(n,!0,!0),b=d.positions,E=d.numPts,C=d.outerPositions,N=e.union(W,Y),j=k(b,n,!0),q=z(E),X=q.length;q.length=2*X;for(var Z=b.length/3,J=0;J<X;J+=3)q[J+X]=q[J+2]+Z,q[J+1+X]=q[J+1]+Z,q[J+2+X]=q[J]+Z;var K=w.createTypedArray(2*Z/3,q),Q=new m({attributes:j,indices:K,primitiveType:A.TRIANGLES}),$=function(e,n){var o=n.vertexFormat,s=n.center,h=n.semiMajorAxis,u=n.semiMinorAxis,p=n.ellipsoid,d=n.height,m=n.extrudedHeight,g=n.stRotation,_=e.length/3*2,w=new Float64Array(3*_),b=o.st?new Float32Array(2*_):void 0,A=o.normal?new Float32Array(3*_):void 0,E=o.tangent?new Float32Array(3*_):void 0,C=o.bitangent?new Float32Array(3*_):void 0,N=n.shadowVolume,k=N?new Float32Array(3*_):void 0,z=0,j=L,W=F,Y=U,q=new c(p),X=q.project(p.cartesianToCartographic(s,R),H),Z=p.scaleToGeodeticSurface(s,x);p.geodeticSurfaceNormal(Z,Z);for(var J=O.fromAxisAngle(Z,g,S),K=P.fromQuaternion(J,V),Q=i.fromElements(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,B),$=i.fromElements(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,G),tt=e.length,et=tt/3*2,it=0;it<tt;it+=3){var rt,nt=it+1,ot=it+2,at=r.fromArray(e,it,x);if(o.st){var st=P.multiplyByVector(K,at,D),lt=q.project(p.cartesianToCartographic(st,R),T);r.subtract(lt,X,lt),M.x=(lt.x+h)/(2*h),M.y=(lt.y+u)/(2*u),Q.x=Math.min(M.x,Q.x),Q.y=Math.min(M.y,Q.y),$.x=Math.max(M.x,$.x),$.y=Math.max(M.y,$.y),b[z+et]=M.x,b[z+1+et]=M.y,b[z++]=M.x,b[z++]=M.y}at=p.scaleToGeodeticSurface(at,at),rt=r.clone(at,D),j=p.geodeticSurfaceNormal(at,j),N&&(k[it+tt]=-j.x,k[nt+tt]=-j.y,k[ot+tt]=-j.z);var ht=r.multiplyByScalar(j,d,I);if(at=r.add(at,ht,at),ht=r.multiplyByScalar(j,m,ht),rt=r.add(rt,ht,rt),o.position&&(w[it+tt]=rt.x,w[nt+tt]=rt.y,w[ot+tt]=rt.z,w[it]=at.x,w[nt]=at.y,w[ot]=at.z),o.normal||o.tangent||o.bitangent){Y=r.clone(j,Y);var ut=r.fromArray(e,(it+3)%tt,I);r.subtract(ut,at,ut);var pt=r.subtract(rt,at,T);j=r.normalize(r.cross(pt,ut,j),j),o.normal&&(A[it]=j.x,A[nt]=j.y,A[ot]=j.z,A[it+tt]=j.x,A[nt+tt]=j.y,A[ot+tt]=j.z),o.tangent&&(W=r.normalize(r.cross(Y,j,W),W),E[it]=W.x,E[nt]=W.y,E[ot]=W.z,E[it+tt]=W.x,E[it+1+tt]=W.y,E[it+2+tt]=W.z),o.bitangent&&(C[it]=Y.x,C[nt]=Y.y,C[ot]=Y.z,C[it+tt]=Y.x,C[nt+tt]=Y.y,C[ot+tt]=Y.z)}}if(o.st){tt=b.length;for(var dt=0;dt<tt;dt+=2)b[dt]=(b[dt]-Q.x)/($.x-Q.x),b[dt+1]=(b[dt+1]-Q.y)/($.y-Q.y)}var ct=new y;if(o.position&&(ct.position=new f({componentDatatype:a.DOUBLE,componentsPerAttribute:3,values:w})),o.st&&(ct.st=new f({componentDatatype:a.FLOAT,componentsPerAttribute:2,values:b})),o.normal&&(ct.normal=new f({componentDatatype:a.FLOAT,componentsPerAttribute:3,values:A})),o.tangent&&(ct.tangent=new f({componentDatatype:a.FLOAT,componentsPerAttribute:3,values:E})),o.bitangent&&(ct.bitangent=new f({componentDatatype:a.FLOAT,componentsPerAttribute:3,values:C})),N&&(ct.extrudeDirection=new f({componentDatatype:a.FLOAT,componentsPerAttribute:3,values:k})),l(n.offsetAttribute)){var mt=new Uint8Array(_);if(n.offsetAttribute===v.TOP)mt=t(mt,1,0,_/2);else{var ft=n.offsetAttribute===v.NONE?0:1;mt=t(mt,ft)}ct.applyOffset=new f({componentDatatype:a.UNSIGNED_BYTE,componentsPerAttribute:1,values:mt})}return ct}(C,n);q=function(t){for(var e=t.length/3,i=w.createTypedArray(e,6*e),r=0,n=0;n<e;n++){var o=n,a=n+e,s=(o+1)%e,l=s+e;i[r++]=o,i[r++]=a,i[r++]=s,i[r++]=s,i[r++]=a,i[r++]=l}return i}(C);var tt=w.createTypedArray(2*C.length/3,q),et=new m({attributes:$,indices:tt,primitiveType:A.TRIANGLES}),it=_.combineInstances([new g({geometry:Q}),new g({geometry:et})]);return{boundingSphere:N,attributes:it[0].attributes,indices:it[0].indices}}function X(t,e,i,n,o,a,s){for(var l=p.computeEllipsePositions({center:t,semiMajorAxis:e,semiMinorAxis:i,rotation:n,granularity:o},!1,!0).outerPositions,h=l.length/3,u=new Array(h),d=0;d<h;++d)u[d]=r.fromArray(l,3*d);var c=E.fromCartesianArray(u,a,s);return c.width>b.PI&&(c.north=c.north>0?b.PI_OVER_TWO-b.EPSILON7:c.north,c.south=c.south<0?b.EPSILON7-b.PI_OVER_TWO:c.south,c.east=b.PI,c.west=-b.PI),c}function Z(t){var e=(t=s(t,s.EMPTY_OBJECT)).center,i=s(t.ellipsoid,d.WGS84),n=t.semiMajorAxis,o=t.semiMinorAxis,a=s(t.granularity,b.RADIANS_PER_DEGREE),l=s(t.vertexFormat,C.DEFAULT),h=s(t.height,0),u=s(t.extrudedHeight,h);this._center=r.clone(e),this._semiMajorAxis=n,this._semiMinorAxis=o,this._ellipsoid=d.clone(i),this._rotation=s(t.rotation,0),this._stRotation=s(t.stRotation,0),this._height=Math.max(u,h),this._granularity=a,this._vertexFormat=C.clone(l),this._extrudedHeight=Math.min(u,h),this._shadowVolume=s(t.shadowVolume,!1),this._workerName="createEllipseGeometry",this._offsetAttribute=t.offsetAttribute,this._rectangle=void 0,this._textureCoordinateRotationPoints=void 0}Z.packedLength=r.packedLength+d.packedLength+C.packedLength+9,Z.pack=function(t,e,i){return i=s(i,0),r.pack(t._center,e,i),i+=r.packedLength,d.pack(t._ellipsoid,e,i),i+=d.packedLength,C.pack(t._vertexFormat,e,i),i+=C.packedLength,e[i++]=t._semiMajorAxis,e[i++]=t._semiMinorAxis,e[i++]=t._rotation,e[i++]=t._stRotation,e[i++]=t._height,e[i++]=t._granularity,e[i++]=t._extrudedHeight,e[i++]=t._shadowVolume?1:0,e[i]=s(t._offsetAttribute,-1),e};var J=new r,K=new d,Q=new C,$={center:J,ellipsoid:K,vertexFormat:Q,semiMajorAxis:void 0,semiMinorAxis:void 0,rotation:void 0,stRotation:void 0,height:void 0,granularity:void 0,extrudedHeight:void 0,shadowVolume:void 0,offsetAttribute:void 0};return Z.unpack=function(t,e,i){e=s(e,0);var n=r.unpack(t,e,J);e+=r.packedLength;var o=d.unpack(t,e,K);e+=d.packedLength;var a=C.unpack(t,e,Q);e+=C.packedLength;var h=t[e++],u=t[e++],p=t[e++],c=t[e++],m=t[e++],f=t[e++],y=t[e++],g=1===t[e++],v=t[e];return l(i)?(i._center=r.clone(n,i._center),i._ellipsoid=d.clone(o,i._ellipsoid),i._vertexFormat=C.clone(a,i._vertexFormat),i._semiMajorAxis=h,i._semiMinorAxis=u,i._rotation=p,i._stRotation=c,i._height=m,i._granularity=f,i._extrudedHeight=y,i._shadowVolume=g,i._offsetAttribute=-1===v?void 0:v,i):($.height=m,$.extrudedHeight=y,$.granularity=f,$.stRotation=c,$.rotation=p,$.semiMajorAxis=h,$.semiMinorAxis=u,$.shadowVolume=g,$.offsetAttribute=-1===v?void 0:v,new Z($))},Z.computeRectangle=function(t,e){var i=(t=s(t,s.EMPTY_OBJECT)).center,r=s(t.ellipsoid,d.WGS84),n=t.semiMajorAxis,o=t.semiMinorAxis,a=s(t.granularity,b.RADIANS_PER_DEGREE);return X(i,n,o,s(t.rotation,0),a,r,e)},Z.createGeometry=function(i){if(!(i._semiMajorAxis<=0||i._semiMinorAxis<=0)){var n=i._height,o=i._extrudedHeight,s=!b.equalsEpsilon(n,o,0,b.EPSILON2);i._center=i._ellipsoid.scaleToGeodeticSurface(i._center,i._center);var h,u={center:i._center,semiMajorAxis:i._semiMajorAxis,semiMinorAxis:i._semiMinorAxis,ellipsoid:i._ellipsoid,rotation:i._rotation,height:n,granularity:i._granularity,vertexFormat:i._vertexFormat,stRotation:i._stRotation};if(s)u.extrudedHeight=o,u.shadowVolume=i._shadowVolume,u.offsetAttribute=i._offsetAttribute,h=q(u);else if(h=function(t){var i=t.center;j=r.multiplyByScalar(t.ellipsoid.geodeticSurfaceNormal(i,j),t.height,j),j=r.add(i,j,j);var n=new e(j,t.semiMajorAxis),o=p.computeEllipsePositions(t,!0,!1),a=o.positions,s=o.numPts,l=k(a,t,!1),h=z(s);return{boundingSphere:n,attributes:l,indices:h=w.createTypedArray(a.length/3,h)}}(u),l(i._offsetAttribute)){var d=h.attributes.position.values.length,c=new Uint8Array(d/3),y=i._offsetAttribute===v.NONE?0:1;t(c,y),h.attributes.applyOffset=new f({componentDatatype:a.UNSIGNED_BYTE,componentsPerAttribute:1,values:c})}return new m({attributes:h.attributes,indices:h.indices,primitiveType:A.TRIANGLES,boundingSphere:h.boundingSphere,offsetAttribute:i._offsetAttribute})}},Z.createShadowVolume=function(t,e,i){var r=t._granularity,n=t._ellipsoid,o=e(r,n),a=i(r,n);return new Z({center:t._center,semiMajorAxis:t._semiMajorAxis,semiMinorAxis:t._semiMinorAxis,ellipsoid:n,rotation:t._rotation,stRotation:t._stRotation,granularity:r,extrudedHeight:o,height:a,vertexFormat:C.POSITION_ONLY,shadowVolume:!0})},h(Z.prototype,{rectangle:{get:function(){return l(this._rectangle)||(this._rectangle=X(this._center,this._semiMajorAxis,this._semiMinorAxis,this._rotation,this._granularity,this._ellipsoid)),this._rectangle}},textureCoordinateRotationPoints:{get:function(){return l(this._textureCoordinateRotationPoints)||(this._textureCoordinateRotationPoints=function(t){var e=-t._stRotation;if(0===e)return[0,0,0,1,1,0];for(var i=p.computeEllipsePositions({center:t._center,semiMajorAxis:t._semiMajorAxis,semiMinorAxis:t._semiMinorAxis,rotation:t._rotation,granularity:t._granularity},!1,!0).outerPositions,n=i.length/3,o=new Array(n),a=0;a<n;++a)o[a]=r.fromArray(i,3*a);var s=t._ellipsoid,l=t.rectangle;return m._textureCoordinateRotationPoints(o,e,s,l)}(this)),this._textureCoordinateRotationPoints}}}),Z}.apply(e,r))||(t.exports=n)},2023:function(t,e,i){var r,n;r=[i(142),i(31),i(6),i(29),i(2),i(0),i(4),i(1981),i(18),i(79),i(85),i(118),i(152),i(61),i(7),i(59)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f){"use strict";var y=new i,g=new i;var v=new e,_=new e;function w(t){var e=(t=n(t,n.EMPTY_OBJECT)).center,r=n(t.ellipsoid,l.WGS84),o=t.semiMajorAxis,a=t.semiMinorAxis,s=n(t.granularity,m.RADIANS_PER_DEGREE),h=n(t.height,0),u=n(t.extrudedHeight,h);this._center=i.clone(e),this._semiMajorAxis=o,this._semiMinorAxis=a,this._ellipsoid=l.clone(r),this._rotation=n(t.rotation,0),this._height=Math.max(u,h),this._granularity=s,this._extrudedHeight=Math.min(u,h),this._numberOfVerticalLines=Math.max(n(t.numberOfVerticalLines,16),0),this._offsetAttribute=t.offsetAttribute,this._workerName="createEllipseOutlineGeometry"}w.packedLength=i.packedLength+l.packedLength+8,w.pack=function(t,e,r){return r=n(r,0),i.pack(t._center,e,r),r+=i.packedLength,l.pack(t._ellipsoid,e,r),r+=l.packedLength,e[r++]=t._semiMajorAxis,e[r++]=t._semiMinorAxis,e[r++]=t._rotation,e[r++]=t._height,e[r++]=t._granularity,e[r++]=t._extrudedHeight,e[r++]=t._numberOfVerticalLines,e[r]=n(t._offsetAttribute,-1),e};var b=new i,P=new l,A={center:b,ellipsoid:P,semiMajorAxis:void 0,semiMinorAxis:void 0,rotation:void 0,height:void 0,granularity:void 0,extrudedHeight:void 0,numberOfVerticalLines:void 0,offsetAttribute:void 0};return w.unpack=function(t,e,r){e=n(e,0);var a=i.unpack(t,e,b);e+=i.packedLength;var s=l.unpack(t,e,P);e+=l.packedLength;var h=t[e++],u=t[e++],p=t[e++],d=t[e++],c=t[e++],m=t[e++],f=t[e++],y=t[e];return o(r)?(r._center=i.clone(a,r._center),r._ellipsoid=l.clone(s,r._ellipsoid),r._semiMajorAxis=h,r._semiMinorAxis=u,r._rotation=p,r._height=d,r._granularity=c,r._extrudedHeight=m,r._numberOfVerticalLines=f,r._offsetAttribute=-1===y?void 0:y,r):(A.height=d,A.extrudedHeight=m,A.granularity=c,A.rotation=p,A.semiMajorAxis=h,A.semiMinorAxis=u,A.numberOfVerticalLines=f,A.offsetAttribute=-1===y?void 0:y,new w(A))},w.createGeometry=function(a){if(!(a._semiMajorAxis<=0||a._semiMinorAxis<=0)){var l=a._height,w=a._extrudedHeight,b=!m.equalsEpsilon(l,w,0,m.EPSILON2);a._center=a._ellipsoid.scaleToGeodeticSurface(a._center,a._center);var P,A={center:a._center,semiMajorAxis:a._semiMajorAxis,semiMinorAxis:a._semiMinorAxis,ellipsoid:a._ellipsoid,rotation:a._rotation,height:l,granularity:a._granularity,numberOfVerticalLines:a._numberOfVerticalLines};if(b)A.extrudedHeight=w,A.offsetAttribute=a._offsetAttribute,P=function(a){var l=a.center,h=a.ellipsoid,f=a.semiMajorAxis,g=i.multiplyByScalar(h.geodeticSurfaceNormal(l,y),a.height,y);v.center=i.add(l,g,v.center),v.radius=f,g=i.multiplyByScalar(h.geodeticSurfaceNormal(l,g),a.extrudedHeight,g),_.center=i.add(l,g,_.center),_.radius=f;var w=s.computeEllipsePositions(a,!1,!0).outerPositions,b=new p({position:new u({componentDatatype:r.DOUBLE,componentsPerAttribute:3,values:s.raisePositionsToHeight(w,a,!0)})});w=b.position.values;var P=e.union(v,_),A=w.length/3;if(o(a.offsetAttribute)){var O=new Uint8Array(A);if(a.offsetAttribute===d.TOP)O=t(O,1,0,A/2);else{var E=a.offsetAttribute===d.NONE?0:1;O=t(O,E)}b.applyOffset=new u({componentDatatype:r.UNSIGNED_BYTE,componentsPerAttribute:1,values:O})}var C=n(a.numberOfVerticalLines,16);C=m.clamp(C,0,A/2);var x=c.createTypedArray(A,2*A+2*C);A/=2;var D,T,I=0;for(D=0;D<A;++D)x[I++]=D,x[I++]=(D+1)%A,x[I++]=D+A,x[I++]=(D+1)%A+A;if(C>0){var M=Math.min(C,A);T=Math.round(A/M);var V=Math.min(T*C,A);for(D=0;D<V;D+=T)x[I++]=D,x[I++]=D+A}return{boundingSphere:P,attributes:b,indices:x}}(A);else if(P=function(t){var n=t.center;g=i.multiplyByScalar(t.ellipsoid.geodeticSurfaceNormal(n,g),t.height,g),g=i.add(n,g,g);for(var o=new e(g,t.semiMajorAxis),a=s.computeEllipsePositions(t,!1,!0).outerPositions,l=new p({position:new u({componentDatatype:r.DOUBLE,componentsPerAttribute:3,values:s.raisePositionsToHeight(a,t,!1)})}),h=a.length/3,d=c.createTypedArray(h,2*h),m=0,f=0;f<h;++f)d[m++]=f,d[m++]=(f+1)%h;return{boundingSphere:o,attributes:l,indices:d}}(A),o(a._offsetAttribute)){var O=P.attributes.position.values.length,E=new Uint8Array(O/3),C=a._offsetAttribute===d.NONE?0:1;t(E,C),P.attributes.applyOffset=new u({componentDatatype:r.UNSIGNED_BYTE,componentsPerAttribute:1,values:E})}return new h({attributes:P.attributes,indices:P.indices,primitiveType:f.LINES,boundingSphere:P.boundingSphere,offsetAttribute:a._offsetAttribute})}},w}.apply(e,r))||(t.exports=n)},2024:function(t,e,i){var r,n;r=[i(6),i(11),i(21),i(129),i(2),i(0),i(3),i(192),i(1961),i(477),i(741),i(117),i(152),i(263),i(710),i(17),i(709),i(169),i(1962),i(130),i(143),i(35),i(1972),i(332),i(1964),i(1963),i(1966),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y,g,v,_,w,b,P,A,O,E,C,x){"use strict";var D=new A(i.WHITE),T=t.ZERO,I=new t,M=new t,V=new i,N=new t(1,1,1);function S(t){this.id=t,this.vertexFormat=void 0,this.radii=void 0,this.stackPartitions=void 0,this.slicePartitions=void 0,this.subdivisions=void 0,this.offsetAttribute=void 0}function L(t,e){E.call(this,{entity:t,scene:e,geometryOptions:new S(t),geometryPropertyName:"ellipsoid",observedPropertyNames:["availability","position","orientation","ellipsoid"]}),this._onEntityPropertyChanged(t,"ellipsoid",t.ellipsoid,void 0)}function F(e,i,r){O.call(this,e,i,r),this._scene=e._scene,this._modelMatrix=new f,this._attributes=void 0,this._outlineAttributes=void 0,this._lastSceneMode=void 0,this._lastShow=void 0,this._lastOutlineShow=void 0,this._lastOutlineWidth=void 0,this._lastOutlineColor=void 0,this._lastOffset=new t,this._material={}}return o(Object.create)&&(L.prototype=Object.create(E.prototype),L.prototype.constructor=L),a(L.prototype,{terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),L.prototype.createFillGeometryInstance=function(t,e,n){var a,s,u=this._entity,d=u.isAvailable(t),c=new y(d&&u.isShowing&&this._showProperty.getValue(t)&&this._fillProperty.getValue(t)),f=this._distanceDisplayConditionProperty.getValue(t),g={show:c,distanceDisplayCondition:l.fromDistanceDisplayCondition(f),color:void 0,offset:void 0};this._materialProperty instanceof A&&(o(this._materialProperty.color)&&(this._materialProperty.color.isConstant||d)&&(s=this._materialProperty.color.getValue(t,V)),o(s)||(s=i.WHITE),a=r.fromColor(s),g.color=a);return o(this._options.offsetAttribute)&&(g.offset=m.fromCartesian3(x.getValueOrDefault(this._terrainOffsetProperty,t,T,I))),new p({id:u,geometry:new h(this._options),modelMatrix:e?void 0:u.computeModelMatrixForHeightReference(t,u.ellipsoid.heightReference,.5*this._options.radii.z,this._scene.mapProjection.ellipsoid,n),attributes:g})},L.prototype.createOutlineGeometryInstance=function(t,e,n){var a=this._entity,s=a.isAvailable(t),h=x.getValueOrDefault(this._outlineColorProperty,t,i.BLACK,V),d=this._distanceDisplayConditionProperty.getValue(t),c={show:new y(s&&a.isShowing&&this._showProperty.getValue(t)&&this._showOutlineProperty.getValue(t)),color:r.fromColor(h),distanceDisplayCondition:l.fromDistanceDisplayCondition(d),offset:void 0};return o(this._options.offsetAttribute)&&(c.offset=m.fromCartesian3(x.getValueOrDefault(this._terrainOffsetProperty,t,T,I))),new p({id:a,geometry:new u(this._options),modelMatrix:e?void 0:a.computeModelMatrixForHeightReference(t,a.ellipsoid.heightReference,.5*this._options.radii.z,this._scene.mapProjection.ellipsoid,n),attributes:c})},L.prototype._computeCenter=function(t,e){return x.getValueOrUndefined(this._entity.position,t,e)},L.prototype._isHidden=function(t,e){return!o(t.position)||!o(e.radii)||E.prototype._isHidden.call(this,t,e)},L.prototype._isDynamic=function(t,e){return!(t.position.isConstant&&x.isConstant(t.orientation)&&e.radii.isConstant&&x.isConstant(e.stackPartitions)&&x.isConstant(e.slicePartitions)&&x.isConstant(e.outlineWidth)&&x.isConstant(e.subdivisions))},L.prototype._setStaticOptions=function(t,e){var i=x.getValueOrDefault(e.heightReference,c.MINIMUM_VALUE,g.NONE),r=this._options;r.vertexFormat=this._materialProperty instanceof A?_.VERTEX_FORMAT:v.MaterialSupport.TEXTURED.vertexFormat,r.radii=e.radii.getValue(c.MINIMUM_VALUE,r.radii),r.stackPartitions=x.getValueOrUndefined(e.stackPartitions,c.MINIMUM_VALUE),r.slicePartitions=x.getValueOrUndefined(e.slicePartitions,c.MINIMUM_VALUE),r.subdivisions=x.getValueOrUndefined(e.subdivisions,c.MINIMUM_VALUE),r.offsetAttribute=i!==g.NONE?d.ALL:void 0},L.prototype._onEntityPropertyChanged=P,L.DynamicGeometryUpdater=F,o(Object.create)&&(F.prototype=Object.create(O.prototype),F.prototype.constructor=F),F.prototype.update=function(e){var a=this._entity,h=a.ellipsoid;if(!a.isShowing||!a.isAvailable(e)||!x.getValueOrDefault(h.show,e,!0))return o(this._primitive)&&(this._primitive.show=!1),void(o(this._outlinePrimitive)&&(this._outlinePrimitive.show=!1));var u=x.getValueOrUndefined(h.radii,e,M),p=o(u)?a.computeModelMatrixForHeightReference(e,h.heightReference,.5*u.z,this._scene.mapProjection.ellipsoid,this._modelMatrix):void 0;if(!o(p)||!o(u))return o(this._primitive)&&(this._primitive.show=!1),void(o(this._outlinePrimitive)&&(this._outlinePrimitive.show=!1));var c=x.getValueOrDefault(h.fill,e,!0),P=x.getValueOrDefault(h.outline,e,!1),A=x.getValueOrClonedDefault(h.outlineColor,e,i.BLACK,V),O=C.getValue(e,n(h.material,D),this._material),E=x.getValueOrUndefined(h.stackPartitions,e),S=x.getValueOrUndefined(h.slicePartitions,e),L=x.getValueOrUndefined(h.subdivisions,e),F=x.getValueOrDefault(h.outlineWidth,e,1),U=x.getValueOrDefault(h.heightReference,e,g.NONE),R=U!==g.NONE?d.ALL:void 0,H=this._scene.mode,B=H===b.SCENE3D&&U===g.NONE,G=this._options,k=this._geometryUpdater.shadowsProperty.getValue(e),z=this._geometryUpdater.distanceDisplayConditionProperty.getValue(e),j=x.getValueOrDefault(this._geometryUpdater.terrainOffsetProperty,e,T,I);if(!B||this._lastSceneMode!==H||!o(this._primitive)||G.stackPartitions!==E||G.slicePartitions!==S||G.subdivisions!==L||this._lastOutlineWidth!==F||G.offsetAttribute!==R){var W=this._primitives;W.removeAndDestroy(this._primitive),W.removeAndDestroy(this._outlinePrimitive),this._primitive=void 0,this._outlinePrimitive=void 0,this._lastSceneMode=H,this._lastOutlineWidth=F,G.stackPartitions=E,G.slicePartitions=S,G.subdivisions=L,G.offsetAttribute=R,G.radii=B?N:u;var Y=new v({material:O,translucent:O.isTranslucent(),closed:!0});G.vertexFormat=Y.vertexFormat;var q=this._geometryUpdater.createFillGeometryInstance(e,B,this._modelMatrix);this._primitive=W.add(new w({geometryInstances:q,appearance:Y,asynchronous:!1,shadows:k}));var X=this._geometryUpdater.createOutlineGeometryInstance(e,B,this._modelMatrix);this._outlinePrimitive=W.add(new w({geometryInstances:X,appearance:new _({flat:!0,translucent:255!==X.attributes.color.value[3],renderState:{lineWidth:this._geometryUpdater._scene.clampLineWidth(F)}}),asynchronous:!1,shadows:k})),this._lastShow=c,this._lastOutlineShow=P,this._lastOutlineColor=i.clone(A,this._lastOutlineColor),this._lastDistanceDisplayCondition=z,this._lastOffset=t.clone(j,this._lastOffset)}else if(this._primitive.ready){var Z=this._primitive,J=this._outlinePrimitive;Z.show=!0,J.show=!0,Z.appearance.material=O;var K=this._attributes;o(K)||(K=Z.getGeometryInstanceAttributes(a),this._attributes=K),c!==this._lastShow&&(K.show=y.toValue(c,K.show),this._lastShow=c);var Q=this._outlineAttributes;o(Q)||(Q=J.getGeometryInstanceAttributes(a),this._outlineAttributes=Q),P!==this._lastOutlineShow&&(Q.show=y.toValue(P,Q.show),this._lastOutlineShow=P),i.equals(A,this._lastOutlineColor)||(Q.color=r.toValue(A,Q.color),i.clone(A,this._lastOutlineColor)),s.equals(z,this._lastDistanceDisplayCondition)||(K.distanceDisplayCondition=l.toValue(z,K.distanceDisplayCondition),Q.distanceDisplayCondition=l.toValue(z,Q.distanceDisplayCondition),s.clone(z,this._lastDistanceDisplayCondition)),t.equals(j,this._lastOffset)||(K.offset=m.toValue(j,K.offset),Q.offset=m.toValue(j,K.offset),t.clone(j,this._lastOffset))}B&&(u.x=Math.max(u.x,.001),u.y=Math.max(u.y,.001),u.z=Math.max(u.z,.001),p=f.multiplyByScale(p,u,p),this._primitive.modelMatrix=p,this._outlinePrimitive.modelMatrix=p)},L}.apply(e,r))||(t.exports=n)},2025:function(t,e,i){var r,n;r=[i(16),i(6),i(11),i(21),i(129),i(0),i(4),i(1961),i(117),i(263),i(7),i(41),i(17),i(2026),i(2027),i(62),i(709),i(1962),i(130),i(332),i(1964),i(1963),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y,g,v,_,w,b,P){"use strict";var A=new e,O=new r;function E(t){this.id=t,this.vertexFormat=void 0,this.plane=void 0,this.dimensions=void 0}function C(t,e){b.call(this,{entity:t,scene:e,geometryOptions:new E(t),geometryPropertyName:"plane",observedPropertyNames:["availability","position","orientation","plane"]}),this._onEntityPropertyChanged(t,"plane",t.plane,void 0)}function x(t,e,i){w.call(this,t,e,i)}o(Object.create)&&(C.prototype=Object.create(b.prototype),C.prototype.constructor=C),C.prototype.createFillGeometryInstance=function(t){var e,i,a=this._entity,h=a.isAvailable(t),u=new y(h&&a.isShowing&&this._showProperty.getValue(t)&&this._fillProperty.getValue(t)),p=this._distanceDisplayConditionProperty.getValue(t),d=s.fromDistanceDisplayCondition(p);this._materialProperty instanceof _?(o(this._materialProperty.color)&&(this._materialProperty.color.isConstant||h)&&(i=this._materialProperty.color.getValue(t,O)),o(i)||(i=r.WHITE),e={show:u,distanceDisplayCondition:d,color:n.fromColor(i)}):e={show:u,distanceDisplayCondition:d};var m=a.plane,f=this._options,g=a.computeModelMatrix(t),v=P.getValueOrDefault(m.plane,t,f.plane),w=P.getValueOrUndefined(m.dimensions,t,f.dimensions);return f.plane=v,f.dimensions=w,g=L(v,w,g,this._scene.mapProjection.ellipsoid,g),new l({id:a,geometry:new c(this._options),modelMatrix:g,attributes:e})},C.prototype.createOutlineGeometryInstance=function(t){var e=this._entity,i=e.isAvailable(t),o=P.getValueOrDefault(this._outlineColorProperty,t,r.BLACK,O),a=this._distanceDisplayConditionProperty.getValue(t),h=e.plane,u=this._options,p=e.computeModelMatrix(t),d=P.getValueOrDefault(h.plane,t,u.plane),c=P.getValueOrUndefined(h.dimensions,t,u.dimensions);return u.plane=d,u.dimensions=c,p=L(d,c,p,this._scene.mapProjection.ellipsoid,p),new l({id:e,geometry:new m,modelMatrix:p,attributes:{show:new y(i&&e.isShowing&&this._showProperty.getValue(t)&&this._showOutlineProperty.getValue(t)),color:n.fromColor(o),distanceDisplayCondition:s.fromDistanceDisplayCondition(a)}})},C.prototype._isHidden=function(t,e){return!o(e.plane)||!o(e.dimensions)||!o(t.position)||b.prototype._isHidden.call(this,t,e)},C.prototype._getIsClosed=function(t){return!1},C.prototype._isDynamic=function(t,e){return!(t.position.isConstant&&P.isConstant(t.orientation)&&e.plane.isConstant&&e.dimensions.isConstant&&P.isConstant(e.outlineWidth))},C.prototype._setStaticOptions=function(t,e){var i=this._materialProperty instanceof _,r=this._options;r.vertexFormat=i?v.VERTEX_FORMAT:g.MaterialSupport.TEXTURED.vertexFormat,r.plane=e.plane.getValue(h.MINIMUM_VALUE,r.plane),r.dimensions=e.dimensions.getValue(h.MINIMUM_VALUE,r.dimensions)},C.DynamicGeometryUpdater=x,o(Object.create)&&(x.prototype=Object.create(w.prototype),x.prototype.constructor=x),x.prototype._isHidden=function(t,e,i){var r=this._options,n=P.getValueOrUndefined(t.position,i,A);return!o(n)||!o(r.plane)||!o(r.dimensions)||w.prototype._isHidden.call(this,t,e,i)},x.prototype._setOptions=function(t,e,i){var r=this._options;r.plane=P.getValueOrDefault(e.plane,i,r.plane),r.dimensions=P.getValueOrUndefined(e.dimensions,i,r.dimensions)};var D=new e,T=new e,I=new e,M=new e,V=new e,N=new f,S=new p;function L(i,r,n,o,a){var s=i.normal,l=i.distance,h=e.multiplyByScalar(s,-l,I);h=d.multiplyByPoint(n,h,h);var c=d.multiplyByPointAsVector(n,s,M);e.normalize(c,c);var m=o.geodeticSurfaceNormal(h,T);u.equalsEpsilon(Math.abs(e.dot(m,c)),1,u.EPSILON8)&&(m=e.clone(e.UNIT_Z,m));var y=e.cross(m,c,D);m=e.cross(c,y,m),e.normalize(y,y),e.normalize(m,m);var g=S;p.setColumn(g,0,y,g),p.setColumn(g,1,m,g),p.setColumn(g,2,c,g);var v=f.fromRotationMatrix(g,N),_=t.clone(r,V);return _.z=1,d.fromTranslationQuaternionRotationScale(h,v,_,a)}return C.createPrimitiveMatrix=L,C}.apply(e,r))||(t.exports=n)},2026:function(t,e,i){var r,n;r=[i(31),i(6),i(11),i(29),i(2),i(0),i(79),i(85),i(118),i(59),i(119)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u){"use strict";function p(t){t=n(t,n.EMPTY_OBJECT);var e=n(t.vertexFormat,u.DEFAULT);this._vertexFormat=e,this._workerName="createPlaneGeometry"}p.packedLength=u.packedLength,p.pack=function(t,e,i){return i=n(i,0),u.pack(t._vertexFormat,e,i),e};var d=new u,c={vertexFormat:d};p.unpack=function(t,e,i){e=n(e,0);var r=u.unpack(t,e,d);return o(i)?(i._vertexFormat=u.clone(r,i._vertexFormat),i):new p(c)};var m=new e(-.5,-.5,0),f=new e(.5,.5,0);return p.createGeometry=function(i){var n,o,u=i._vertexFormat,p=new l;if(u.position){if((o=new Float64Array(12))[0]=m.x,o[1]=m.y,o[2]=0,o[3]=f.x,o[4]=m.y,o[5]=0,o[6]=f.x,o[7]=f.y,o[8]=0,o[9]=m.x,o[10]=f.y,o[11]=0,p.position=new s({componentDatatype:r.DOUBLE,componentsPerAttribute:3,values:o}),u.normal){var d=new Float32Array(12);d[0]=0,d[1]=0,d[2]=1,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=1,d[9]=0,d[10]=0,d[11]=1,p.normal=new s({componentDatatype:r.FLOAT,componentsPerAttribute:3,values:d})}if(u.st){var c=new Float32Array(8);c[0]=0,c[1]=0,c[2]=1,c[3]=0,c[4]=1,c[5]=1,c[6]=0,c[7]=1,p.st=new s({componentDatatype:r.FLOAT,componentsPerAttribute:2,values:c})}if(u.tangent){var y=new Float32Array(12);y[0]=1,y[1]=0,y[2]=0,y[3]=1,y[4]=0,y[5]=0,y[6]=1,y[7]=0,y[8]=0,y[9]=1,y[10]=0,y[11]=0,p.tangent=new s({componentDatatype:r.FLOAT,componentsPerAttribute:3,values:y})}if(u.bitangent){var g=new Float32Array(12);g[0]=0,g[1]=1,g[2]=0,g[3]=0,g[4]=1,g[5]=0,g[6]=0,g[7]=1,g[8]=0,g[9]=0,g[10]=1,g[11]=0,p.bitangent=new s({componentDatatype:r.FLOAT,componentsPerAttribute:3,values:g})}(n=new Uint16Array(6))[0]=0,n[1]=1,n[2]=2,n[3]=0,n[4]=2,n[5]=3}return new a({attributes:p,indices:n,primitiveType:h.TRIANGLES,boundingSphere:new t(e.ZERO,Math.sqrt(2))})},p}.apply(e,r))||(t.exports=n)},2027:function(t,e,i){var r,n;r=[i(31),i(6),i(11),i(29),i(0),i(79),i(85),i(118),i(59)],void 0===(n=function(t,e,i,r,n,o,a,s,l){"use strict";function h(){this._workerName="createPlaneOutlineGeometry"}h.packedLength=0,h.pack=function(t,e){return e},h.unpack=function(t,e,i){return n(i)?i:new h};var u=new e(-.5,-.5,0),p=new e(.5,.5,0);return h.createGeometry=function(){var i=new s,n=new Uint16Array(8),h=new Float64Array(12);return h[0]=u.x,h[1]=u.y,h[2]=u.z,h[3]=p.x,h[4]=u.y,h[5]=u.z,h[6]=p.x,h[7]=p.y,h[8]=u.z,h[9]=u.x,h[10]=p.y,h[11]=u.z,i.position=new a({componentDatatype:r.DOUBLE,componentsPerAttribute:3,values:h}),n[0]=0,n[1]=1,n[2]=1,n[3]=2,n[4]=2,n[5]=3,n[6]=3,n[7]=0,new o({attributes:i,indices:n,primitiveType:l.LINES,boundingSphere:new t(e.ZERO,Math.sqrt(2))})},h}.apply(e,r))||(t.exports=n)},2028:function(t,e,i){var r,n;r=[i(229),i(264),i(16),i(6),i(11),i(21),i(129),i(2029),i(2030),i(0),i(4),i(1961),i(467),i(117),i(263),i(710),i(466),i(2031),i(2032),i(15),i(709),i(169),i(1962),i(130),i(332),i(1964),i(1963),i(1970),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y,g,v,_,w,b,P,A,O,E,C,x,D){"use strict";var T=new o,I=r.ZERO,M=new r,V=new _,N=[],S=new i;function L(t){this.id=t,this.vertexFormat=void 0,this.polygonHierarchy=void 0,this.perPositionHeight=void 0,this.closeTop=void 0,this.closeBottom=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.offsetAttribute=void 0,this.arcType=void 0}function F(t,e){x.call(this,{entity:t,scene:e,geometryOptions:new L(t),geometryPropertyName:"polygon",observedPropertyNames:["availability","polygon"]}),this._onEntityPropertyChanged(t,"polygon",t.polygon,void 0)}function U(t,e,i){E.call(this,t,e,i)}return h(Object.create)&&(F.prototype=Object.create(x.prototype),F.prototype.constructor=F),F.prototype.createFillGeometryInstance=function(t){var e,i,r=this._entity,n=r.isAvailable(t),l=this._options,u={show:new w(n&&r.isShowing&&this._showProperty.getValue(t)&&this._fillProperty.getValue(t)),distanceDisplayCondition:p.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(t)),offset:void 0,color:void 0};this._materialProperty instanceof O&&(h(this._materialProperty.color)&&(this._materialProperty.color.isConstant||n)&&(e=this._materialProperty.color.getValue(t,T)),h(e)||(e=o.WHITE),u.color=a.fromColor(e));return h(l.offsetAttribute)&&(u.offset=f.fromCartesian3(D.getValueOrDefault(this._terrainOffsetProperty,t,I,M))),i=l.perPositionHeight&&!h(l.extrudedHeight)?new s(l):new g(l),new c({id:r,geometry:i,attributes:u})},F.prototype.createOutlineGeometryInstance=function(t){var e,i=this._entity,r=i.isAvailable(t),n=this._options,s=D.getValueOrDefault(this._outlineColorProperty,t,o.BLACK,T),u=this._distanceDisplayConditionProperty.getValue(t),d={show:new w(r&&i.isShowing&&this._showProperty.getValue(t)&&this._showOutlineProperty.getValue(t)),color:a.fromColor(s),distanceDisplayCondition:p.fromDistanceDisplayCondition(u),offset:void 0};return h(n.offsetAttribute)&&(d.offset=f.fromCartesian3(D.getValueOrDefault(this._terrainOffsetProperty,t,I,M))),e=n.perPositionHeight&&!h(n.extrudedHeight)?new l(n):new v(n),new c({id:i,geometry:e,attributes:d})},F.prototype._computeCenter=function(t,e){var r=D.getValueOrUndefined(this._entity.polygon.hierarchy,t);if(h(r)){var n=r.positions;if(0!==n.length){for(var o=this._scene.mapProjection.ellipsoid,a=d.fromPoints(n,o),s=a.projectPointsOntoPlane(n,N),l=s.length,u=0,p=l-1,c=new i,m=0;m<l;p=m++){var f=s[m],y=s[p],g=f.x*y.y-y.x*f.y,v=i.add(f,y,S);v=i.multiplyByScalar(v,g,v),c=i.add(c,v,c),u+=g}var _=1/(3*u);return c=i.multiplyByScalar(c,_,c),a.projectPointOntoEllipsoid(c,e)}}},F.prototype._isHidden=function(t,e){return!h(e.hierarchy)||C.prototype._isHidden.call(this,t,e)},F.prototype._isOnTerrain=function(t,e){var i=x.prototype._isOnTerrain.call(this,t,e),r=e.perPositionHeight,n=h(r)&&(!r.isConstant||r.getValue(m.MINIMUM_VALUE));return i&&!n},F.prototype._isDynamic=function(t,e){return!e.hierarchy.isConstant||!D.isConstant(e.height)||!D.isConstant(e.extrudedHeight)||!D.isConstant(e.granularity)||!D.isConstant(e.stRotation)||!D.isConstant(e.outlineWidth)||!D.isConstant(e.perPositionHeight)||!D.isConstant(e.closeTop)||!D.isConstant(e.closeBottom)||!D.isConstant(e.zIndex)||!D.isConstant(e.arcType)||this._onTerrain&&!D.isConstant(this._materialProperty)},F.prototype._setStaticOptions=function(i,r){var n=this._materialProperty instanceof O,o=this._options;o.vertexFormat=n?A.VERTEX_FORMAT:P.MaterialSupport.TEXTURED.vertexFormat;var a,s=r.hierarchy.getValue(m.MINIMUM_VALUE),l=D.getValueOrUndefined(r.height,m.MINIMUM_VALUE),u=D.getValueOrDefault(r.heightReference,m.MINIMUM_VALUE,b.NONE),p=D.getValueOrUndefined(r.extrudedHeight,m.MINIMUM_VALUE),d=D.getValueOrDefault(r.extrudedHeightReference,m.MINIMUM_VALUE,b.NONE),c=D.getValueOrDefault(r.perPositionHeight,m.MINIMUM_VALUE,!1);l=x.getGeometryHeight(l,u),c?(h(l)&&(l=void 0,y("Entity polygons cannot have both height and perPositionHeight.  height will be ignored")),u!==b.NONE&&c&&(l=void 0,y("heightReference is not supported for entity polygons with perPositionHeight. heightReference will be ignored"))):(h(p)&&!h(l)&&(l=0),a=x.computeGeometryOffsetAttribute(l,u,p,d)),o.polygonHierarchy=s,o.granularity=D.getValueOrUndefined(r.granularity,m.MINIMUM_VALUE),o.stRotation=D.getValueOrUndefined(r.stRotation,m.MINIMUM_VALUE),o.perPositionHeight=c,o.closeTop=D.getValueOrDefault(r.closeTop,m.MINIMUM_VALUE,!0),o.closeBottom=D.getValueOrDefault(r.closeBottom,m.MINIMUM_VALUE,!0),o.offsetAttribute=a,o.height=l,o.arcType=D.getValueOrDefault(r.arcType,m.MINIMUM_VALUE,e.GEODESIC),(p=x.getGeometryExtrudedHeight(p,d))===x.CLAMP_TO_GROUND&&(p=t.getMinimumMaximumHeights(g.computeRectangle(o,V)).minimumTerrainHeight),o.extrudedHeight=p},F.prototype._getIsClosed=function(t){var e=t.height,i=t.extrudedHeight,r=h(i)&&i!==e;return!t.perPositionHeight&&(!r&&0===e||r&&t.closeTop&&t.closeBottom)},F.DynamicGeometryUpdater=U,h(Object.create)&&(U.prototype=Object.create(E.prototype),U.prototype.constructor=U),U.prototype._isHidden=function(t,e,i){return!h(this._options.polygonHierarchy)||E.prototype._isHidden.call(this,t,e,i)},U.prototype._setOptions=function(i,r,n){var o=this._options;o.polygonHierarchy=D.getValueOrUndefined(r.hierarchy,n);var a,s=D.getValueOrUndefined(r.height,n),l=D.getValueOrDefault(r.heightReference,n,b.NONE),u=D.getValueOrDefault(r.extrudedHeightReference,n,b.NONE),p=D.getValueOrUndefined(r.extrudedHeight,n),d=D.getValueOrUndefined(r.perPositionHeight,n);s=x.getGeometryHeight(s,u),d?(h(s)&&(s=void 0,y("Entity polygons cannot have both height and perPositionHeight.  height will be ignored")),l!==b.NONE&&d&&(s=void 0,y("heightReference is not supported for entity polygons with perPositionHeight. heightReference will be ignored"))):(h(p)&&!h(s)&&(s=0),a=x.computeGeometryOffsetAttribute(s,l,p,u)),o.granularity=D.getValueOrUndefined(r.granularity,n),o.stRotation=D.getValueOrUndefined(r.stRotation,n),o.perPositionHeight=D.getValueOrUndefined(r.perPositionHeight,n),o.closeTop=D.getValueOrDefault(r.closeTop,n,!0),o.closeBottom=D.getValueOrDefault(r.closeBottom,n,!0),o.offsetAttribute=a,o.height=s,o.arcType=D.getValueOrDefault(r.arcType,n,e.GEODESIC),(p=x.getGeometryExtrudedHeight(p,u))===x.CLAMP_TO_GROUND&&(p=t.getMinimumMaximumHeights(g.computeRectangle(o,V)).minimumTerrainHeight),o.extrudedHeight=p},F}.apply(e,r))||(t.exports=n)},2029:function(t,e,i){var r,n;r=[i(334),i(68),i(31),i(16),i(6),i(11),i(29),i(1982),i(2),i(0),i(18),i(79),i(85),i(118),i(117),i(170),i(61),i(7),i(41),i(713),i(333),i(59),i(62),i(119)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y,g,v,_,w,b,P,A){"use strict";var O=new n,E=new e,C=new r,x=new r,D=new n,T=new n,I=new n,M=new n,V=new n,N=new n,S=new P,L=new v,F=new v,U=new n;function R(t,e,i,o,s,l,h,u){var m=t.positions,f=w.triangulate(t.positions2D,t.holes);f.length<3&&(f=[0,1,2]);var _=y.createTypedArray(m.length,f.length);_.set(f);var A=L;if(0!==o){var E=P.fromAxisAngle(l,o,S);if(A=v.fromQuaternion(E,A),e.tangent||e.bitangent){E=P.fromAxisAngle(l,-o,S);var D=v.fromQuaternion(E,F);h=n.normalize(v.multiplyByVector(D,h,h),h),e.bitangent&&(u=n.normalize(n.cross(l,h,u),u))}}else A=v.clone(v.IDENTITY,A);var T=x;e.st&&(T.x=i.x,T.y=i.y);for(var I=m.length,M=3*I,V=new Float64Array(M),N=e.normal?new Float32Array(M):void 0,U=e.tangent?new Float32Array(M):void 0,R=e.bitangent?new Float32Array(M):void 0,H=e.st?new Float32Array(2*I):void 0,B=0,G=0,k=0,z=0,j=0,W=0;W<I;W++){var Y=m[W];if(V[B++]=Y.x,V[B++]=Y.y,V[B++]=Y.z,e.st){var q=s(v.multiplyByVector(A,Y,O),C);r.subtract(q,T,q);var X=g.clamp(q.x/i.width,0,1),Z=g.clamp(q.y/i.height,0,1);H[j++]=X,H[j++]=Z}e.normal&&(N[G++]=l.x,N[G++]=l.y,N[G++]=l.z),e.tangent&&(U[z++]=h.x,U[z++]=h.y,U[z++]=h.z),e.bitangent&&(R[k++]=u.x,R[k++]=u.y,R[k++]=u.z)}var J=new c;return e.position&&(J.position=new d({componentDatatype:a.DOUBLE,componentsPerAttribute:3,values:V})),e.normal&&(J.normal=new d({componentDatatype:a.FLOAT,componentsPerAttribute:3,values:N})),e.tangent&&(J.tangent=new d({componentDatatype:a.FLOAT,componentsPerAttribute:3,values:U})),e.bitangent&&(J.bitangent=new d({componentDatatype:a.FLOAT,componentsPerAttribute:3,values:R})),e.st&&(J.st=new d({componentDatatype:a.FLOAT,componentsPerAttribute:2,values:H})),new p({attributes:J,indices:_,primitiveType:b.TRIANGLES})}function H(t){var e=(t=l(t,l.EMPTY_OBJECT)).polygonHierarchy,i=l(t.vertexFormat,A.DEFAULT);this._vertexFormat=A.clone(i),this._polygonHierarchy=e,this._stRotation=l(t.stRotation,0),this._ellipsoid=u.clone(l(t.ellipsoid,u.WGS84)),this._workerName="createCoplanarPolygonGeometry",this.packedLength=_.computeHierarchyPackedLength(e)+A.packedLength+u.packedLength+2}H.fromPositions=function(t){return new H({polygonHierarchy:{positions:(t=l(t,l.EMPTY_OBJECT)).positions},vertexFormat:t.vertexFormat,stRotation:t.stRotation,ellipsoid:t.ellipsoid})},H.pack=function(t,e,i){return i=l(i,0),i=_.packPolygonHierarchy(t._polygonHierarchy,e,i),u.pack(t._ellipsoid,e,i),i+=u.packedLength,A.pack(t._vertexFormat,e,i),i+=A.packedLength,e[i++]=t._stRotation,e[i]=t.packedLength,e};var B=u.clone(u.UNIT_SPHERE),G=new A,k={polygonHierarchy:{}};return H.unpack=function(t,e,i){e=l(e,0);var r=_.unpackPolygonHierarchy(t,e);e=r.startingIndex,delete r.startingIndex;var n=u.unpack(t,e,B);e+=u.packedLength;var o=A.unpack(t,e,G);e+=A.packedLength;var a=t[e++],s=t[e];return h(i)||(i=new H(k)),i._polygonHierarchy=r,i._ellipsoid=u.clone(n,i._ellipsoid),i._vertexFormat=A.clone(o,i._vertexFormat),i._stRotation=a,i.packedLength=s,i},H.createGeometry=function(e){var r=e._vertexFormat,o=e._polygonHierarchy,a=e._stRotation,l=o.positions;if(!((l=t(l,n.equalsEpsilon,!0)).length<3)){var h=D,u=T,d=I,c=V,v=N;if(s.computeProjectTo2DArguments(l,M,c,v)){if(h=n.cross(c,v,h),h=n.normalize(h,h),!n.equalsEpsilon(M,n.ZERO,g.EPSILON6)){var w=e._ellipsoid.geodeticSurfaceNormal(M,U);n.dot(h,w)<0&&(h=n.negate(h,h),c=n.negate(c,c))}var b=s.createProjectPointsTo2DFunction(M,c,v),P=s.createProjectPointTo2DFunction(M,c,v);r.tangent&&(u=n.clone(c,u)),r.bitangent&&(d=n.clone(v,d));var A=_.polygonsFromHierarchy(o,b,!1),O=A.hierarchy,C=A.polygons;if(0!==O.length){l=O[0].outerRing;for(var x=i.fromPoints(l),S=_.computeBoundingRectangle(h,P,l,a,E),L=[],F=0;F<C.length;F++){var H=new m({geometry:R(C[F],r,S,a,P,h,u,d)});L.push(H)}var B=f.combineInstances(L)[0];B.attributes.position.values=new Float64Array(B.attributes.position.values),B.indices=y.createTypedArray(B.attributes.position.values.length/3,B.indices);var G=B.attributes;return r.position||delete G.position,new p({attributes:G,indices:B.indices,primitiveType:B.primitiveType,boundingSphere:x})}}}},H}.apply(e,r))||(t.exports=n)},2030:function(t,e,i){var r,n;r=[i(334),i(31),i(6),i(11),i(29),i(1982),i(2),i(0),i(79),i(85),i(118),i(117),i(170),i(61),i(713),i(333),i(59)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y){"use strict";function g(t){for(var e=t.length,i=new Float64Array(3*e),r=c.createTypedArray(e,2*e),o=0,a=0,s=0;s<e;s++){var p=t[s];i[o++]=p.x,i[o++]=p.y,i[o++]=p.z,r[a++]=s,r[a++]=(s+1)%e}var d=new u({position:new h({componentDatatype:n.DOUBLE,componentsPerAttribute:3,values:i})});return new l({attributes:d,indices:r,primitiveType:y.LINES})}function v(t){var e=(t=a(t,a.EMPTY_OBJECT)).polygonHierarchy;this._polygonHierarchy=e,this._workerName="createCoplanarPolygonOutlineGeometry",this.packedLength=m.computeHierarchyPackedLength(e)+1}v.fromPositions=function(t){return new v({polygonHierarchy:{positions:(t=a(t,a.EMPTY_OBJECT)).positions}})},v.pack=function(t,e,i){return i=a(i,0),e[i=m.packPolygonHierarchy(t._polygonHierarchy,e,i)]=t.packedLength,e};var _={polygonHierarchy:{}};return v.unpack=function(t,e,i){e=a(e,0);var r=m.unpackPolygonHierarchy(t,e);e=r.startingIndex,delete r.startingIndex;var n=t[e];return s(i)||(i=new v(_)),i._polygonHierarchy=r,i.packedLength=n,i},v.createGeometry=function(r){var n=r._polygonHierarchy,a=n.positions;if(!((a=t(a,i.equalsEpsilon,!0)).length<3)&&o.validOutline(a)){var s=m.polygonOutlinesFromHierarchy(n,!1);if(0!==s.length){for(var h=[],u=0;u<s.length;u++){var c=new p({geometry:g(s[u])});h.push(c)}var f=d.combineInstances(h)[0],y=e.fromPoints(n.positions);return new l({attributes:f.attributes,indices:f.indices,primitiveType:f.primitiveType,boundingSphere:y})}}},v}.apply(e,r))||(t.exports=n)},2031:function(t,e,i){var r,n;r=[i(264),i(142),i(68),i(31),i(16),i(6),i(22),i(11),i(29),i(2),i(0),i(3),i(4),i(18),i(234),i(270),i(467),i(79),i(85),i(117),i(152),i(170),i(61),i(7),i(155),i(41),i(713),i(333),i(62),i(15),i(119),i(193)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y,g,v,_,w,b,P,A,O,E,C,x,D,T,I,M){"use strict";var V=new a,N=new a;function S(t,e,i,r){var n=r.cartesianToCartographic(t,V).height,o=r.cartesianToCartographic(e,N);o.height=n,r.cartographicToCartesian(o,e);var a=r.cartesianToCartographic(i,N);a.height=n-100,r.cartographicToCartesian(a,i)}var L=new i,F=new o,U=new o,R=new o,H=new o,B=new o,G=new o,k=new o,z=new o,j=new o,W=new n,Y=new n,q=new o,X=new D,Z=new E,J=new E;function K(t){var i=t.vertexFormat,r=t.geometry,a=t.shadowVolume,s=r.attributes.position.values,h=s.length,p=t.wall,d=t.top||p,c=t.bottom||p;if(i.st||i.normal||i.tangent||i.bitangent||a){var m=t.boundingRectangle,f=t.tangentPlane,y=t.ellipsoid,g=t.stRotation,_=t.perPositionHeight,b=W;b.x=m.x,b.y=m.y;var P,O=i.st?new Float32Array(h/3*2):void 0;i.normal&&(P=_&&d&&!p?r.attributes.normal.values:new Float32Array(h));var C=i.tangent?new Float32Array(h):void 0,x=i.bitangent?new Float32Array(h):void 0,T=a?new Float32Array(h):void 0,I=0,M=0,V=U,N=R,L=H,K=!0,Q=Z,$=J;if(0!==g){var tt=D.fromAxisAngle(f._plane.normal,g,X);Q=E.fromQuaternion(tt,Q),tt=D.fromAxisAngle(f._plane.normal,-g,X),$=E.fromQuaternion(tt,$)}else Q=E.clone(E.IDENTITY,Q),$=E.clone(E.IDENTITY,$);var et=0,it=0;d&&c&&(et=h/2,it=h/3,h/=2);for(var rt=0;rt<h;rt+=3){var nt=o.fromArray(s,rt,q);if(i.st){var ot=E.multiplyByVector(Q,nt,F);ot=y.scaleToGeodeticSurface(ot,ot);var at=f.projectPointOntoPlane(ot,Y);n.subtract(at,b,at);var st=A.clamp(at.x/m.width,0,1),lt=A.clamp(at.y/m.height,0,1);c&&(O[I+it]=st,O[I+1+it]=lt),d&&(O[I]=st,O[I+1]=lt),I+=2}if(i.normal||i.tangent||i.bitangent||a){var ht=M+1,ut=M+2;if(p){if(rt+3<h){var pt=o.fromArray(s,rt+3,B);if(K){var dt=o.fromArray(s,rt+h,G);_&&S(nt,pt,dt,y),o.subtract(pt,nt,pt),o.subtract(dt,nt,dt),V=o.normalize(o.cross(dt,pt,V),V),K=!1}o.equalsEpsilon(pt,nt,A.EPSILON10)&&(K=!0)}(i.tangent||i.bitangent)&&(L=y.geodeticSurfaceNormal(nt,L),i.tangent&&(N=o.normalize(o.cross(L,V,N),N)))}else V=y.geodeticSurfaceNormal(nt,V),(i.tangent||i.bitangent)&&(_&&(k=o.fromArray(P,M,k),z=o.cross(o.UNIT_Z,k,z),z=o.normalize(E.multiplyByVector($,z,z),z),i.bitangent&&(j=o.normalize(o.cross(k,z,j),j))),N=o.cross(o.UNIT_Z,V,N),N=o.normalize(E.multiplyByVector($,N,N),N),i.bitangent&&(L=o.normalize(o.cross(V,N,L),L)));i.normal&&(t.wall?(P[M+et]=V.x,P[ht+et]=V.y,P[ut+et]=V.z):c&&(P[M+et]=-V.x,P[ht+et]=-V.y,P[ut+et]=-V.z),(d&&!_||p)&&(P[M]=V.x,P[ht]=V.y,P[ut]=V.z)),a&&(p&&(V=y.geodeticSurfaceNormal(nt,V)),T[M+et]=-V.x,T[ht+et]=-V.y,T[ut+et]=-V.z),i.tangent&&(t.wall?(C[M+et]=N.x,C[ht+et]=N.y,C[ut+et]=N.z):c&&(C[M+et]=-N.x,C[ht+et]=-N.y,C[ut+et]=-N.z),d&&(_?(C[M]=z.x,C[ht]=z.y,C[ut]=z.z):(C[M]=N.x,C[ht]=N.y,C[ut]=N.z))),i.bitangent&&(c&&(x[M+et]=L.x,x[ht+et]=L.y,x[ut+et]=L.z),d&&(_?(x[M]=j.x,x[ht]=j.y,x[ut]=j.z):(x[M]=L.x,x[ht]=L.y,x[ut]=L.z))),M+=3}}i.st&&(r.attributes.st=new v({componentDatatype:l.FLOAT,componentsPerAttribute:2,values:O})),i.normal&&(r.attributes.normal=new v({componentDatatype:l.FLOAT,componentsPerAttribute:3,values:P})),i.tangent&&(r.attributes.tangent=new v({componentDatatype:l.FLOAT,componentsPerAttribute:3,values:C})),i.bitangent&&(r.attributes.bitangent=new v({componentDatatype:l.FLOAT,componentsPerAttribute:3,values:x})),a&&(r.attributes.extrudeDirection=new v({componentDatatype:l.FLOAT,componentsPerAttribute:3,values:T}))}if(t.extrude&&u(t.offsetAttribute)){var ct=s.length/3,mt=new Uint8Array(ct);if(t.offsetAttribute===w.TOP)d&&c||p?mt=e(mt,1,0,ct/2):d&&(mt=e(mt,1));else{var ft=t.offsetAttribute===w.NONE?0:1;mt=e(mt,ft)}r.attributes.applyOffset=new v({componentDatatype:l.UNSIGNED_BYTE,componentsPerAttribute:1,values:mt})}return r}var Q=new a,$=new a,tt={westOverIDL:0,eastOverIDL:0},et=new m;function it(e,i,r,n,o){if(o=h(o,new T),!u(e)||e.length<3)return o.west=0,o.north=0,o.south=0,o.east=0,o;if(r===t.RHUMB)return T.fromCartesianArray(e,i,o);et.ellipsoid.equals(i)||(et=new m(void 0,void 0,i)),o.west=Number.POSITIVE_INFINITY,o.east=Number.NEGATIVE_INFINITY,o.south=Number.POSITIVE_INFINITY,o.north=Number.NEGATIVE_INFINITY,tt.westOverIDL=Number.POSITIVE_INFINITY,tt.eastOverIDL=Number.NEGATIVE_INFINITY;for(var a,s=1/A.chordLength(n,i.maximumRadius),l=e.length,p=i.cartesianToCartographic(e[0],$),d=Q,c=1;c<l;c++)a=d,d=p,p=i.cartesianToCartographic(e[c],a),et.setEndPoints(d,p),nt(et,s,o,tt);return a=d,d=p,p=i.cartesianToCartographic(e[0],a),et.setEndPoints(d,p),nt(et,s,o,tt),o.east-o.west>tt.eastOverIDL-tt.westOverIDL&&(o.west=tt.westOverIDL,o.east=tt.eastOverIDL,o.east>A.PI&&(o.east=o.east-A.TWO_PI),o.west>A.PI&&(o.west=o.west-A.TWO_PI)),o}var rt=new a;function nt(t,e,i,r){for(var n=t.surfaceDistance,o=Math.ceil(n*e),a=o>0?n/(o-1):Number.POSITIVE_INFINITY,s=0,l=0;l<o;l++){var h=t.interpolateUsingSurfaceDistance(s,rt);s+=a;var u=h.longitude,p=h.latitude;i.west=Math.min(i.west,u),i.east=Math.max(i.east,u),i.south=Math.min(i.south,p),i.north=Math.max(i.north,p);var d=u>=0?u:u+A.TWO_PI;r.westOverIDL=Math.min(r.westOverIDL,d),r.eastOverIDL=Math.max(r.eastOverIDL,d)}}var ot=[];function at(t,e,i,r,n,o,a,s,l){var h,u={walls:[]};if(o||a){var p,d,c=C.createGeometryFromPositions(t,e,i,n,s,l),m=c.attributes.position.values,f=c.indices;if(o&&a){var g=m.concat(m);p=g.length/3,(d=P.createTypedArray(p,2*f.length)).set(f);var v=f.length,w=p/2;for(h=0;h<v;h+=3){var b=d[h]+w,A=d[h+1]+w,O=d[h+2]+w;d[h+v]=O,d[h+1+v]=A,d[h+2+v]=b}if(c.attributes.position.values=g,n&&s.normal){var E=c.attributes.normal.values;c.attributes.normal.values=new Float32Array(g.length),c.attributes.normal.values.set(E)}c.indices=d}else if(a){for(p=m.length/3,d=P.createTypedArray(p,f.length),h=0;h<f.length;h+=3)d[h]=f[h+2],d[h+1]=f[h+1],d[h+2]=f[h];c.indices=d}u.topAndBottom=new _({geometry:c})}var D=r.outerRing,T=y.fromPoints(D,t),I=T.projectPointsOntoPlane(D,ot),V=x.computeWindingOrder2D(I);V===M.CLOCKWISE&&(D=D.slice().reverse());var N=C.computeWallGeometry(D,t,i,n,l);u.walls.push(new _({geometry:N}));var S=r.holes;for(h=0;h<S.length;h++){var L=S[h];I=(T=y.fromPoints(L,t)).projectPointsOntoPlane(L,ot),(V=x.computeWindingOrder2D(I))===M.COUNTER_CLOCKWISE&&(L=L.slice().reverse()),N=C.computeWallGeometry(L,t,i,n,l),u.walls.push(new _({geometry:N}))}return u}function st(e){var i=e.polygonHierarchy,r=h(e.vertexFormat,I.DEFAULT),n=h(e.ellipsoid,c.WGS84),o=h(e.granularity,A.RADIANS_PER_DEGREE),a=h(e.stRotation,0),s=h(e.perPositionHeight,!1),l=s&&u(e.extrudedHeight),p=h(e.height,0),d=h(e.extrudedHeight,p);if(!l){var m=Math.max(p,d);d=Math.min(p,d),p=m}this._vertexFormat=I.clone(r),this._ellipsoid=c.clone(n),this._granularity=o,this._stRotation=a,this._height=p,this._extrudedHeight=d,this._closeTop=h(e.closeTop,!0),this._closeBottom=h(e.closeBottom,!0),this._polygonHierarchy=i,this._perPositionHeight=s,this._perPositionHeightExtrude=l,this._shadowVolume=h(e.shadowVolume,!1),this._workerName="createPolygonGeometry",this._offsetAttribute=e.offsetAttribute,this._arcType=h(e.arcType,t.GEODESIC),this._rectangle=void 0,this._textureCoordinateRotationPoints=void 0,this.packedLength=C.computeHierarchyPackedLength(i)+c.packedLength+I.packedLength+12}st.fromPositions=function(t){return new st({polygonHierarchy:{positions:(t=h(t,h.EMPTY_OBJECT)).positions},height:t.height,extrudedHeight:t.extrudedHeight,vertexFormat:t.vertexFormat,stRotation:t.stRotation,ellipsoid:t.ellipsoid,granularity:t.granularity,perPositionHeight:t.perPositionHeight,closeTop:t.closeTop,closeBottom:t.closeBottom,offsetAttribute:t.offsetAttribute,arcType:t.arcType})},st.pack=function(t,e,i){return i=h(i,0),i=C.packPolygonHierarchy(t._polygonHierarchy,e,i),c.pack(t._ellipsoid,e,i),i+=c.packedLength,I.pack(t._vertexFormat,e,i),i+=I.packedLength,e[i++]=t._height,e[i++]=t._extrudedHeight,e[i++]=t._granularity,e[i++]=t._stRotation,e[i++]=t._perPositionHeightExtrude?1:0,e[i++]=t._perPositionHeight?1:0,e[i++]=t._closeTop?1:0,e[i++]=t._closeBottom?1:0,e[i++]=t._shadowVolume?1:0,e[i++]=h(t._offsetAttribute,-1),e[i++]=t._arcType,e[i]=t.packedLength,e};var lt=c.clone(c.UNIT_SPHERE),ht=new I,ut={polygonHierarchy:{}};return st.unpack=function(t,e,i){e=h(e,0);var r=C.unpackPolygonHierarchy(t,e);e=r.startingIndex,delete r.startingIndex;var n=c.unpack(t,e,lt);e+=c.packedLength;var o=I.unpack(t,e,ht);e+=I.packedLength;var a=t[e++],s=t[e++],l=t[e++],p=t[e++],d=1===t[e++],m=1===t[e++],f=1===t[e++],y=1===t[e++],g=1===t[e++],v=t[e++],_=t[e++],w=t[e];return u(i)||(i=new st(ut)),i._polygonHierarchy=r,i._ellipsoid=c.clone(n,i._ellipsoid),i._vertexFormat=I.clone(o,i._vertexFormat),i._height=a,i._extrudedHeight=s,i._granularity=l,i._stRotation=p,i._perPositionHeightExtrude=d,i._perPositionHeight=m,i._closeTop=f,i._closeBottom=y,i._shadowVolume=g,i._offsetAttribute=-1===v?void 0:v,i._arcType=_,i.packedLength=w,i},st.computeRectangle=function(e,i){var r=h(e.granularity,A.RADIANS_PER_DEGREE),n=h(e.arcType,t.GEODESIC),o=e.polygonHierarchy,a=h(e.ellipsoid,c.WGS84);return it(o.positions,a,n,r,i)},st.createGeometry=function(t){var i=t._vertexFormat,n=t._ellipsoid,o=t._granularity,a=t._stRotation,s=t._polygonHierarchy,h=t._perPositionHeight,p=t._closeTop,d=t._closeBottom,c=t._arcType,m=s.positions;if(!(m.length<3)){var f=y.fromPoints(m,n),O=C.polygonsFromHierarchy(s,f.projectPointsOntoPlane.bind(f),!h,n),E=O.hierarchy,D=O.polygons;if(0!==E.length){m=E[0].outerRing;var T,I=C.computeBoundingRectangle(f.plane.normal,f.projectPointOntoPlane.bind(f),m,a,L),M=[],V=t._height,N=t._extrudedHeight,S={perPositionHeight:h,vertexFormat:i,geometry:void 0,tangentPlane:f,boundingRectangle:I,ellipsoid:n,stRotation:a,bottom:!1,top:!0,wall:!1,extrude:!1,arcType:c};if(t._perPositionHeightExtrude||!A.equalsEpsilon(V,N,0,A.EPSILON2))for(S.extrude=!0,S.top=p,S.bottom=d,S.shadowVolume=t._shadowVolume,S.offsetAttribute=t._offsetAttribute,T=0;T<D.length;T++){var F,U=at(n,D[T],o,E[T],h,p,d,i,c);p&&d?(F=U.topAndBottom,S.geometry=C.scaleToGeodeticHeightExtruded(F.geometry,V,N,n,h)):p?((F=U.topAndBottom).geometry.attributes.position.values=x.scaleToGeodeticHeight(F.geometry.attributes.position.values,V,n,!h),S.geometry=F.geometry):d&&((F=U.topAndBottom).geometry.attributes.position.values=x.scaleToGeodeticHeight(F.geometry.attributes.position.values,N,n,!0),S.geometry=F.geometry),(p||d)&&(S.wall=!1,F.geometry=K(S),M.push(F));var R=U.walls;S.wall=!0;for(var H=0;H<R.length;H++){var B=R[H];S.geometry=C.scaleToGeodeticHeightExtruded(B.geometry,V,N,n,h),B.geometry=K(S),M.push(B)}}else for(T=0;T<D.length;T++){var G=new _({geometry:C.createGeometryFromPositions(n,D[T],o,h,i,c)});if(G.geometry.attributes.position.values=x.scaleToGeodeticHeight(G.geometry.attributes.position.values,V,n,!h),S.geometry=G.geometry,G.geometry=K(S),u(t._offsetAttribute)){var k=G.geometry.attributes.position.values.length,z=new Uint8Array(k/3),j=t._offsetAttribute===w.NONE?0:1;e(z,j),G.geometry.attributes.applyOffset=new v({componentDatatype:l.UNSIGNED_BYTE,componentsPerAttribute:1,values:z})}M.push(G)}var W=b.combineInstances(M)[0];W.attributes.position.values=new Float64Array(W.attributes.position.values),W.indices=P.createTypedArray(W.attributes.position.values.length/3,W.indices);var Y=W.attributes,q=r.fromVertices(Y.position.values);return i.position||delete Y.position,new g({attributes:Y,indices:W.indices,primitiveType:W.primitiveType,boundingSphere:q,offsetAttribute:t._offsetAttribute})}}},st.createShadowVolume=function(t,e,i){var r=t._granularity,n=t._ellipsoid,o=e(r,n),a=i(r,n);return new st({polygonHierarchy:t._polygonHierarchy,ellipsoid:n,stRotation:t._stRotation,granularity:r,perPositionHeight:!1,extrudedHeight:o,height:a,vertexFormat:I.POSITION_ONLY,shadowVolume:!0,arcType:t._arcType})},p(st.prototype,{rectangle:{get:function(){if(!u(this._rectangle)){var t=this._polygonHierarchy.positions;this._rectangle=it(t,this._ellipsoid,this._arcType,this._granularity)}return this._rectangle}},textureCoordinateRotationPoints:{get:function(){return u(this._textureCoordinateRotationPoints)||(this._textureCoordinateRotationPoints=function(t){var e=-t._stRotation;if(0===e)return[0,0,0,1,1,0];var i=t._ellipsoid,r=t._polygonHierarchy.positions,n=t.rectangle;return g._textureCoordinateRotationPoints(r,e,i,n)}(this)),this._textureCoordinateRotationPoints}}}),st}.apply(e,r))||(t.exports=n)},2032:function(t,e,i){var r,n;r=[i(264),i(142),i(334),i(31),i(6),i(11),i(29),i(2),i(0),i(4),i(18),i(467),i(79),i(85),i(118),i(117),i(152),i(170),i(61),i(7),i(713),i(333),i(59),i(344),i(193)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y,g,v,_,w,b,P,A,O){"use strict";var E=[],C=[];function x(e,i,r,n,o){var s,l,h=p.fromPoints(i,e).projectPointsOntoPlane(i,E);b.computeWindingOrder2D(h)===O.CLOCKWISE&&(h.reverse(),i=i.slice().reverse());var u=i.length,y=0;if(n)for(s=new Float64Array(2*u*3),l=0;l<u;l++){var g=i[l],_=i[(l+1)%u];s[y++]=g.x,s[y++]=g.y,s[y++]=g.z,s[y++]=_.x,s[y++]=_.y,s[y++]=_.z}else{var A=0;if(o===t.GEODESIC)for(l=0;l<u;l++)A+=w.subdivideLineCount(i[l],i[(l+1)%u],r);else if(o===t.RHUMB)for(l=0;l<u;l++)A+=w.subdivideRhumbLineCount(e,i[l],i[(l+1)%u],r);for(s=new Float64Array(3*A),l=0;l<u;l++){var x;o===t.GEODESIC?x=w.subdivideLine(i[l],i[(l+1)%u],r,C):o===t.RHUMB&&(x=w.subdivideRhumbLine(e,i[l],i[(l+1)%u],r,C));for(var D=x.length,T=0;T<D;++T)s[y++]=x[T]}}var I=2*(u=s.length/3),M=v.createTypedArray(u,I);for(y=0,l=0;l<u-1;l++)M[y++]=l,M[y++]=l+1;return M[y++]=u-1,M[y++]=0,new f({geometry:new d({attributes:new m({position:new c({componentDatatype:a.DOUBLE,componentsPerAttribute:3,values:s})}),indices:M,primitiveType:P.LINES})})}function D(e,i,r,n,o){var s,l,h=p.fromPoints(i,e).projectPointsOntoPlane(i,E);b.computeWindingOrder2D(h)===O.CLOCKWISE&&(h.reverse(),i=i.slice().reverse());var u=i.length,y=new Array(u),g=0;if(n)for(s=new Float64Array(2*u*3*2),l=0;l<u;++l){y[l]=g/3;var _=i[l],A=i[(l+1)%u];s[g++]=_.x,s[g++]=_.y,s[g++]=_.z,s[g++]=A.x,s[g++]=A.y,s[g++]=A.z}else{var x=0;if(o===t.GEODESIC)for(l=0;l<u;l++)x+=w.subdivideLineCount(i[l],i[(l+1)%u],r);else if(o===t.RHUMB)for(l=0;l<u;l++)x+=w.subdivideRhumbLineCount(e,i[l],i[(l+1)%u],r);for(s=new Float64Array(3*x*2),l=0;l<u;++l){var D;y[l]=g/3,o===t.GEODESIC?D=w.subdivideLine(i[l],i[(l+1)%u],r,C):o===t.RHUMB&&(D=w.subdivideRhumbLine(e,i[l],i[(l+1)%u],r,C));for(var T=D.length,I=0;I<T;++I)s[g++]=D[I]}}u=s.length/6;var M=y.length,V=2*(2*u+M),N=v.createTypedArray(u+M,V);for(g=0,l=0;l<u;++l)N[g++]=l,N[g++]=(l+1)%u,N[g++]=l+u,N[g++]=(l+1)%u+u;for(l=0;l<M;l++){var S=y[l];N[g++]=S,N[g++]=S+u}return new f({geometry:new d({attributes:new m({position:new c({componentDatatype:a.DOUBLE,componentsPerAttribute:3,values:s})}),indices:N,primitiveType:P.LINES})})}function T(e){var i=e.polygonHierarchy,r=s(e.ellipsoid,u.WGS84),n=s(e.granularity,_.RADIANS_PER_DEGREE),o=s(e.perPositionHeight,!1),a=o&&l(e.extrudedHeight),h=s(e.arcType,t.GEODESIC),p=s(e.height,0),d=s(e.extrudedHeight,p);if(!a){var c=Math.max(p,d);d=Math.min(p,d),p=c}this._ellipsoid=u.clone(r),this._granularity=n,this._height=p,this._extrudedHeight=d,this._arcType=h,this._polygonHierarchy=i,this._perPositionHeight=o,this._perPositionHeightExtrude=a,this._offsetAttribute=e.offsetAttribute,this._workerName="createPolygonOutlineGeometry",this.packedLength=w.computeHierarchyPackedLength(i)+u.packedLength+8}T.pack=function(t,e,i){return i=s(i,0),i=w.packPolygonHierarchy(t._polygonHierarchy,e,i),u.pack(t._ellipsoid,e,i),i+=u.packedLength,e[i++]=t._height,e[i++]=t._extrudedHeight,e[i++]=t._granularity,e[i++]=t._perPositionHeightExtrude?1:0,e[i++]=t._perPositionHeight?1:0,e[i++]=t._arcType,e[i++]=s(t._offsetAttribute,-1),e[i]=t.packedLength,e};var I=u.clone(u.UNIT_SPHERE),M={polygonHierarchy:{}};return T.unpack=function(t,e,i){e=s(e,0);var r=w.unpackPolygonHierarchy(t,e);e=r.startingIndex,delete r.startingIndex;var n=u.unpack(t,e,I);e+=u.packedLength;var o=t[e++],a=t[e++],h=t[e++],p=1===t[e++],d=1===t[e++],c=t[e++],m=t[e++],f=t[e];return l(i)||(i=new T(M)),i._polygonHierarchy=r,i._ellipsoid=u.clone(n,i._ellipsoid),i._height=o,i._extrudedHeight=a,i._granularity=h,i._perPositionHeight=d,i._perPositionHeightExtrude=p,i._arcType=c,i._offsetAttribute=-1===m?void 0:m,i.packedLength=f,i},T.fromPositions=function(t){return new T({polygonHierarchy:{positions:(t=s(t,s.EMPTY_OBJECT)).positions},height:t.height,extrudedHeight:t.extrudedHeight,ellipsoid:t.ellipsoid,granularity:t.granularity,perPositionHeight:t.perPositionHeight,arcType:t.arcType,offsetAttribute:t.offsetAttribute})},T.createGeometry=function(t){var i=t._ellipsoid,n=t._granularity,o=t._polygonHierarchy,s=t._perPositionHeight,h=t._arcType,u=w.polygonOutlinesFromHierarchy(o,!s,i);if(0!==u.length){var p,m,f,v=[],P=_.chordLength(n,i.maximumRadius),A=t._height,O=t._extrudedHeight;if(t._perPositionHeightExtrude||!_.equalsEpsilon(A,O,0,_.EPSILON2))for(f=0;f<u.length;f++){if((p=D(i,u[f],P,s,h)).geometry=w.scaleToGeodeticHeightExtruded(p.geometry,A,O,i,s),l(t._offsetAttribute)){var E=p.geometry.attributes.position.values.length/3,C=new Uint8Array(E);t._offsetAttribute===y.TOP?C=e(C,1,0,E/2):(m=t._offsetAttribute===y.NONE?0:1,C=e(C,m)),p.geometry.attributes.applyOffset=new c({componentDatatype:a.UNSIGNED_BYTE,componentsPerAttribute:1,values:C})}v.push(p)}else for(f=0;f<u.length;f++){if((p=x(i,u[f],P,s,h)).geometry.attributes.position.values=b.scaleToGeodeticHeight(p.geometry.attributes.position.values,A,i,!s),l(t._offsetAttribute)){var T=p.geometry.attributes.position.values.length,I=new Uint8Array(T/3);m=t._offsetAttribute===y.NONE?0:1,e(I,m),p.geometry.attributes.applyOffset=new c({componentDatatype:a.UNSIGNED_BYTE,componentsPerAttribute:1,values:I})}v.push(p)}var M=g.combineInstances(v)[0],V=r.fromVertices(M.attributes.position.values);return new d({attributes:M.attributes,indices:M.indices,primitiveType:M.primitiveType,boundingSphere:V,offsetAttribute:t._offsetAttribute})}},T}.apply(e,r))||(t.exports=n)},2033:function(t,e,i){var r,n;r=[i(11),i(21),i(129),i(0),i(4),i(1961),i(117),i(263),i(2034),i(2035),i(709),i(1962),i(130),i(332),i(1964),i(1963),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y){"use strict";var g=new e;function v(t){this.id=t,this.vertexFormat=void 0,this.polylinePositions=void 0,this.shapePositions=void 0,this.cornerType=void 0,this.granularity=void 0}function _(t,e){f.call(this,{entity:t,scene:e,geometryOptions:new v(t),geometryPropertyName:"polylineVolume",observedPropertyNames:["availability","polylineVolume"]}),this._onEntityPropertyChanged(t,"polylineVolume",t.polylineVolume,void 0)}function w(t,e,i){m.call(this,t,e,i)}return r(Object.create)&&(_.prototype=Object.create(f.prototype),_.prototype.constructor=_),_.prototype.createFillGeometryInstance=function(t){var n,s,h=this._entity,p=h.isAvailable(t),d=new u(p&&h.isShowing&&this._showProperty.getValue(t)&&this._fillProperty.getValue(t)),m=this._distanceDisplayConditionProperty.getValue(t),f=o.fromDistanceDisplayCondition(m);this._materialProperty instanceof c?(r(this._materialProperty.color)&&(this._materialProperty.color.isConstant||p)&&(s=this._materialProperty.color.getValue(t,g)),r(s)||(s=e.WHITE),n={show:d,distanceDisplayCondition:f,color:i.fromColor(s)}):n={show:d,distanceDisplayCondition:f};return new a({id:h,geometry:new l(this._options),attributes:n})},_.prototype.createOutlineGeometryInstance=function(t){var r=this._entity,n=r.isAvailable(t),s=y.getValueOrDefault(this._outlineColorProperty,t,e.BLACK,g),l=this._distanceDisplayConditionProperty.getValue(t);return new a({id:r,geometry:new h(this._options),attributes:{show:new u(n&&r.isShowing&&this._showProperty.getValue(t)&&this._showOutlineProperty.getValue(t)),color:i.fromColor(s),distanceDisplayCondition:o.fromDistanceDisplayCondition(l)}})},_.prototype._isHidden=function(t,e){return!r(e.positions)||!r(e.shape)||f.prototype._isHidden.call(this,t,e)},_.prototype._isDynamic=function(t,e){return!(e.positions.isConstant&&e.shape.isConstant&&y.isConstant(e.granularity)&&y.isConstant(e.outlineWidth)&&y.isConstant(e.cornerType))},_.prototype._setStaticOptions=function(t,e){var i=e.granularity,n=e.cornerType,o=this._options,a=this._materialProperty instanceof c;o.vertexFormat=a?d.VERTEX_FORMAT:p.MaterialSupport.TEXTURED.vertexFormat,o.polylinePositions=e.positions.getValue(s.MINIMUM_VALUE,o.polylinePositions),o.shapePositions=e.shape.getValue(s.MINIMUM_VALUE,o.shape),o.granularity=r(i)?i.getValue(s.MINIMUM_VALUE):void 0,o.cornerType=r(n)?n.getValue(s.MINIMUM_VALUE):void 0},_.DynamicGeometryUpdater=w,r(Object.create)&&(w.prototype=Object.create(m.prototype),w.prototype.constructor=w),w.prototype._isHidden=function(t,e,i){var n=this._options;return!r(n.polylinePositions)||!r(n.shapePositions)||m.prototype._isHidden.call(this,t,e,i)},w.prototype._setOptions=function(t,e,i){var r=this._options;r.polylinePositions=y.getValueOrUndefined(e.positions,i,r.polylinePositions),r.shapePositions=y.getValueOrUndefined(e.shape,i),r.granularity=y.getValueOrUndefined(e.granularity,i),r.cornerType=y.getValueOrUndefined(e.cornerType,i)},_}.apply(e,r))||(t.exports=n)},2034:function(t,e,i){var r,n;r=[i(334),i(68),i(31),i(16),i(6),i(29),i(1965),i(2),i(0),i(4),i(18),i(79),i(85),i(118),i(170),i(61),i(7),i(466),i(333),i(1973),i(59),i(119),i(193)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y,g,v,_,w,b,P){"use strict";function A(t){var e=(t=s(t,s.EMPTY_OBJECT)).polylinePositions,i=t.shapePositions;this._positions=e,this._shape=i,this._ellipsoid=u.clone(s(t.ellipsoid,u.WGS84)),this._cornerType=s(t.cornerType,a.ROUNDED),this._vertexFormat=b.clone(s(t.vertexFormat,b.DEFAULT)),this._granularity=s(t.granularity,y.RADIANS_PER_DEGREE),this._workerName="createPolylineVolumeGeometry";var o=1+e.length*n.packedLength;o+=1+i.length*r.packedLength,this.packedLength=o+u.packedLength+b.packedLength+2}A.pack=function(t,e,i){var o;i=s(i,0);var a=t._positions,l=a.length;for(e[i++]=l,o=0;o<l;++o,i+=n.packedLength)n.pack(a[o],e,i);var h=t._shape;for(l=h.length,e[i++]=l,o=0;o<l;++o,i+=r.packedLength)r.pack(h[o],e,i);return u.pack(t._ellipsoid,e,i),i+=u.packedLength,b.pack(t._vertexFormat,e,i),i+=b.packedLength,e[i++]=t._cornerType,e[i]=t._granularity,e};var O=u.clone(u.UNIT_SPHERE),E=new b,C={polylinePositions:void 0,shapePositions:void 0,ellipsoid:O,vertexFormat:E,cornerType:void 0,granularity:void 0};A.unpack=function(t,e,i){var o;e=s(e,0);var a=t[e++],h=new Array(a);for(o=0;o<a;++o,e+=n.packedLength)h[o]=n.unpack(t,e);a=t[e++];var p=new Array(a);for(o=0;o<a;++o,e+=r.packedLength)p[o]=r.unpack(t,e);var d=u.unpack(t,e,O);e+=u.packedLength;var c=b.unpack(t,e,E);e+=b.packedLength;var m=t[e++],f=t[e];return l(i)?(i._positions=h,i._shape=p,i._ellipsoid=u.clone(d,i._ellipsoid),i._vertexFormat=b.clone(c,i._vertexFormat),i._cornerType=m,i._granularity=f,i):(C.polylinePositions=h,C.shapePositions=p,C.cornerType=m,C.granularity=f,new A(C))};var x=new e;return A.createGeometry=function(r){var a=r._positions,s=t(a,n.equalsEpsilon),l=r._shape;if(l=_.removeDuplicatesFromShape(l),!(s.length<2||l.length<3)){v.computeWindingOrder2D(l)===P.CLOCKWISE&&l.reverse();var h=e.fromPoints(l,x);return function(t,e,r,n){var a=new c;n.position&&(a.position=new d({componentDatatype:o.DOUBLE,componentsPerAttribute:3,values:t}));var s,l,h,u,y,_,b=e.length,P=t.length/3,A=(P-2*b)/(2*b),O=v.triangulate(e),E=(A-1)*b*6+2*O.length,C=f.createTypedArray(P,E),x=2*b,D=0;for(s=0;s<A-1;s++){for(l=0;l<b-1;l++)_=(h=2*l+s*b*2)+x,y=(u=h+1)+x,C[D++]=u,C[D++]=h,C[D++]=y,C[D++]=y,C[D++]=h,C[D++]=_;y=(u=(h=2*b-2+s*b*2)+1)+x,_=h+x,C[D++]=u,C[D++]=h,C[D++]=y,C[D++]=y,C[D++]=h,C[D++]=_}if(n.st||n.tangent||n.bitangent){var T,I,M=new Float32Array(2*P),V=1/(A-1),N=1/r.height,S=r.height/2,L=0;for(s=0;s<A;s++){for(T=s*V,I=N*(e[0].y+S),M[L++]=T,M[L++]=I,l=1;l<b;l++)I=N*(e[l].y+S),M[L++]=T,M[L++]=I,M[L++]=T,M[L++]=I;I=N*(e[0].y+S),M[L++]=T,M[L++]=I}for(l=0;l<b;l++)T=0,I=N*(e[l].y+S),M[L++]=T,M[L++]=I;for(l=0;l<b;l++)T=(A-1)*V,I=N*(e[l].y+S),M[L++]=T,M[L++]=I;a.st=new d({componentDatatype:o.FLOAT,componentsPerAttribute:2,values:new Float32Array(M)})}var F=P-2*b;for(s=0;s<O.length;s+=3){var U=O[s]+F,R=O[s+1]+F,H=O[s+2]+F;C[D++]=U,C[D++]=R,C[D++]=H,C[D++]=H+b,C[D++]=R+b,C[D++]=U+b}var B=new p({attributes:a,indices:C,boundingSphere:i.fromVertices(t),primitiveType:w.TRIANGLES});if(n.normal&&(B=m.computeNormal(B)),n.tangent||n.bitangent){try{B=m.computeTangentAndBitangent(B)}catch(t){g("polyline-volume-tangent-bitangent","Unable to compute tangents and bitangents for polyline volume geometry")}n.tangent||(B.attributes.tangent=void 0),n.bitangent||(B.attributes.bitangent=void 0),n.st||(B.attributes.st=void 0)}return B}(_.computePositions(s,l,h,r,!0),l,h,r._vertexFormat)}},A}.apply(e,r))||(t.exports=n)},2035:function(t,e,i){var r,n;r=[i(334),i(68),i(31),i(16),i(6),i(29),i(1965),i(2),i(0),i(4),i(18),i(79),i(85),i(118),i(61),i(7),i(333),i(1973),i(59),i(193)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y,g,v,_){"use strict";function w(t){var e=(t=s(t,s.EMPTY_OBJECT)).polylinePositions,i=t.shapePositions;this._positions=e,this._shape=i,this._ellipsoid=u.clone(s(t.ellipsoid,u.WGS84)),this._cornerType=s(t.cornerType,a.ROUNDED),this._granularity=s(t.granularity,f.RADIANS_PER_DEGREE),this._workerName="createPolylineVolumeOutlineGeometry";var o=1+e.length*n.packedLength;o+=1+i.length*r.packedLength,this.packedLength=o+u.packedLength+2}w.pack=function(t,e,i){var o;i=s(i,0);var a=t._positions,l=a.length;for(e[i++]=l,o=0;o<l;++o,i+=n.packedLength)n.pack(a[o],e,i);var h=t._shape;for(l=h.length,e[i++]=l,o=0;o<l;++o,i+=r.packedLength)r.pack(h[o],e,i);return u.pack(t._ellipsoid,e,i),i+=u.packedLength,e[i++]=t._cornerType,e[i]=t._granularity,e};var b=u.clone(u.UNIT_SPHERE),P={polylinePositions:void 0,shapePositions:void 0,ellipsoid:b,height:void 0,cornerType:void 0,granularity:void 0};w.unpack=function(t,e,i){var o;e=s(e,0);var a=t[e++],h=new Array(a);for(o=0;o<a;++o,e+=n.packedLength)h[o]=n.unpack(t,e);a=t[e++];var p=new Array(a);for(o=0;o<a;++o,e+=r.packedLength)p[o]=r.unpack(t,e);var d=u.unpack(t,e,b);e+=u.packedLength;var c=t[e++],m=t[e];return l(i)?(i._positions=h,i._shape=p,i._ellipsoid=u.clone(d,i._ellipsoid),i._cornerType=c,i._granularity=m,i):(P.polylinePositions=h,P.shapePositions=p,P.cornerType=c,P.granularity=m,new w(P))};var A=new e;return w.createGeometry=function(r){var a=r._positions,s=t(a,n.equalsEpsilon),l=r._shape;if(l=g.removeDuplicatesFromShape(l),!(s.length<2||l.length<3)){y.computeWindingOrder2D(l)===_.CLOCKWISE&&l.reverse();var h=e.fromPoints(l,A);return function(t,e){var r=new c;r.position=new d({componentDatatype:o.DOUBLE,componentsPerAttribute:3,values:t});var n,a,s=e.length,l=r.position.values.length/3,h=t.length/3/s,u=m.createTypedArray(l,2*s*(h+1)),f=0,y=(n=0)*s;for(a=0;a<s-1;a++)u[f++]=a+y,u[f++]=a+y+1;for(u[f++]=s-1+y,u[f++]=y,y=(n=h-1)*s,a=0;a<s-1;a++)u[f++]=a+y,u[f++]=a+y+1;for(u[f++]=s-1+y,u[f++]=y,n=0;n<h-1;n++){var g=s*n,_=g+s;for(a=0;a<s;a++)u[f++]=a+g,u[f++]=a+_}return new p({attributes:r,indices:m.createTypedArray(l,u),boundingSphere:i.fromVertices(t),primitiveType:v.LINES})}(g.computePositions(s,l,h,r,!1),l)}},w}.apply(e,r))||(t.exports=n)},2036:function(t,e,i){var r,n;r=[i(229),i(6),i(22),i(11),i(21),i(129),i(0),i(4),i(1961),i(18),i(117),i(152),i(263),i(710),i(15),i(728),i(742),i(709),i(711),i(169),i(1962),i(130),i(332),i(1964),i(1963),i(1970),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y,g,v,_,w,b,P,A,O,E,C){"use strict";var x=new n,D=e.ZERO,T=new e,I=new m,M=new m,V=new i;function N(t){this.id=t,this.vertexFormat=void 0,this.rectangle=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.rotation=void 0,this.offsetAttribute=void 0}function S(t,e){E.call(this,{entity:t,scene:e,geometryOptions:new N(t),geometryPropertyName:"rectangle",observedPropertyNames:["availability","rectangle"]}),this._onEntityPropertyChanged(t,"rectangle",t.rectangle,void 0)}function L(t,e,i){A.call(this,t,e,i)}return a(Object.create)&&(S.prototype=Object.create(E.prototype),S.prototype.constructor=S),S.prototype.createFillGeometryInstance=function(t){var e,i=this._entity,r=i.isAvailable(t),s={show:new g(r&&i.isShowing&&this._showProperty.getValue(t)&&this._fillProperty.getValue(t)),distanceDisplayCondition:l.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(t)),offset:void 0,color:void 0};this._materialProperty instanceof P&&(a(this._materialProperty.color)&&(this._materialProperty.color.isConstant||r)&&(e=this._materialProperty.color.getValue(t,x)),a(e)||(e=n.WHITE),s.color=o.fromColor(e));return a(this._options.offsetAttribute)&&(s.offset=c.fromCartesian3(C.getValueOrDefault(this._terrainOffsetProperty,t,D,T))),new u({id:i,geometry:new f(this._options),attributes:s})},S.prototype.createOutlineGeometryInstance=function(t){var e=this._entity,i=e.isAvailable(t),r=C.getValueOrDefault(this._outlineColorProperty,t,n.BLACK,x),s=this._distanceDisplayConditionProperty.getValue(t),h={show:new g(i&&e.isShowing&&this._showProperty.getValue(t)&&this._showOutlineProperty.getValue(t)),color:o.fromColor(r),distanceDisplayCondition:l.fromDistanceDisplayCondition(s),offset:void 0};return a(this._options.offsetAttribute)&&(h.offset=c.fromCartesian3(C.getValueOrDefault(this._terrainOffsetProperty,t,D,T))),new u({id:e,geometry:new y(this._options),attributes:h})},S.prototype._computeCenter=function(t,e){var r=C.getValueOrUndefined(this._entity.rectangle.coordinates,t,M);if(a(r)){var n=m.center(r,V);return i.toCartesian(n,h.WGS84,e)}},S.prototype._isHidden=function(t,e){return!a(e.coordinates)||O.prototype._isHidden.call(this,t,e)},S.prototype._isDynamic=function(t,e){return!e.coordinates.isConstant||!C.isConstant(e.height)||!C.isConstant(e.extrudedHeight)||!C.isConstant(e.granularity)||!C.isConstant(e.stRotation)||!C.isConstant(e.rotation)||!C.isConstant(e.outlineWidth)||!C.isConstant(e.zIndex)||this._onTerrain&&!C.isConstant(this._materialProperty)},S.prototype._setStaticOptions=function(e,i){var r=this._materialProperty instanceof P,n=C.getValueOrUndefined(i.height,d.MINIMUM_VALUE),o=C.getValueOrDefault(i.heightReference,d.MINIMUM_VALUE,_.NONE),s=C.getValueOrUndefined(i.extrudedHeight,d.MINIMUM_VALUE),l=C.getValueOrDefault(i.extrudedHeightReference,d.MINIMUM_VALUE,_.NONE);a(s)&&!a(n)&&(n=0);var h=this._options;h.vertexFormat=r?b.VERTEX_FORMAT:w.MaterialSupport.TEXTURED.vertexFormat,h.rectangle=i.coordinates.getValue(d.MINIMUM_VALUE,h.rectangle),h.granularity=C.getValueOrUndefined(i.granularity,d.MINIMUM_VALUE),h.stRotation=C.getValueOrUndefined(i.stRotation,d.MINIMUM_VALUE),h.rotation=C.getValueOrUndefined(i.rotation,d.MINIMUM_VALUE),h.offsetAttribute=E.computeGeometryOffsetAttribute(n,o,s,l),h.height=E.getGeometryHeight(n,o),(s=E.getGeometryExtrudedHeight(s,l))===E.CLAMP_TO_GROUND&&(s=t.getMinimumMaximumHeights(f.computeRectangle(h,I)).minimumTerrainHeight),h.extrudedHeight=s},S.DynamicGeometryUpdater=L,a(Object.create)&&(L.prototype=Object.create(A.prototype),L.prototype.constructor=L),L.prototype._isHidden=function(t,e,i){return!a(this._options.rectangle)||A.prototype._isHidden.call(this,t,e,i)},L.prototype._setOptions=function(e,i,r){var n=this._options,o=C.getValueOrUndefined(i.height,r),s=C.getValueOrDefault(i.heightReference,r,_.NONE),l=C.getValueOrUndefined(i.extrudedHeight,r),h=C.getValueOrDefault(i.extrudedHeightReference,r,_.NONE);a(l)&&!a(o)&&(o=0),n.rectangle=C.getValueOrUndefined(i.coordinates,r,n.rectangle),n.granularity=C.getValueOrUndefined(i.granularity,r),n.stRotation=C.getValueOrUndefined(i.stRotation,r),n.rotation=C.getValueOrUndefined(i.rotation,r),n.offsetAttribute=E.computeGeometryOffsetAttribute(o,s,l,h),n.height=E.getGeometryHeight(o,s),(l=E.getGeometryExtrudedHeight(l,h))===E.CLAMP_TO_GROUND&&(l=t.getMinimumMaximumHeights(f.computeRectangle(n,I)).minimumTerrainHeight),n.extrudedHeight=l},S}.apply(e,r))||(t.exports=n)},2037:function(t,e,i){var r,n;r=[i(228),i(21),i(0),i(192),i(1961),i(709),i(711),i(465),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s,l){"use strict";var h=new e,u=new r,p=new r;function d(e,i,r,n,o){this.primitives=e,this.zIndex=o,this.classificationType=i,this.color=r,this.key=n,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new t,this.updaters=new t,this.updatersWithAttributes=new t,this.attributes=new t,this.subscriptions=new t,this.showsUpdated=new t,this.itemsToRemove=[],this.isDirty=!1}d.prototype.add=function(t,e){var i=t.id;if(this.createPrimitive=!0,this.geometry.set(i,e),this.updaters.set(i,t),t.hasConstantFill&&t.fillMaterialProperty.isConstant&&l.isConstant(t.distanceDisplayConditionProperty)){var r=this;this.subscriptions.set(i,t.entity.definitionChanged.addEventListener(function(e,i,n,o){"isShowing"===i&&r.showsUpdated.set(t.id,t)}))}else this.updatersWithAttributes.set(i,t)},d.prototype.remove=function(t){var e=t.id;if(this.createPrimitive=this.geometry.remove(e)||this.createPrimitive,this.updaters.remove(e)){this.updatersWithAttributes.remove(e);var r=this.subscriptions.get(e);return i(r)&&(r(),this.subscriptions.remove(e),this.showsUpdated.remove(e)),!0}return!1};var c=new Array(4);function m(e,i){this._batches=new t,this._primitives=e,this._classificationType=i}return d.prototype.update=function(t){var s,d=!0,m=0,f=this.primitive,y=this.primitives;if(this.createPrimitive){var g=this.geometry.values;if(g.length>0)i(f)&&(i(this.oldPrimitive)?y.remove(f):this.oldPrimitive=f),f=new a({show:!1,asynchronous:!0,geometryInstances:g,classificationType:this.classificationType}),y.add(f,this.zIndex),d=!1;else{i(f)&&(y.remove(f),f=void 0);var v=this.oldPrimitive;i(v)&&(y.remove(v),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=f,this.createPrimitive=!1,this.waitingOnCreate=!0}else if(i(f)&&f.ready){f.show=!0,i(this.oldPrimitive)&&(y.remove(this.oldPrimitive),this.oldPrimitive=void 0);var _=this.updatersWithAttributes.values,w=_.length,b=this.waitingOnCreate;for(s=0;s<w;s++){var P=_[s],A=this.geometry.get(P.id),O=this.attributes.get(A.id.id);if(i(O)||(O=f.getGeometryInstanceAttributes(A.id),this.attributes.set(A.id.id,O)),!P.fillMaterialProperty.isConstant||b){var E=P.fillMaterialProperty.color,C=l.getValueOrDefault(E,t,e.WHITE,h);if(!e.equals(O._lastColor,C)){O._lastColor=e.clone(C,O._lastColor);var x=this.color,D=C.toBytes(c);x[0]===D[0]&&x[1]===D[1]&&x[2]===D[2]&&x[3]===D[3]||(this.itemsToRemove[m++]=P)}}var T=P.entity.isShowing&&(P.hasConstantFill||P.isFilled(t));T!==(1===O.show[0])&&(O.show=o.toValue(T,O.show));var I=P.distanceDisplayConditionProperty;if(!l.isConstant(I)){var M=l.getValueOrDefault(I,t,p,u);r.equals(M,O._lastDistanceDisplayCondition)||(O._lastDistanceDisplayCondition=r.clone(M,O._lastDistanceDisplayCondition),O.distanceDisplayCondition=n.toValue(M,O.distanceDisplayCondition))}}this.updateShows(f),this.waitingOnCreate=!1}else i(f)&&!f.ready&&(d=!1);return this.itemsToRemove.length=m,d},d.prototype.updateShows=function(t){for(var e=this.showsUpdated.values,r=e.length,n=0;n<r;n++){var a=e[n],s=this.geometry.get(a.id),l=this.attributes.get(s.id.id);i(l)||(l=t.getGeometryInstanceAttributes(s.id),this.attributes.set(s.id.id,l));var h=a.entity.isShowing;h!==(1===l.show[0])&&(l.show=o.toValue(h,l.show),s.attributes.show.value[0]=l.show[0])}this.showsUpdated.removeAll()},d.prototype.contains=function(t){return this.updaters.contains(t.id)},d.prototype.getBoundingSphere=function(t,e){var r=this.primitive;if(!r.ready)return s.PENDING;var n=r.getBoundingSphere(t.entity);return i(n)?(n.clone(e),s.DONE):s.FAILED},d.prototype.removeAllPrimitives=function(){var t=this.primitives,e=this.primitive;i(e)&&(t.remove(e),this.primitive=void 0,this.geometry.removeAll(),this.updaters.removeAll());var r=this.oldPrimitive;i(r)&&(t.remove(r),this.oldPrimitive=void 0)},m.prototype.add=function(t,e){var i,r=e.createFillGeometryInstance(t),n=this._batches,o=l.getValueOrDefault(e.zIndex,0),a=new Uint32Array(r.attributes.color.value.buffer)[0]+":"+o;return n.contains(a)?i=n.get(a):(i=new d(this._primitives,this._classificationType,r.attributes.color.value,a,o),n.set(a,i)),i.add(e,r),i},m.prototype.remove=function(t){for(var e=this._batches.values,i=e.length,r=0;r<i;++r)if(e[r].remove(t))return},m.prototype.update=function(t){var e,i,r=!0,n=this._batches,o=n.values,a=o.length;for(e=0;e<a;++e)r=o[e].update(t)&&r;for(e=0;e<a;++e)for(var s=o[e],l=s.itemsToRemove,h=l.length,u=0;u<h;u++){i=l[u],s.remove(i);var p=this.add(t,i);s.isDirty=!0,p.isDirty=!0}var d=o.slice(),c=d.length;for(e=0;e<c;++e){var m=d[e];m.isDirty&&(r=d[e].update(t)&&r,m.isDirty=!1),0===m.geometry.length&&n.remove(m.key)}return r},m.prototype.getBoundingSphere=function(t,e){for(var i=this._batches.values,r=i.length,n=0;n<r;++n){var o=i[n];if(o.contains(t))return o.getBoundingSphere(t,e)}return s.FAILED},m.prototype.removeAllPrimitives=function(){for(var t=this._batches.values,e=t.length,i=0;i<e;++i)t[i].removeAllPrimitives()},m}.apply(e,r))||(t.exports=n)},2038:function(t,e,i){var r,n;r=[i(228),i(129),i(0),i(192),i(1961),i(709),i(2039),i(171),i(711),i(473),i(465),i(332),i(1966),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c){"use strict";var m=new r,f=new r;function y(e,i,r,n,o,s){this.primitives=e,this.classificationType=i,this.appearanceType=r,this.materialProperty=n,this.updaters=new t,this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new t,this.material=void 0,this.updatersWithAttributes=new t,this.attributes=new t,this.invalidated=!1,this.removeMaterialSubscription=n.definitionChanged.addEventListener(y.prototype.onMaterialChanged,this),this.subscriptions=new t,this.showsUpdated=new t,this.usingSphericalTextureCoordinates=o,this.zIndex=s,this.rectangleCollisionCheck=new a}function g(t,e,i){this._items=[],this._primitives=t,this._classificationType=e,this._appearanceType=i}return y.prototype.onMaterialChanged=function(){this.invalidated=!0},y.prototype.overlapping=function(t){return this.rectangleCollisionCheck.collides(t)},y.prototype.isMaterial=function(t){var e=this.materialProperty,r=t.fillMaterialProperty;return r===e||r instanceof p&&e instanceof p||i(e)&&e.equals(r)},y.prototype.add=function(t,e,i){var r=e.id;if(this.updaters.set(r,e),this.geometry.set(r,i),this.rectangleCollisionCheck.insert(r,i.geometry.rectangle),e.hasConstantFill&&e.fillMaterialProperty.isConstant&&c.isConstant(e.distanceDisplayConditionProperty)){var n=this;this.subscriptions.set(r,e.entity.definitionChanged.addEventListener(function(t,i,r,o){"isShowing"===i&&n.showsUpdated.set(e.id,e)}))}else this.updatersWithAttributes.set(r,e);this.createPrimitive=!0},y.prototype.remove=function(t){var e=t.id,r=this.geometry.get(e);if(this.createPrimitive=this.geometry.remove(e)||this.createPrimitive,this.updaters.remove(e)){this.rectangleCollisionCheck.remove(e,r.geometry.rectangle),this.updatersWithAttributes.remove(e);var n=this.subscriptions.get(e);return i(n)&&(n(),this.subscriptions.remove(e)),!0}return!1},y.prototype.update=function(t){var e,a=!0,s=this.primitive,h=this.primitives,u=this.geometry.values;if(this.createPrimitive){if(u.length>0)i(s)&&(i(this.oldPrimitive)?h.remove(s):this.oldPrimitive=s),this.material=d.getValue(t,this.materialProperty,this.material),s=new l({show:!1,asynchronous:!0,geometryInstances:u,appearance:new this.appearanceType({material:this.material}),classificationType:this.classificationType}),h.add(s,this.zIndex),a=!1;else{i(s)&&(h.remove(s),s=void 0);var p=this.oldPrimitive;i(p)&&(h.remove(p),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=s,this.createPrimitive=!1}else if(i(s)&&s.ready){s.show=!0,i(this.oldPrimitive)&&(h.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.material=d.getValue(t,this.materialProperty,this.material),this.primitive.appearance.material=this.material;var y=this.updatersWithAttributes.values,g=y.length;for(e=0;e<g;e++){var v=y[e],_=v.entity,w=this.geometry.get(v.id),b=this.attributes.get(w.id.id);i(b)||(b=s.getGeometryInstanceAttributes(w.id),this.attributes.set(w.id.id,b));var P=_.isShowing&&(v.hasConstantFill||v.isFilled(t));P!==(1===b.show[0])&&(b.show=o.toValue(P,b.show));var A=v.distanceDisplayConditionProperty;if(!c.isConstant(A)){var O=c.getValueOrDefault(A,t,f,m);r.equals(O,b._lastDistanceDisplayCondition)||(b._lastDistanceDisplayCondition=r.clone(O,b._lastDistanceDisplayCondition),b.distanceDisplayCondition=n.toValue(O,b.distanceDisplayCondition))}}this.updateShows(s)}else i(s)&&!s.ready&&(a=!1);return a},y.prototype.updateShows=function(t){for(var e=this.showsUpdated.values,r=e.length,n=0;n<r;n++){var a=e[n],s=a.entity,l=this.geometry.get(a.id),h=this.attributes.get(l.id.id);i(h)||(h=t.getGeometryInstanceAttributes(l.id),this.attributes.set(l.id.id,h));var u=s.isShowing;u!==(1===h.show[0])&&(h.show=o.toValue(u,h.show),l.attributes.show.value[0]=h.show[0])}this.showsUpdated.removeAll()},y.prototype.contains=function(t){return this.updaters.contains(t.id)},y.prototype.getBoundingSphere=function(t,e){var r=this.primitive;if(!r.ready)return u.PENDING;var n=r.getGeometryInstanceAttributes(t.entity);return!i(n)||!i(n.boundingSphere)||i(n.show)&&0===n.show[0]?u.FAILED:(n.boundingSphere.clone(e),u.DONE)},y.prototype.destroy=function(){var t=this.primitive,e=this.primitives;i(t)&&e.remove(t);var r=this.oldPrimitive;i(r)&&e.remove(r),this.removeMaterialSubscription()},g.prototype.add=function(t,e){for(var i=this._items,r=i.length,n=e.createFillGeometryInstance(t),o=h.shouldUseSphericalCoordinates(n.geometry.rectangle),a=c.getValueOrDefault(e.zIndex,0),s=0;s<r;++s){var l=i[s];if(l.isMaterial(e)&&l.usingSphericalTextureCoordinates===o&&l.zIndex===a&&!l.overlapping(n.geometry.rectangle))return void l.add(t,e,n)}var u=new y(this._primitives,this._classificationType,this._appearanceType,e.fillMaterialProperty,o,a);u.add(t,e,n),i.push(u)},g.prototype.remove=function(t){for(var e=this._items,i=e.length-1;i>=0;i--){var r=e[i];if(r.remove(t)){0===r.updaters.length&&(e.splice(i,1),r.destroy());break}}},g.prototype.update=function(t){var e,i=this._items;for(e=i.length-1;e>=0;e--){var r=i[e];if(r.invalidated){i.splice(e,1);for(var n=r.updaters.values,o=n.length,a=0;a<o;a++)this.add(t,n[a]);r.destroy()}}var s=!0;for(e=0;e<i.length;e++)s=i[e].update(t)&&s;return s},g.prototype.getBoundingSphere=function(t,e){for(var i=this._items,r=i.length,n=0;n<r;n++){var o=i[n];if(o.contains(t))return o.getBoundingSphere(t,e)}return u.FAILED},g.prototype.removeAllPrimitives=function(){for(var t=this._items,e=t.length,i=0;i<e;i++)t[i].destroy();this._items.length=0},g}.apply(e,r))||(t.exports=n)},2039:function(t,e,i){var r,n;r=[i(2040),i(11)],void 0===(n=function(t,e){"use strict";function i(){this._tree=t()}function r(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.id=""}function n(t,e){return t.id===e.id}r.fromRectangleAndId=function(t,e,i){return i.minX=e.west,i.minY=e.south,i.maxX=e.east,i.maxY=e.north,i.id=t,i},i.prototype.insert=function(t,e){var i=r.fromRectangleAndId(t,e,new r);this._tree.insert(i)};var o=new r;i.prototype.remove=function(t,e){var i=r.fromRectangleAndId(t,e,o);this._tree.remove(i,n)};var a=new r;return i.prototype.collides=function(t){var e=r.fromRectangleAndId("",t,a);return this._tree.collides(e)},i}.apply(e,r))||(t.exports=n)},2040:function(t,e,i){var r,n;r=[i(2041)],void 0===(n=function(t){"use strict";function e(t,i){if(!(this instanceof e))return new e(t,i);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&this._initFormat(i),this.clear()}function i(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function r(t,e){n(t,0,t.children.length,e,t)}function n(t,e,i,r,n){n||(n=d(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var a,s=e;s<i;s++)a=t.children[s],o(n,t.leaf?r(a):a);return n}function o(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function a(t,e){return t.minX-e.minX}function s(t,e){return t.minY-e.minY}function l(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function u(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function c(e,i,r,n,o){for(var a,s=[i,r];s.length;)(r=s.pop())-(i=s.pop())<=n||(a=i+Math.ceil((r-i)/n/2)*n,t(e,a,i,r,o),s.push(i,a,a,r))}return e.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!p(t,e))return i;for(var n,o,a,s,l=[];e;){for(n=0,o=e.children.length;n<o;n++)a=e.children[n],p(t,s=e.leaf?r(a):a)&&(e.leaf?i.push(a):u(t,s)?this._all(a,i):l.push(a));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!p(t,e))return!1;for(var r,n,o,a,s=[];e;){for(r=0,n=e.children.length;r<n;r++)if(o=e.children[r],p(t,a=e.leaf?i(o):o)){if(e.leaf||u(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=d([]),this},remove:function(t,e){if(!t)return this;for(var r,n,o,a,s=this.data,l=this.toBBox(t),h=[],p=[];s||h.length;){if(s||(s=h.pop(),n=h[h.length-1],r=p.pop(),a=!0),s.leaf&&-1!==(o=i(t,s.children,e)))return s.children.splice(o,1),h.push(s),this._condense(h),this;a||s.leaf||!u(s,l)?n?(r++,s=n.children[r],a=!1):s=null:(h.push(s),p.push(r),r=0,n=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:a,compareMinY:s,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var o,a=i-e+1,s=this._maxEntries;if(a<=s)return r(o=d(t.slice(e,i+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,n-1))),(o=d([])).leaf=!1,o.height=n;var l,h,u,p,m=Math.ceil(a/s),f=m*Math.ceil(Math.sqrt(s));for(c(t,e,i,f,this.compareMinX),l=e;l<=i;l+=f)for(c(t,l,u=Math.min(l+f-1,i),m,this.compareMinY),h=l;h<=u;h+=m)p=Math.min(h+m-1,u),o.children.push(this._build(t,h,p,n-1));return r(o,this.toBBox),o},_chooseSubtree:function(t,e,i,r){for(var n,o,a,s,h,u,p,d,c,m;r.push(e),!e.leaf&&r.length-1!==i;){for(p=d=1/0,n=0,o=e.children.length;n<o;n++)h=l(a=e.children[n]),c=t,m=a,(u=(Math.max(m.maxX,c.maxX)-Math.min(m.minX,c.minX))*(Math.max(m.maxY,c.maxY)-Math.min(m.minY,c.minY))-h)<d?(d=u,p=h<p?h:p,s=a):u===d&&h<p&&(p=h,s=a);e=s||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,n=i?t:r(t),a=[],s=this._chooseSubtree(n,this.data,e,a);for(s.children.push(t),o(s,n);e>=0&&a[e].children.length>this._maxEntries;)this._split(a,e),e--;this._adjustParentBBoxes(n,a,e)},_split:function(t,e){var i=t[e],n=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,n);var a=this._chooseSplitIndex(i,o,n),s=d(i.children.splice(a,i.children.length-a));s.height=i.height,s.leaf=i.leaf,r(i,this.toBBox),r(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(i,s)},_splitRoot:function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,o,a,s,h,u,p,d,c,m,f,y,g,v;for(u=p=1/0,r=e;r<=i-e;r++)o=n(t,0,r,this.toBBox),a=n(t,r,i,this.toBBox),c=o,m=a,f=void 0,y=void 0,g=void 0,v=void 0,f=Math.max(c.minX,m.minX),y=Math.max(c.minY,m.minY),g=Math.min(c.maxX,m.maxX),v=Math.min(c.maxY,m.maxY),s=Math.max(0,g-f)*Math.max(0,v-y),h=l(o)+l(a),s<u?(u=s,d=r,p=h<p?h:p):s===u&&h<p&&(p=h,d=r);return d},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:a,n=t.leaf?this.compareMinY:s;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var a,s,l=this.toBBox,u=n(t,0,e,l),p=n(t,i-e,i,l),d=h(u)+h(p);for(a=e;a<i-e;a++)s=t.children[a],o(u,t.leaf?l(s):s),d+=h(u);for(a=i-e-1;a>=e;a--)s=t.children[a],o(p,t.leaf?l(s):s),d+=h(p);return d},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)o(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():r(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},e}.apply(e,r))||(t.exports=n)},2041:function(t,e,i){var r;void 0===(r=function(){"use strict";function t(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function e(t,e){return t<e?-1:t>e?1:0}return function(i,r,n,o,a){!function e(i,r,n,o,a){for(;o>n;){if(o-n>600){var s=o-n+1,l=r-n+1,h=Math.log(s),u=.5*Math.exp(2*h/3),p=.5*Math.sqrt(h*u*(s-u)/s)*(l-s/2<0?-1:1),d=Math.max(n,Math.floor(r-l*u/s+p)),c=Math.min(o,Math.floor(r+(s-l)*u/s+p));e(i,r,d,c,a)}var m=i[r],f=n,y=o;for(t(i,n,r),a(i[o],m)>0&&t(i,n,o);f<y;){for(t(i,f,y),f++,y--;a(i[f],m)<0;)f++;for(;a(i[y],m)>0;)y--}0===a(i[n],m)?t(i,n,y):t(i,++y,o),y<=r&&(n=y+1),r<=y&&(o=y-1)}}(i,r,n||0,o||i.length-1,a||e)}}.apply(e,[]))||(t.exports=r)},2042:function(t,e,i){var r,n;r=[i(228),i(6),i(21),i(129),i(0),i(192),i(1961),i(710),i(709),i(130),i(143),i(465),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d){"use strict";var c=new i,m=new o,f=new o,y=e.ZERO,g=new e;function v(e,i,r,n){this.translucent=i,this.width=r,this.shadows=n,this.primitives=e,this.createPrimitive=!1,this.waitingOnCreate=!1,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new t,this.updaters=new t,this.updatersWithAttributes=new t,this.attributes=new t,this.itemsToRemove=[],this.subscriptions=new t,this.showsUpdated=new t}function _(e,i,r){this._primitives=e,this._scene=i,this._shadows=r,this._solidBatches=new t,this._translucentBatches=new t}return v.prototype.add=function(t,e){var i=t.id;if(this.createPrimitive=!0,this.geometry.set(i,e),this.updaters.set(i,t),t.hasConstantOutline&&t.outlineColorProperty.isConstant&&d.isConstant(t.distanceDisplayConditionProperty)&&d.isConstant(t.terrainOffsetProperty)){var r=this;this.subscriptions.set(i,t.entity.definitionChanged.addEventListener(function(e,i,n,o){"isShowing"===i&&r.showsUpdated.set(t.id,t)}))}else this.updatersWithAttributes.set(i,t)},v.prototype.remove=function(t){var e=t.id;if(this.createPrimitive=this.geometry.remove(e)||this.createPrimitive,this.updaters.remove(e)){this.updatersWithAttributes.remove(e);var i=this.subscriptions.get(e);return n(i)&&(i(),this.subscriptions.remove(e),this.showsUpdated.remove(e)),!0}return!1},v.prototype.update=function(t){var p,v=!0,_=0,w=this.primitive,b=this.primitives;if(this.createPrimitive){var P=this.geometry.values;if(P.length>0)n(w)&&(n(this.oldPrimitive)?b.remove(w):this.oldPrimitive=w),w=new u({show:!1,asynchronous:!0,geometryInstances:P,appearance:new h({flat:!0,translucent:this.translucent,renderState:{lineWidth:this.width}}),shadows:this.shadows}),b.add(w),v=!1;else{n(w)&&(b.remove(w),w=void 0);var A=this.oldPrimitive;n(A)&&(b.remove(A),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=w,this.createPrimitive=!1,this.waitingOnCreate=!0}else if(n(w)&&w.ready){w.show=!0,n(this.oldPrimitive)&&(b.remove(this.oldPrimitive),this.oldPrimitive=void 0);var O=this.updatersWithAttributes.values,E=O.length,C=this.waitingOnCreate;for(p=0;p<E;p++){var x=O[p],D=this.geometry.get(x.id),T=this.attributes.get(D.id.id);if(n(T)||(T=w.getGeometryInstanceAttributes(D.id),this.attributes.set(D.id.id,T)),!x.outlineColorProperty.isConstant||C){var I=x.outlineColorProperty,M=d.getValueOrDefault(I,t,i.WHITE,c);i.equals(T._lastColor,M)||(T._lastColor=i.clone(M,T._lastColor),T.color=r.toValue(M,T.color),(this.translucent&&255===T.color[3]||!this.translucent&&255!==T.color[3])&&(this.itemsToRemove[_++]=x))}var V=x.entity.isShowing&&(x.hasConstantOutline||x.isOutlineVisible(t));V!==(1===T.show[0])&&(T.show=l.toValue(V,T.show));var N=x.distanceDisplayConditionProperty;if(!d.isConstant(N)){var S=d.getValueOrDefault(N,t,f,m);o.equals(S,T._lastDistanceDisplayCondition)||(T._lastDistanceDisplayCondition=o.clone(S,T._lastDistanceDisplayCondition),T.distanceDisplayCondition=a.toValue(S,T.distanceDisplayCondition))}var L=x.terrainOffsetProperty;if(!d.isConstant(L)){var F=d.getValueOrDefault(L,t,y,g);e.equals(F,T._lastOffset)||(T._lastOffset=e.clone(F,T._lastOffset),T.offset=s.toValue(F,T.offset))}}this.updateShows(w),this.waitingOnCreate=!1}else n(w)&&!w.ready&&(v=!1);return this.itemsToRemove.length=_,v},v.prototype.updateShows=function(t){for(var e=this.showsUpdated.values,i=e.length,r=0;r<i;r++){var o=e[r],a=this.geometry.get(o.id),s=this.attributes.get(a.id.id);n(s)||(s=t.getGeometryInstanceAttributes(a.id),this.attributes.set(a.id.id,s));var h=o.entity.isShowing;h!==(1===s.show[0])&&(s.show=l.toValue(h,s.show),a.attributes.show.value[0]=s.show[0])}this.showsUpdated.removeAll()},v.prototype.contains=function(t){return this.updaters.contains(t.id)},v.prototype.getBoundingSphere=function(t,e){var i=this.primitive;if(!i.ready)return p.PENDING;var r=i.getGeometryInstanceAttributes(t.entity);return!n(r)||!n(r.boundingSphere)||n(r.show)&&0===r.show[0]?p.FAILED:(r.boundingSphere.clone(e),p.DONE)},v.prototype.removeAllPrimitives=function(){var t=this.primitives,e=this.primitive;n(e)&&(t.remove(e),this.primitive=void 0,this.geometry.removeAll(),this.updaters.removeAll());var i=this.oldPrimitive;n(i)&&(t.remove(i),this.oldPrimitive=void 0)},_.prototype.add=function(t,e){var i,r,o=e.createOutlineGeometryInstance(t),a=this._scene.clampLineWidth(e.outlineWidth);255===o.attributes.color.value[3]?(r=(i=this._solidBatches).get(a),n(r)||(r=new v(this._primitives,!1,a,this._shadows),i.set(a,r)),r.add(e,o)):(r=(i=this._translucentBatches).get(a),n(r)||(r=new v(this._primitives,!0,a,this._shadows),i.set(a,r)),r.add(e,o))},_.prototype.remove=function(t){var e,i=this._solidBatches.values,r=i.length;for(e=0;e<r;e++)if(i[e].remove(t))return;var n=this._translucentBatches.values,o=n.length;for(e=0;e<o;e++)if(n[e].remove(t))return},_.prototype.update=function(t){var e,i,r,n,o,a=this._solidBatches.values,s=a.length,l=this._translucentBatches.values,h=l.length,u=!0,p=!1;do{for(p=!1,i=0;i<s;i++){u=(n=a[i]).update(t);var d=(o=n.itemsToRemove).length;if(d>0)for(p=!0,e=0;e<d;e++)r=o[e],n.remove(r),this.add(t,r)}for(i=0;i<h;i++){u=(n=l[i]).update(t);var c=(o=n.itemsToRemove).length;if(c>0)for(p=!0,e=0;e<c;e++)r=o[e],n.remove(r),this.add(t,r)}}while(p);return u},_.prototype.getBoundingSphere=function(t,e){var i,r=this._solidBatches.values,n=r.length;for(i=0;i<n;i++){var o=r[i];if(o.contains(t))return o.getBoundingSphere(t,e)}var a=this._translucentBatches.values,s=a.length;for(i=0;i<s;i++){var l=a[i];if(l.contains(t))return l.getBoundingSphere(t,e)}return p.FAILED},_.prototype.removeAllPrimitives=function(){var t,e=this._solidBatches.values,i=e.length;for(t=0;t<i;t++)e[t].removeAllPrimitives();var r=this._translucentBatches.values,n=r.length;for(t=0;t<n;t++)r[t].removeAllPrimitives()},_}.apply(e,r))||(t.exports=n)},2043:function(t,e,i){var r,n;r=[i(11),i(21),i(129),i(0),i(4),i(1961),i(117),i(263),i(709),i(2044),i(2045),i(1962),i(130),i(332),i(1964),i(1963),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y){"use strict";var g=new e;function v(t){this.id=t,this.vertexFormat=void 0,this.positions=void 0,this.minimumHeights=void 0,this.maximumHeights=void 0,this.granularity=void 0}function _(t,e){f.call(this,{entity:t,scene:e,geometryOptions:new v(t),geometryPropertyName:"wall",observedPropertyNames:["availability","wall"]}),this._onEntityPropertyChanged(t,"wall",t.wall,void 0)}function w(t,e,i){m.call(this,t,e,i)}return r(Object.create)&&(_.prototype=Object.create(f.prototype),_.prototype.constructor=_),_.prototype.createFillGeometryInstance=function(t){var n,s,u=this._entity,p=u.isAvailable(t),d=new l(p&&u.isShowing&&this._showProperty.getValue(t)&&this._fillProperty.getValue(t)),m=this._distanceDisplayConditionProperty.getValue(t),f=o.fromDistanceDisplayCondition(m);this._materialProperty instanceof c?(r(this._materialProperty.color)&&(this._materialProperty.color.isConstant||p)&&(s=this._materialProperty.color.getValue(t,g)),r(s)||(s=e.WHITE),n={show:d,distanceDisplayCondition:f,color:i.fromColor(s)}):n={show:d,distanceDisplayCondition:f};return new a({id:u,geometry:new h(this._options),attributes:n})},_.prototype.createOutlineGeometryInstance=function(t){var r=this._entity,n=r.isAvailable(t),s=y.getValueOrDefault(this._outlineColorProperty,t,e.BLACK,g),h=this._distanceDisplayConditionProperty.getValue(t);return new a({id:r,geometry:new u(this._options),attributes:{show:new l(n&&r.isShowing&&this._showProperty.getValue(t)&&this._showOutlineProperty.getValue(t)),color:i.fromColor(s),distanceDisplayCondition:o.fromDistanceDisplayCondition(h)}})},_.prototype._isHidden=function(t,e){return!r(e.positions)||f.prototype._isHidden.call(this,t,e)},_.prototype._getIsClosed=function(t){return!1},_.prototype._isDynamic=function(t,e){return!(e.positions.isConstant&&y.isConstant(e.minimumHeights)&&y.isConstant(e.maximumHeights)&&y.isConstant(e.outlineWidth)&&y.isConstant(e.granularity))},_.prototype._setStaticOptions=function(t,e){var i=e.minimumHeights,n=e.maximumHeights,o=e.granularity,a=this._materialProperty instanceof c,l=this._options;l.vertexFormat=a?d.VERTEX_FORMAT:p.MaterialSupport.TEXTURED.vertexFormat,l.positions=e.positions.getValue(s.MINIMUM_VALUE,l.positions),l.minimumHeights=r(i)?i.getValue(s.MINIMUM_VALUE,l.minimumHeights):void 0,l.maximumHeights=r(n)?n.getValue(s.MINIMUM_VALUE,l.maximumHeights):void 0,l.granularity=r(o)?o.getValue(s.MINIMUM_VALUE):void 0},_.DynamicGeometryUpdater=w,r(Object.create)&&(w.prototype=Object.create(m.prototype),w.prototype.constructor=w),w.prototype._isHidden=function(t,e,i){return!r(this._options.positions)||m.prototype._isHidden.call(this,t,e,i)},w.prototype._setOptions=function(t,e,i){var r=this._options;r.positions=y.getValueOrUndefined(e.positions,i,r.positions),r.minimumHeights=y.getValueOrUndefined(e.minimumHeights,i,r.minimumHeights),r.maximumHeights=y.getValueOrUndefined(e.maximumHeights,i,r.maximumHeights),r.granularity=y.getValueOrUndefined(e.granularity,i)},_}.apply(e,r))||(t.exports=n)},2044:function(t,e,i){var r,n;r=[i(31),i(6),i(29),i(2),i(0),i(4),i(18),i(79),i(85),i(118),i(61),i(7),i(59),i(119),i(1985)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m){"use strict";var f=new e,y=new e,g=new e,v=new e,_=new e,w=new e,b=new e,P=new e;function A(t){var i=(t=r(t,r.EMPTY_OBJECT)).positions,o=t.maximumHeights,s=t.minimumHeights,l=r(t.vertexFormat,c.DEFAULT),h=r(t.granularity,p.RADIANS_PER_DEGREE),u=r(t.ellipsoid,a.WGS84);this._positions=i,this._minimumHeights=s,this._maximumHeights=o,this._vertexFormat=c.clone(l),this._granularity=h,this._ellipsoid=a.clone(u),this._workerName="createWallGeometry";var d=1+i.length*e.packedLength+2;n(s)&&(d+=s.length),n(o)&&(d+=o.length),this.packedLength=d+a.packedLength+c.packedLength+1}A.pack=function(t,i,o){var s;o=r(o,0);var l=t._positions,h=l.length;for(i[o++]=h,s=0;s<h;++s,o+=e.packedLength)e.pack(l[s],i,o);var u=t._minimumHeights;if(h=n(u)?u.length:0,i[o++]=h,n(u))for(s=0;s<h;++s)i[o++]=u[s];var p=t._maximumHeights;if(h=n(p)?p.length:0,i[o++]=h,n(p))for(s=0;s<h;++s)i[o++]=p[s];return a.pack(t._ellipsoid,i,o),o+=a.packedLength,c.pack(t._vertexFormat,i,o),i[o+=c.packedLength]=t._granularity,i};var O=a.clone(a.UNIT_SPHERE),E=new c,C={positions:void 0,minimumHeights:void 0,maximumHeights:void 0,ellipsoid:O,vertexFormat:E,granularity:void 0};return A.unpack=function(t,i,o){var s;i=r(i,0);var l,h,u=t[i++],p=new Array(u);for(s=0;s<u;++s,i+=e.packedLength)p[s]=e.unpack(t,i);if((u=t[i++])>0)for(l=new Array(u),s=0;s<u;++s)l[s]=t[i++];if((u=t[i++])>0)for(h=new Array(u),s=0;s<u;++s)h[s]=t[i++];var d=a.unpack(t,i,O);i+=a.packedLength;var m=c.unpack(t,i,E),f=t[i+=c.packedLength];return n(o)?(o._positions=p,o._minimumHeights=l,o._maximumHeights=h,o._ellipsoid=a.clone(d,o._ellipsoid),o._vertexFormat=c.clone(m,o._vertexFormat),o._granularity=f,o):(C.positions=p,C.minimumHeights=l,C.maximumHeights=h,C.granularity=f,new A(C))},A.fromConstantHeights=function(t){var e,i,o=(t=r(t,r.EMPTY_OBJECT)).positions,a=t.minimumHeight,s=t.maximumHeight,l=n(a),h=n(s);if(l||h){var u=o.length;e=l?new Array(u):void 0,i=h?new Array(u):void 0;for(var p=0;p<u;++p)l&&(e[p]=a),h&&(i[p]=s)}return new A({positions:o,maximumHeights:i,minimumHeights:e,ellipsoid:t.ellipsoid,vertexFormat:t.vertexFormat})},A.createGeometry=function(r){var o=r._positions,a=r._minimumHeights,c=r._maximumHeights,A=r._vertexFormat,O=r._granularity,E=r._ellipsoid,C=m.computePositions(E,o,c,a,O,!0);if(n(C)){var x,D=C.bottomPositions,T=C.topPositions,I=C.numCorners,M=T.length,V=2*M,N=A.position?new Float64Array(V):void 0,S=A.normal?new Float32Array(V):void 0,L=A.tangent?new Float32Array(V):void 0,F=A.bitangent?new Float32Array(V):void 0,U=A.st?new Float32Array(V/3*2):void 0,R=0,H=0,B=0,G=0,k=0,z=P,j=b,W=w,Y=!0,q=0,X=1/((M/=3)-o.length+1);for(x=0;x<M;++x){var Z=3*x,J=e.fromArray(T,Z,f),K=e.fromArray(D,Z,y);if(A.position&&(N[R++]=K.x,N[R++]=K.y,N[R++]=K.z,N[R++]=J.x,N[R++]=J.y,N[R++]=J.z),A.st&&(U[k++]=q,U[k++]=0,U[k++]=q,U[k++]=1),A.normal||A.tangent||A.bitangent){var Q,$=e.clone(e.ZERO,_),tt=E.scaleToGeodeticSurface(e.fromArray(T,Z,y),y);if(x+1<M&&(Q=E.scaleToGeodeticSurface(e.fromArray(T,Z+3,g),g),$=e.fromArray(T,Z+3,_)),Y){var et=e.subtract($,J,v),it=e.subtract(tt,J,f);z=e.normalize(e.cross(it,et,z),z),Y=!1}e.equalsEpsilon(Q,tt,p.EPSILON10)?Y=!0:(q+=X,A.tangent&&(j=e.normalize(e.subtract(Q,tt,j),j)),A.bitangent&&(W=e.normalize(e.cross(z,j,W),W))),A.normal&&(S[H++]=z.x,S[H++]=z.y,S[H++]=z.z,S[H++]=z.x,S[H++]=z.y,S[H++]=z.z),A.tangent&&(L[G++]=j.x,L[G++]=j.y,L[G++]=j.z,L[G++]=j.x,L[G++]=j.y,L[G++]=j.z),A.bitangent&&(F[B++]=W.x,F[B++]=W.y,F[B++]=W.z,F[B++]=W.x,F[B++]=W.y,F[B++]=W.z)}}var rt=new h;A.position&&(rt.position=new l({componentDatatype:i.DOUBLE,componentsPerAttribute:3,values:N})),A.normal&&(rt.normal=new l({componentDatatype:i.FLOAT,componentsPerAttribute:3,values:S})),A.tangent&&(rt.tangent=new l({componentDatatype:i.FLOAT,componentsPerAttribute:3,values:L})),A.bitangent&&(rt.bitangent=new l({componentDatatype:i.FLOAT,componentsPerAttribute:3,values:F})),A.st&&(rt.st=new l({componentDatatype:i.FLOAT,componentsPerAttribute:2,values:U}));var nt=V/3;V-=6*(I+1);var ot=u.createTypedArray(nt,V),at=0;for(x=0;x<nt-2;x+=2){var st=x,lt=x+2,ht=e.fromArray(N,3*st,f),ut=e.fromArray(N,3*lt,y);if(!e.equalsEpsilon(ht,ut,p.EPSILON10)){var pt=x+1,dt=x+3;ot[at++]=pt,ot[at++]=st,ot[at++]=dt,ot[at++]=dt,ot[at++]=st,ot[at++]=lt}}return new s({attributes:rt,indices:ot,primitiveType:d.TRIANGLES,boundingSphere:new t.fromVertices(N)})}},A}.apply(e,r))||(t.exports=n)},2045:function(t,e,i){var r,n;r=[i(31),i(6),i(29),i(2),i(0),i(4),i(18),i(79),i(85),i(118),i(61),i(7),i(59),i(1985)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c){"use strict";var m=new e,f=new e;function y(t){var i=(t=r(t,r.EMPTY_OBJECT)).positions,o=t.maximumHeights,s=t.minimumHeights,l=r(t.granularity,p.RADIANS_PER_DEGREE),h=r(t.ellipsoid,a.WGS84);this._positions=i,this._minimumHeights=s,this._maximumHeights=o,this._granularity=l,this._ellipsoid=a.clone(h),this._workerName="createWallOutlineGeometry";var u=1+i.length*e.packedLength+2;n(s)&&(u+=s.length),n(o)&&(u+=o.length),this.packedLength=u+a.packedLength+1}y.pack=function(t,i,o){var s;o=r(o,0);var l=t._positions,h=l.length;for(i[o++]=h,s=0;s<h;++s,o+=e.packedLength)e.pack(l[s],i,o);var u=t._minimumHeights;if(h=n(u)?u.length:0,i[o++]=h,n(u))for(s=0;s<h;++s)i[o++]=u[s];var p=t._maximumHeights;if(h=n(p)?p.length:0,i[o++]=h,n(p))for(s=0;s<h;++s)i[o++]=p[s];return a.pack(t._ellipsoid,i,o),i[o+=a.packedLength]=t._granularity,i};var g=a.clone(a.UNIT_SPHERE),v={positions:void 0,minimumHeights:void 0,maximumHeights:void 0,ellipsoid:g,granularity:void 0};return y.unpack=function(t,i,o){var s;i=r(i,0);var l,h,u=t[i++],p=new Array(u);for(s=0;s<u;++s,i+=e.packedLength)p[s]=e.unpack(t,i);if((u=t[i++])>0)for(l=new Array(u),s=0;s<u;++s)l[s]=t[i++];if((u=t[i++])>0)for(h=new Array(u),s=0;s<u;++s)h[s]=t[i++];var d=a.unpack(t,i,g),c=t[i+=a.packedLength];return n(o)?(o._positions=p,o._minimumHeights=l,o._maximumHeights=h,o._ellipsoid=a.clone(d,o._ellipsoid),o._granularity=c,o):(v.positions=p,v.minimumHeights=l,v.maximumHeights=h,v.granularity=c,new y(v))},y.fromConstantHeights=function(t){var e,i,o=(t=r(t,r.EMPTY_OBJECT)).positions,a=t.minimumHeight,s=t.maximumHeight,l=n(a),h=n(s);if(l||h){var u=o.length;e=l?new Array(u):void 0,i=h?new Array(u):void 0;for(var p=0;p<u;++p)l&&(e[p]=a),h&&(i[p]=s)}return new y({positions:o,maximumHeights:i,minimumHeights:e,ellipsoid:t.ellipsoid})},y.createGeometry=function(r){var o=r._positions,a=r._minimumHeights,y=r._maximumHeights,g=r._granularity,v=r._ellipsoid,_=c.computePositions(v,o,y,a,g,!1);if(n(_)){var w,b=_.bottomPositions,P=_.topPositions,A=P.length,O=2*A,E=new Float64Array(O),C=0;for(A/=3,w=0;w<A;++w){var x=3*w,D=e.fromArray(P,x,m),T=e.fromArray(b,x,f);E[C++]=T.x,E[C++]=T.y,E[C++]=T.z,E[C++]=D.x,E[C++]=D.y,E[C++]=D.z}var I=new h({position:new l({componentDatatype:i.DOUBLE,componentsPerAttribute:3,values:E})}),M=O/3;O=2*M-4+M;var V=u.createTypedArray(M,O),N=0;for(w=0;w<M-2;w+=2){var S=w,L=w+2,F=e.fromArray(E,3*S,m),U=e.fromArray(E,3*L,f);if(!e.equalsEpsilon(F,U,p.EPSILON10)){var R=w+1,H=w+3;V[N++]=R,V[N++]=S,V[N++]=R,V[N++]=H,V[N++]=S,V[N++]=L}}return V[N++]=M-2,V[N++]=M-1,new s({attributes:I,indices:V,primitiveType:d.LINES,boundingSphere:new t.fromVertices(E)})}},y}.apply(e,r))||(t.exports=n)},2046:function(t,e,i){var r,n;r=[i(228),i(16),i(6),i(21),i(2),i(0),i(13),i(4),i(192),i(266),i(169),i(194),i(335),i(154),i(465),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f){"use strict";var y=d.FILL,g=r.WHITE,v=r.BLACK,_=new r(.165,.165,.165,.8),w=new e(7,5),b=e.ZERO,P=i.ZERO,A=u.NONE,O=p.CENTER,E=c.CENTER,C=new i,x=new r,D=new r,T=new r,I=new e,M=new i,V=new e,N=new h,S=new h,L=new h,F=new l;function U(t){this.entity=t,this.label=void 0,this.index=void 0}function R(e,i){i.collectionChanged.addEventListener(R.prototype._onCollectionChanged,this),this._cluster=e,this._entityCollection=i,this._items=new t,this._onCollectionChanged(i,i.values,[],[])}function H(t,e,i){o(t)&&(t.label=void 0,i.removeLabel(e))}return R.prototype.update=function(t){for(var e=this._items.values,r=this._cluster,n=0,a=e.length;n<a;n++){var s,l,h=e[n],u=h.entity,p=u._label,d=h.label,c=u.isShowing&&u.isAvailable(t)&&f.getValueOrDefault(p._show,t,!0);if(c&&(l=f.getValueOrUndefined(u._position,t,C),s=f.getValueOrUndefined(p._text,t),c=o(l)&&o(s)),c){f.isConstant(u._position)||(r._clusterDirty=!0);var m=!1,U=f.getValueOrDefault(p._heightReference,t,A);o(d)||((d=r.getLabel(u)).id=u,h.label=d,m=i.equals(d.position,l)&&d.heightReference===U),d.show=!0,d.position=l,d.text=s,d.scale=f.getValueOrDefault(p._scale,t,1),d.font=f.getValueOrDefault(p._font,t,"30px sans-serif"),d.style=f.getValueOrDefault(p._style,t,y),d.fillColor=f.getValueOrDefault(p._fillColor,t,g,x),d.outlineColor=f.getValueOrDefault(p._outlineColor,t,v,D),d.outlineWidth=f.getValueOrDefault(p._outlineWidth,t,1),d.showBackground=f.getValueOrDefault(p._showBackground,t,!1),d.backgroundColor=f.getValueOrDefault(p._backgroundColor,t,_,T),d.backgroundPadding=f.getValueOrDefault(p._backgroundPadding,t,w,I),d.pixelOffset=f.getValueOrDefault(p._pixelOffset,t,b,V),d.eyeOffset=f.getValueOrDefault(p._eyeOffset,t,P,M),d.heightReference=U,d.horizontalOrigin=f.getValueOrDefault(p._horizontalOrigin,t,O),d.verticalOrigin=f.getValueOrDefault(p._verticalOrigin,t,E),d.translucencyByDistance=f.getValueOrUndefined(p._translucencyByDistance,t,N),d.pixelOffsetScaleByDistance=f.getValueOrUndefined(p._pixelOffsetScaleByDistance,t,S),d.scaleByDistance=f.getValueOrUndefined(p._scaleByDistance,t,L),d.distanceDisplayCondition=f.getValueOrUndefined(p._distanceDisplayCondition,t,F),d.disableDepthTestDistance=f.getValueOrUndefined(p._disableDepthTestDistance,t),m&&d._updateClamping()}else H(h,u,r)}return!0},R.prototype.getBoundingSphere=function(t,e){var r=this._items.get(t.id);if(!o(r)||!o(r.label))return m.FAILED;var a=r.label;return e.center=i.clone(n(a._clampedPosition,a.position),e.center),e.radius=0,m.DONE},R.prototype.isDestroyed=function(){return!1},R.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(R.prototype._onCollectionChanged,this);for(var t=this._entityCollection.values,e=0;e<t.length;e++)this._cluster.removeLabel(t[e]);return a(this)},R.prototype._onCollectionChanged=function(t,e,i,r){var n,a,s=this._items,l=this._cluster;for(n=e.length-1;n>-1;n--)a=e[n],o(a._label)&&o(a._position)&&s.set(a.id,new U(a));for(n=r.length-1;n>-1;n--)a=r[n],o(a._label)&&o(a._position)?s.contains(a.id)||s.set(a.id,new U(a)):(H(s.get(a.id),a,l),s.remove(a.id));for(n=i.length-1;n>-1;n--)a=i[n],H(s.get(a.id),a,l),s.remove(a.id)},R}.apply(e,r))||(t.exports=n)},2047:function(t,e,i){var r,n;r=[i(228),i(31),i(16),i(21),i(0),i(13),i(4),i(17),i(30),i(197),i(723),i(169),i(478),i(479),i(153),i(465),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y){"use strict";var g=m.ENABLED,v=p.NONE,_=r.RED,w=r.WHITE,b=u.HIGHLIGHT,P=new i(1,1),A=h.Y,O=new s,E=new s;function C(e,i){i.collectionChanged.addEventListener(C.prototype._onCollectionChanged,this),this._scene=e,this._primitives=e.primitives,this._entityCollection=i,this._modelHash={},this._entitiesToVisualize=new t,this._onCollectionChanged(i,i.values,[],[])}function x(t,e,i,r){var o=i[e.id];n(o)&&(r.removeAndDestroy(o.modelPrimitive),delete i[e.id])}function D(t,e){var i=e[t.id];n(i)&&(i.nodeTransformationsScratch={},i.articulationsScratch={})}function T(t,e,i){t.readyPromise.otherwise(function(t){console.error(t),i[e.id].loadFail=!0})}return C.prototype.update=function(t){for(var e=this._entitiesToVisualize.values,i=this._modelHash,r=this._primitives,o=0,a=e.length;o<a;o++){var h,u,p=e[o],m=p._model,f=i[p.id],C=p.isShowing&&p.isAvailable(t)&&y.getValueOrDefault(m._show,t,!0);if(C&&(u=p.computeModelMatrix(t,O),h=l.createIfNeeded(y.getValueOrUndefined(m._uri,t)),C=n(u)&&n(h)),C){var x=n(f)?f.modelPrimitive:void 0;if(n(x)&&h.url===f.url||(n(x)&&(r.removeAndDestroy(x),delete i[p.id]),(x=d.fromGltf({url:h,incrementallyLoadTextures:y.getValueOrDefault(m._incrementallyLoadTextures,t,!0),scene:this._scene})).id=p,r.add(x),f={modelPrimitive:x,url:h.url,animationsRunning:!1,nodeTransformationsScratch:{},articulationsScratch:{},loadFail:!1},i[p.id]=f,T(x,p,i)),x.show=!0,x.scale=y.getValueOrDefault(m._scale,t,1),x.minimumPixelSize=y.getValueOrDefault(m._minimumPixelSize,t,0),x.maximumScale=y.getValueOrUndefined(m._maximumScale,t),x.modelMatrix=s.clone(u,x.modelMatrix),x.shadows=y.getValueOrDefault(m._shadows,t,g),x.heightReference=y.getValueOrDefault(m._heightReference,t,v),x.distanceDisplayCondition=y.getValueOrUndefined(m._distanceDisplayCondition,t),x.silhouetteColor=y.getValueOrDefault(m._silhouetteColor,t,_,x._silhouetteColor),x.silhouetteSize=y.getValueOrDefault(m._silhouetteSize,t,0),x.color=y.getValueOrDefault(m._color,t,w,x._color),x.colorBlendMode=y.getValueOrDefault(m._colorBlendMode,t,b),x.colorBlendAmount=y.getValueOrDefault(m._colorBlendAmount,t,.5),x.clippingPlanes=y.getValueOrUndefined(m._clippingPlanes,t),x.clampAnimations=y.getValueOrDefault(m._clampAnimations,t,!0),x.imageBasedLightingFactor=y.getValueOrDefault(m._imageBasedLightingFactor,t,P),x.lightColor=y.getValueOrUndefined(m._lightColor,t),x._upAxis=y.getValueOrDefault(m._upAxis,t,A),x._forwardAxis=y.getValueOrUndefined(m._forwardAxis,t),x.ready){var D=y.getValueOrDefault(m._runAnimations,t,!0);f.animationsRunning!==D&&(D?x.activeAnimations.addAll({loop:c.REPEAT}):x.activeAnimations.removeAll(),f.animationsRunning=D);var I=y.getValueOrUndefined(m._nodeTransformations,t,f.nodeTransformationsScratch);if(n(I))for(var M=Object.keys(I),V=0,N=M.length;V<N;++V){var S=M[V],L=I[S];if(n(L)){var F=x.getNode(S);if(n(F)){var U=s.fromTranslationRotationScale(L,E);F.matrix=s.multiply(F.originalMatrix,U,U)}}}var R=!1,H=y.getValueOrUndefined(m._articulations,t,f.articulationsScratch);if(n(H))for(var B=Object.keys(H),G=0,k=B.length;G<k;++G){var z=B[G],j=H[z];n(j)&&(R=!0,x.setArticulationStage(z,j))}R&&x.applyArticulations()}}else n(f)&&(f.modelPrimitive.show=!1)}return!0},C.prototype.isDestroyed=function(){return!1},C.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(C.prototype._onCollectionChanged,this);for(var t=this._entitiesToVisualize.values,e=this._modelHash,i=this._primitives,r=t.length-1;r>-1;r--)x(this,t[r],e,i);return o(this)},C.prototype.getBoundingSphere=function(t,i){var r=this._modelHash[t.id];if(!n(r)||r.loadFail)return f.FAILED;var o=r.modelPrimitive;if(!n(o)||!o.show)return f.FAILED;if(!o.ready)return f.PENDING;if(o.heightReference===p.NONE)e.transform(o.boundingSphere,o.modelMatrix,i);else{if(!n(o._clampedModelMatrix)||o._heightChanged)return f.PENDING;e.transform(o.boundingSphere,o._clampedModelMatrix,i)}return f.DONE},C.prototype._onCollectionChanged=function(t,e,i,r){var o,a,s=this._entitiesToVisualize,l=this._modelHash,h=this._primitives;for(o=e.length-1;o>-1;o--)a=e[o],n(a._model)&&n(a._position)&&s.set(a.id,a);for(o=r.length-1;o>-1;o--)a=r[o],n(a._model)&&n(a._position)?(D(a,l),s.set(a.id,a)):(x(this,a,l,h),s.remove(a.id));for(o=i.length-1;o>-1;o--)x(this,a=i[o],l,h),s.remove(a.id)},C}.apply(e,r))||(t.exports=n)},2048:function(t,e,i){var r,n;r=[i(228),i(6),i(0),i(13),i(4),i(26),i(41),i(17),i(265),i(72),i(55),i(724),i(35),i(1968),i(338),i(1966),i(128),i(1969),i(717),i(1971),i(722)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y,g,v,_,w){"use strict";var b=new h,P=new h,A=new h;function O(t){this.entity=t,this.polyline=void 0,this.index=void 0,this.updater=void 0}function E(t,e,r,n,a,s,l,u){for(;t instanceof g;)t=t.resolvedProperty;t instanceof v?l=function(t,e,r,n,a,s,l,h,u){var p,d=h;p=t.getValueInReferenceFrame(e,s,u[d]),i(p)&&(u[d++]=p);for(var c,m,f,y=!i(a)||o.lessThanOrEquals(a,e)||o.greaterThanOrEquals(a,r),g=0,v=n.length,_=n[g],w=r,b=!1;g<v;){if(!y&&o.greaterThanOrEquals(_,a)&&(p=t.getValueInReferenceFrame(a,s,u[d]),i(p)&&(u[d++]=p),y=!0),o.greaterThan(_,e)&&o.lessThan(_,w)&&!_.equals(a)&&(p=t.getValueInReferenceFrame(_,s,u[d]),i(p)&&(u[d++]=p)),g<v-1){if(l>0&&!b){var P=n[g+1],A=o.secondsDifference(P,_);(b=A>l)&&(c=Math.ceil(A/l),m=0,f=A/Math.max(c,2),c=Math.max(c-1,1))}if(b&&m<c){_=o.addSeconds(_,f,new o),m++;continue}}b=!1,_=n[++g]}return p=t.getValueInReferenceFrame(r,s,u[d]),i(p)&&(u[d++]=p),d}(t,e,r,t._property._times,n,a,s,l,u):l=t instanceof c?function(t,e,i,r,n,a,s,l){P.start=e,P.stop=i;for(var u=s,p=t.intervals,d=0;d<p.length;d++){var c=p.get(d);if(!h.intersect(c,P,b).isEmpty){var m=c.start,f=c.stop,y=e;o.greaterThan(m,y)&&(y=m);var g=i;o.lessThan(f,g)&&(g=f),u=E(c.data,y,g,r,n,a,u,l)}}return u}(t,e,r,n,a,s,l,u):t instanceof w?function(t,e,r,n,a,s,l,u){A.start=e,A.stop=r;for(var p=l,d=t.intervals,c=0;c<d.length;c++){var m=d.get(c);if(!h.intersect(m,A,b).isEmpty){var f=m.start;m.isStartIncluded||(f=m.isStopIncluded?m.stop:o.addSeconds(m.start,o.secondsDifference(m.stop,m.start)/2,new o));var y=t.getValueInReferenceFrame(f,a,u[p]);i(y)&&(u[p]=y,p++)}}return p}(t,e,r,0,a,0,l,u):t instanceof m||t instanceof _&&y.isConstant(t)?function(t,e,r,n,o,a,s,l){var h=t.getValueInReferenceFrame(e,o,l[s]);return i(h)&&(l[s++]=h),s}(t,e,0,0,a,0,l,u):function(t,e,r,n,a,s,l,h){for(var u,p=0,d=l,c=e,m=Math.max(s,60),f=!i(n)||o.lessThanOrEquals(n,e)||o.greaterThanOrEquals(n,r);o.lessThan(c,r);)!f&&o.greaterThanOrEquals(c,n)&&(f=!0,u=t.getValueInReferenceFrame(n,a,h[d]),i(u)&&(h[d]=u,d++)),u=t.getValueInReferenceFrame(c,a,h[d]),i(u)&&(h[d]=u,d++),p++,c=o.addSeconds(e,m*p,new o);return u=t.getValueInReferenceFrame(r,a,h[d]),i(u)&&(h[d]=u,d++),d}(t,e,r,n,a,s,l,u);return l}function C(t,e,r,n,o,a,s){i(s)||(s=[]);var l=E(t,e,r,n,o,a,0,s);return s.length=l,s}var x=new a;function D(t,e){this._unusedIndexes=[],this._polylineCollection=new p,this._scene=t,this._referenceFrame=e,t.primitives.add(this._polylineCollection)}function T(e,i){i.collectionChanged.addEventListener(T.prototype._onCollectionChanged,this),this._scene=e,this._updaters={},this._entityCollection=i,this._items=new t,this._onCollectionChanged(i,i.values,[],[])}return D.prototype.update=function(t){if(this._referenceFrame===l.INERTIAL){var r=u.computeIcrfToFixedMatrix(t,x);i(r)||(r=u.computeTemeToPseudoFixedMatrix(t,x)),s.fromRotationTranslation(r,e.ZERO,this._polylineCollection.modelMatrix)}},D.prototype.updateObject=function(t,e){var r,n,a=e.entity,s=a._path,l=a._position,h=s._show,u=e.polyline,p=a.isShowing&&(!i(h)||h.getValue(t));if(p){var d=y.getValueOrUndefined(s._leadTime,t),c=y.getValueOrUndefined(s._trailTime,t),m=a._availability,g=i(m),v=i(d),_=i(c);if(p=g||v&&_){if(_&&(r=o.addSeconds(t,-c,new o)),v&&(n=o.addSeconds(t,d,new o)),g){var w=m.start,b=m.stop;_&&!o.greaterThan(w,r)||(r=w),v&&!o.lessThan(b,n)||(n=b)}p=o.lessThan(r,n)}}if(p){if(!i(u)){var P=this._unusedIndexes;if(P.length>0){var A=P.pop();u=this._polylineCollection.get(A),e.index=A}else e.index=this._polylineCollection.length,u=this._polylineCollection.add();u.id=a,e.polyline=u}var O=y.getValueOrDefault(s._resolution,t,60);u.show=!0,u.positions=C(l,r,n,t,this._referenceFrame,O,u.positions.slice()),u.material=f.getValue(t,s._material,u.material),u.width=y.getValueOrDefault(s._width,t,1),u.distanceDisplayCondition=y.getValueOrUndefined(s._distanceDisplayCondition,t,u.distanceDisplayCondition)}else i(u)&&(this._unusedIndexes.push(e.index),e.polyline=void 0,u.show=!1,e.index=void 0)},D.prototype.removeObject=function(t){var e=t.polyline;i(e)&&(this._unusedIndexes.push(t.index),t.polyline=void 0,e.show=!1,e.id=void 0,t.index=void 0)},D.prototype.destroy=function(){return this._scene.primitives.remove(this._polylineCollection),r(this)},T.prototype.update=function(t){var e=this._updaters;for(var r in e)e.hasOwnProperty(r)&&e[r].update(t);for(var n=this._items.values,o=0,a=n.length;o<a;o++){var s=n[o],h=s.entity._position,u=s.updater,p=l.FIXED;this._scene.mode===d.SCENE3D&&(p=h.referenceFrame);var c=this._updaters[p];u===c&&i(c)?c.updateObject(t,s):(i(u)&&u.removeObject(s),i(c)||((c=new D(this._scene,p)).update(t),this._updaters[p]=c),s.updater=c,i(c)&&c.updateObject(t,s))}return!0},T.prototype.isDestroyed=function(){return!1},T.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(T.prototype._onCollectionChanged,this);var t=this._updaters;for(var e in t)t.hasOwnProperty(e)&&t[e].destroy();return r(this)},T.prototype._onCollectionChanged=function(t,e,r,n){var o,a,s,l=this._items;for(o=e.length-1;o>-1;o--)a=e[o],i(a._path)&&i(a._position)&&l.set(a.id,new O(a));for(o=n.length-1;o>-1;o--)a=n[o],i(a._path)&&i(a._position)?l.contains(a.id)||l.set(a.id,new O(a)):(s=l.get(a.id),i(s)&&(i(s.updater)&&s.updater.removeObject(s),l.remove(a.id)));for(o=r.length-1;o>-1;o--)a=r[o],s=l.get(a.id),i(s)&&(i(s.updater)&&s.updater.removeObject(s),l.remove(a.id))},T._subSample=C,T}.apply(e,r))||(t.exports=n)},2049:function(t,e,i){var r,n;r=[i(228),i(6),i(21),i(0),i(13),i(4),i(192),i(266),i(743),i(169),i(465),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p){"use strict";var d=i.WHITE,c=i.BLACK,m=new i,f=new e,y=new i,g=new s,v=new s,_=new a;function w(t){this.entity=t,this.pointPrimitive=void 0,this.billboard=void 0,this.color=void 0,this.outlineColor=void 0,this.pixelSize=void 0,this.outlineWidth=void 0}function b(e,i){i.collectionChanged.addEventListener(b.prototype._onCollectionChanged,this),this._cluster=e,this._entityCollection=i,this._items=new t,this._onCollectionChanged(i,i.values,[],[])}function P(t,e,i){if(r(t)){var n=t.pointPrimitive;if(r(n))return t.pointPrimitive=void 0,void i.removePoint(e);var o=t.billboard;r(o)&&(t.billboard=void 0,i.removeBillboard(e))}}return b.prototype.update=function(t){for(var n=this._items.values,o=this._cluster,a=0,s=n.length;a<s;a++){var u,w=n[a],b=w.entity,A=b._point,O=w.pointPrimitive,E=w.billboard,C=p.getValueOrDefault(A._heightReference,t,h.NONE),x=b.isShowing&&b.isAvailable(t)&&p.getValueOrDefault(A._show,t,!0);if(x&&(u=p.getValueOrUndefined(b._position,t,f),x=r(u)),x){p.isConstant(b._position)||(o._clusterDirty=!0);var D=!1,T=!1;if(C===h.NONE||r(E)?C!==h.NONE||r(O)||(r(E)&&(P(w,b,o),E=void 0),(O=o.getPoint(b)).id=b,w.pointPrimitive=O):(r(O)&&(P(w,b,o),O=void 0),(E=o.getBillboard(b)).id=b,E.image=void 0,w.billboard=E,D=!0,T=e.equals(E.position,u)&&E.heightReference===C),r(O))O.show=!0,O.position=u,O.scaleByDistance=p.getValueOrUndefined(A._scaleByDistance,t,g),O.translucencyByDistance=p.getValueOrUndefined(A._translucencyByDistance,t,v),O.color=p.getValueOrDefault(A._color,t,d,m),O.outlineColor=p.getValueOrDefault(A._outlineColor,t,c,y),O.outlineWidth=p.getValueOrDefault(A._outlineWidth,t,0),O.pixelSize=p.getValueOrDefault(A._pixelSize,t,1),O.distanceDisplayCondition=p.getValueOrUndefined(A._distanceDisplayCondition,t,_),O.disableDepthTestDistance=p.getValueOrDefault(A._disableDepthTestDistance,t,0);else if(r(E)){E.show=!0,E.position=u,E.scaleByDistance=p.getValueOrUndefined(A._scaleByDistance,t,g),E.translucencyByDistance=p.getValueOrUndefined(A._translucencyByDistance,t,v),E.distanceDisplayCondition=p.getValueOrUndefined(A._distanceDisplayCondition,t,_),E.disableDepthTestDistance=p.getValueOrDefault(A._disableDepthTestDistance,t,0),E.heightReference=C;var I=p.getValueOrDefault(A._color,t,d,m),M=p.getValueOrDefault(A._outlineColor,t,c,y),V=Math.round(p.getValueOrDefault(A._outlineWidth,t,0)),N=Math.max(1,Math.round(p.getValueOrDefault(A._pixelSize,t,1)));if(V>0?(E.scale=1,D=D||V!==w.outlineWidth||N!==w.pixelSize||!i.equals(I,w.color)||!i.equals(M,w.outlineColor)):(E.scale=N/50,N=50,D=D||V!==w.outlineWidth||!i.equals(I,w.color)||!i.equals(M,w.outlineColor)),D){w.color=i.clone(I,w.color),w.outlineColor=i.clone(M,w.outlineColor),w.pixelSize=N,w.outlineWidth=V;var S=I.alpha,L=I.toCssColorString(),F=M.toCssColorString(),U=JSON.stringify([L,N,F,V]);E.setImage(U,l(S,L,F,V,N))}T&&E._updateClamping()}}else P(w,b,o)}return!0},b.prototype.getBoundingSphere=function(t,i){var n=this._items.get(t.id);if(!r(n)||!r(n.pointPrimitive)&&!r(n.billboard))return u.FAILED;if(r(n.pointPrimitive))i.center=e.clone(n.pointPrimitive.position,i.center);else{var o=n.billboard;if(!r(o._clampedPosition))return u.PENDING;i.center=e.clone(o._clampedPosition,i.center)}return i.radius=0,u.DONE},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(b.prototype._onCollectionChanged,this);for(var t=this._entityCollection.values,e=0;e<t.length;e++)this._cluster.removePoint(t[e]);return n(this)},b.prototype._onCollectionChanged=function(t,e,i,n){var o,a,s=this._items,l=this._cluster;for(o=e.length-1;o>-1;o--)a=e[o],r(a._point)&&r(a._position)&&s.set(a.id,new w(a));for(o=n.length-1;o>-1;o--)a=n[o],r(a._point)&&r(a._position)?s.contains(a.id)||s.set(a.id,new w(a)):(P(s.get(a.id),a,l),s.remove(a.id));for(o=i.length-1;o>-1;o--)a=i[o],P(s.get(a.id),a,l),s.remove(a.id)},b}.apply(e,r))||(t.exports=n)},2050:function(t,e,i){var r,n;r=[i(228),i(31),i(11),i(2),i(0),i(13),i(171),i(715),i(716),i(153),i(465),i(332),i(1980),i(2051),i(1983),i(1984),i(2053)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y){"use strict";var g=[];function v(t,e){for(var i=t._batches,r=i.length,n=0;n<r;n++)i[n].remove(e)}function _(t,e,i){if(i.isDynamic)t._dynamicBatch.add(e,i);else if(i.clampToGround&&i.fillEnabled){var r=i.classificationTypeProperty.getValue(e);t._groundBatches[r].add(e,i)}else{var o;i.fillEnabled&&(o=i.shadowsProperty.getValue(e));var a,s=0;n(i.depthFailMaterialProperty)&&(s=i.depthFailMaterialProperty instanceof p?1:2),n(o)&&(a=o+s*h.NUMBER_OF_SHADOW_MODES),i.fillEnabled&&(i.fillMaterialProperty instanceof p?t._colorBatches[a].add(e,i):t._materialBatches[a].add(e,i))}}function w(e,i,n,o){var u;o=r(o,e.groundPrimitives),n=r(n,e.primitives),this._scene=e,this._primitives=n,this._entityCollection=void 0,this._addedObjects=new t,this._removedObjects=new t,this._changedObjects=new t;var p=h.NUMBER_OF_SHADOW_MODES;for(this._colorBatches=new Array(3*p),this._materialBatches=new Array(3*p),u=0;u<p;++u)this._colorBatches[u]=new m(n,s,void 0,!1,u),this._materialBatches[u]=new f(n,l,void 0,!1,u),this._colorBatches[u+p]=new m(n,s,s,!1,u),this._materialBatches[u+p]=new f(n,l,s,!1,u),this._colorBatches[u+2*p]=new m(n,s,l,!1,u),this._materialBatches[u+2*p]=new f(n,l,l,!1,u);this._dynamicBatch=new d(n,o);var c=a.NUMBER_OF_CLASSIFICATION_TYPES;for(this._groundBatches=new Array(c),u=0;u<c;++u)this._groundBatches[u]=new y(o,u);this._batches=this._colorBatches.concat(this._materialBatches,this._dynamicBatch,this._groundBatches),this._subscriptions=new t,this._updaters=new t,this._entityCollection=i,i.collectionChanged.addEventListener(w.prototype._onCollectionChanged,this),this._onCollectionChanged(i,i.values,g)}w.prototype.update=function(t){var e,i,r,n,o=this._addedObjects,a=o.values,s=this._removedObjects,l=s.values,h=this._changedObjects,u=h.values;for(e=u.length-1;e>-1;e--)r=(i=u[e]).id,(n=this._updaters.get(r)).entity===i?(v(this,n),_(this,t,n)):(l.push(i),a.push(i));for(e=l.length-1;e>-1;e--)r=(i=l[e]).id,v(this,n=this._updaters.get(r)),n.destroy(),this._updaters.remove(r),this._subscriptions.get(r)(),this._subscriptions.remove(r);for(e=a.length-1;e>-1;e--)r=(i=a[e]).id,n=new c(i,this._scene),this._updaters.set(r,n),_(this,t,n),this._subscriptions.set(r,n.geometryChanged.addEventListener(w._onGeometryChanged,this));o.removeAll(),s.removeAll(),h.removeAll();var p=!0,d=this._batches,m=d.length;for(e=0;e<m;e++)p=d[e].update(t)&&p;return p};var b=[],P=new e;return w.prototype.getBoundingSphere=function(t,i){for(var r=b,n=P,o=0,a=u.DONE,s=this._batches,l=s.length,h=this._updaters.get(t.id),p=0;p<l;p++){if((a=s[p].getBoundingSphere(h,n))===u.PENDING)return u.PENDING;a===u.DONE&&(r[o]=e.clone(n,r[o]),o++)}return 0===o?u.FAILED:(r.length=o,e.fromBoundingSpheres(r,i),u.DONE)},w.prototype.isDestroyed=function(){return!1},w.prototype.destroy=function(){var t;this._entityCollection.collectionChanged.removeEventListener(w.prototype._onCollectionChanged,this),this._addedObjects.removeAll(),this._removedObjects.removeAll();var e=this._batches,i=e.length;for(t=0;t<i;t++)e[t].removeAllPrimitives();var r=this._subscriptions.values;for(i=r.length,t=0;t<i;t++)r[t]();return this._subscriptions.removeAll(),o(this)},w._onGeometryChanged=function(t){var e=this._removedObjects,i=this._changedObjects,r=t.entity,o=r.id;n(e.get(o))||n(i.get(o))||i.set(o,r)},w.prototype._onCollectionChanged=function(t,e,i){var r,n,o,a=this._addedObjects,s=this._removedObjects,l=this._changedObjects;for(r=i.length-1;r>-1;r--)n=(o=i[r]).id,a.remove(n)||(s.set(n,o),l.remove(n));for(r=e.length-1;r>-1;r--)n=(o=e[r]).id,s.remove(n)?l.set(n,o):a.set(n,o)},w}.apply(e,r))||(t.exports=n)},2051:function(t,e,i){var r,n;r=[i(264),i(31),i(11),i(21),i(129),i(2),i(0),i(3),i(13),i(4),i(192),i(1961),i(23),i(117),i(729),i(263),i(466),i(2052),i(712),i(709),i(108),i(171),i(714),i(724),i(715),i(716),i(153),i(465),i(332),i(267),i(1966),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y,g,v,_,w,b,P,A,O,E,C,x,D,T,I,M){"use strict";var V=new T(0),N={},S=new r,L=new D(r.WHITE),F=new T(!0),U=new T(C.DISABLED),R=new T(new u),H=new T(b.BOTH);function B(){this.vertexFormat=void 0,this.positions=void 0,this.width=void 0,this.arcType=void 0,this.granularity=void 0}function G(){this.positions=void 0,this.width=void 0,this.arcType=void 0,this.granularity=void 0}function k(t,e){this._entity=t,this._scene=e,this._entitySubscription=t.definitionChanged.addEventListener(k.prototype._onEntityPropertyChanged,this),this._fillEnabled=!1,this._dynamic=!1,this._geometryChanged=new d,this._showProperty=void 0,this._materialProperty=void 0,this._shadowsProperty=void 0,this._distanceDisplayConditionProperty=void 0,this._classificationTypeProperty=void 0,this._depthFailMaterialProperty=void 0,this._geometryOptions=new B,this._groundGeometryOptions=new G,this._id="polyline-"+t.id,this._clampToGround=!1,this._supportsPolylinesOnTerrain=w.supportsPolylinesOnTerrain(e),this._zIndex=0,this._onEntityPropertyChanged(t,"polyline",t.polyline,void 0)}s(k.prototype,{id:{get:function(){return this._id}},entity:{get:function(){return this._entity}},fillEnabled:{get:function(){return this._fillEnabled}},hasConstantFill:{get:function(){return!this._fillEnabled||!a(this._entity.availability)&&M.isConstant(this._showProperty)}},fillMaterialProperty:{get:function(){return this._materialProperty}},depthFailMaterialProperty:{get:function(){return this._depthFailMaterialProperty}},outlineEnabled:{value:!1},hasConstantOutline:{value:!0},outlineColorProperty:{value:void 0},shadowsProperty:{get:function(){return this._shadowsProperty}},distanceDisplayConditionProperty:{get:function(){return this._distanceDisplayConditionProperty}},classificationTypeProperty:{get:function(){return this._classificationTypeProperty}},isDynamic:{get:function(){return this._dynamic}},isClosed:{value:!1},geometryChanged:{get:function(){return this._geometryChanged}},arcType:{get:function(){return this._arcType}},clampToGround:{get:function(){return this._clampToGround&&this._supportsPolylinesOnTerrain}},zIndex:{get:function(){return this._zIndex}}}),k.prototype.isOutlineVisible=function(t){return!1},k.prototype.isFilled=function(t){var e=this._entity,i=this._fillEnabled&&e.isAvailable(t)&&this._showProperty.getValue(t);return o(i,!1)},k.prototype.createFillGeometryInstance=function(t){var e,i=this._entity,o=i.isAvailable(t),s=new _(o&&i.isShowing&&this._showProperty.getValue(t)),l=this._distanceDisplayConditionProperty.getValue(t),h={show:s,distanceDisplayCondition:p.fromDistanceDisplayCondition(l)};return this._materialProperty instanceof D&&(a(this._materialProperty.color)&&(this._materialProperty.color.isConstant||o)&&(e=this._materialProperty.color.getValue(t,S)),a(e)||(e=r.WHITE),h.color=n.fromColor(e)),this.clampToGround?new c({id:i,geometry:new m(this._groundGeometryOptions),attributes:h}):(a(this._depthFailMaterialProperty)&&this._depthFailMaterialProperty instanceof D&&(a(this._depthFailMaterialProperty.color)&&(this._depthFailMaterialProperty.color.isConstant||o)&&(e=this._depthFailMaterialProperty.color.getValue(t,S)),a(e)||(e=r.WHITE),h.depthFailColor=n.fromColor(e)),new c({id:i,geometry:new g(this._geometryOptions),attributes:h}))},k.prototype.createOutlineGeometryInstance=function(t){},k.prototype.isDestroyed=function(){return!1},k.prototype.destroy=function(){this._entitySubscription(),l(this)},k.prototype._onEntityPropertyChanged=function(t,e,i,r){if("availability"===e||"polyline"===e){var n=this._entity.polyline;if(a(n)){var s=n.positions,l=n.show;if(a(l)&&l.isConstant&&!l.getValue(f.MINIMUM_VALUE)||!a(s))this._fillEnabled&&(this._fillEnabled=!1,this._geometryChanged.raiseEvent(this));else{var h=n.zIndex,u=o(n.material,L),p=u instanceof D;this._materialProperty=u,this._depthFailMaterialProperty=n.depthFailMaterial,this._showProperty=o(l,F),this._shadowsProperty=o(n.shadows,U),this._distanceDisplayConditionProperty=o(n.distanceDisplayCondition,R),this._classificationTypeProperty=o(n.classificationType,H),this._fillEnabled=!0,this._zIndex=o(h,V);var d=n.width,c=n.arcType,m=n.clampToGround,g=n.granularity;if(s.isConstant&&M.isConstant(d)&&M.isConstant(c)&&M.isConstant(g)&&M.isConstant(m)&&M.isConstant(h)){var v,_=this._geometryOptions,w=s.getValue(f.MINIMUM_VALUE,_.positions);if(!a(w)||w.length<2)return void(this._fillEnabled&&(this._fillEnabled=!1,this._geometryChanged.raiseEvent(this)));v=p&&(!a(this._depthFailMaterialProperty)||this._depthFailMaterialProperty instanceof D)?O.VERTEX_FORMAT:E.VERTEX_FORMAT,_.vertexFormat=v,_.positions=w,_.width=a(d)?d.getValue(f.MINIMUM_VALUE):void 0,_.arcType=a(c)?c.getValue(f.MINIMUM_VALUE):void 0,_.granularity=a(g)?g.getValue(f.MINIMUM_VALUE):void 0;var b=this._groundGeometryOptions;b.positions=w,b.width=_.width,b.arcType=_.arcType,b.granularity=_.granularity,this._clampToGround=!!a(m)&&m.getValue(f.MINIMUM_VALUE),!this._clampToGround&&a(h)&&y("Entity polylines must have clampToGround: true when using zIndex.  zIndex will be ignored."),this._dynamic=!1,this._geometryChanged.raiseEvent(this)}else this._dynamic||(this._dynamic=!0,this._geometryChanged.raiseEvent(this))}}else this._fillEnabled&&(this._fillEnabled=!1,this._geometryChanged.raiseEvent(this))}},k.prototype.createDynamicUpdater=function(t,e){return new j(t,e,this)};var z={positions:void 0,granularity:void 0,height:void 0,ellipsoid:void 0};function j(t,e,i){this._line=void 0,this._primitives=t,this._groundPrimitives=e,this._groundPolylinePrimitive=void 0,this._material=void 0,this._geometryUpdater=i,this._positions=[]}function W(t){if(a(t._line))return t._line;var e=t._geometryUpdater._scene.id,i=N[e],r=t._primitives;!a(i)||i.isDestroyed()?(i=new A,N[e]=i,r.add(i)):r.contains(i)||r.add(i);var n=i.add();return n.id=t._geometryUpdater._entity,t._line=n,n}return j.prototype.update=function(e){var i=this._geometryUpdater,r=i._entity,n=r.polyline,o=n.positions,s=M.getValueOrUndefined(o,e,this._positions);i._clampToGround=M.getValueOrDefault(n._clampToGround,e,!1),i._groundGeometryOptions.positions=s,i._groundGeometryOptions.width=M.getValueOrDefault(n._width,e,1),i._groundGeometryOptions.arcType=M.getValueOrDefault(n._arcType,e,t.GEODESIC),i._groundGeometryOptions.granularity=M.getValueOrDefault(n._granularity,e,9999);var l=this._groundPrimitives;if(a(this._groundPolylinePrimitive)&&(l.remove(this._groundPolylinePrimitive),this._groundPolylinePrimitive=void 0),i.clampToGround){if(!r.isShowing||!r.isAvailable(e)||!M.getValueOrDefault(n._show,e,!0))return;if(!a(s)||s.length<2)return;var h,u=i.fillMaterialProperty;if(u instanceof D)h=new O;else{var p=I.getValue(e,u,this._material);h=new E({material:p,translucent:p.isTranslucent()}),this._material=p}return this._groundPolylinePrimitive=l.add(new P({geometryInstances:i.createFillGeometryInstance(e),appearance:h,classificationType:i.classificationTypeProperty.getValue(e),asynchronous:!1}),M.getValueOrUndefined(i.zIndex,e)),void(a(this._line)&&(this._line.show=!1))}var d=W(this);if(r.isShowing&&r.isAvailable(e)&&M.getValueOrDefault(n._show,e,!0))if(!a(s)||s.length<2)d.show=!1;else{var c=t.GEODESIC;c=M.getValueOrDefault(n._arcType,e,c);var m=i._scene.globe;c!==t.NONE&&a(m)&&(z.ellipsoid=m.ellipsoid,z.positions=s,z.granularity=M.getValueOrUndefined(n._granularity,e),z.height=v.extractHeights(s,m.ellipsoid),s=v.generateCartesianArc(z)),d.show=!0,d.positions=s.slice(),d.material=I.getValue(e,i.fillMaterialProperty,d.material),d.width=M.getValueOrDefault(n._width,e,1),d.distanceDisplayCondition=M.getValueOrUndefined(n._distanceDisplayCondition,e,d.distanceDisplayCondition)}else d.show=!1},j.prototype.getBoundingSphere=function(t){if(this._geometryUpdater.clampToGround){var i=this._groundPolylinePrimitive;if(a(i)&&i.show&&i.ready){var r=i.getGeometryInstanceAttributes(this._geometryUpdater._entity);if(a(r)&&a(r.boundingSphere))return e.clone(r.boundingSphere,t),x.DONE}return a(i)&&!i.ready?x.PENDING:x.DONE}var n=W(this);return n.show&&n.positions.length>0?(e.fromPoints(n.positions,t),x.DONE):x.FAILED},j.prototype.isDestroyed=function(){return!1},j.prototype.destroy=function(){var t=this._geometryUpdater._scene.id,e=N[t];a(e)&&(e.remove(this._line),0===e.length&&(this._primitives.removeAndDestroy(e),delete N[t])),a(this._groundPolylinePrimitive)&&this._groundPrimitives.remove(this._groundPolylinePrimitive),l(this)},k}.apply(e,r))||(t.exports=n)},2052:function(t,e,i){var r,n;r=[i(264),i(334),i(31),i(6),i(21),i(29),i(2),i(0),i(4),i(18),i(79),i(85),i(118),i(472),i(61),i(7),i(712),i(59),i(119)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y,g,v){"use strict";var _=[];function w(t,e,i,r,o){var a,s=_;s.length=o;var l=i.red,h=i.green,u=i.blue,p=i.alpha,d=r.red,c=r.green,m=r.blue,f=r.alpha;if(n.equals(i,r)){for(a=0;a<o;a++)s[a]=n.clone(i);return s}var y=(d-l)/o,g=(c-h)/o,v=(m-u)/o,w=(f-p)/o;for(a=0;a<o;a++)s[a]=new n(l+a*y,h+a*g,u+a*v,p+a*w);return s}function b(e){var i=(e=a(e,a.EMPTY_OBJECT)).positions,o=e.colors,l=a(e.width,1),u=a(e.colorsPerVertex,!1);this._positions=i,this._colors=o,this._width=l,this._colorsPerVertex=u,this._vertexFormat=v.clone(a(e.vertexFormat,v.DEFAULT)),this._arcType=a(e.arcType,t.GEODESIC),this._granularity=a(e.granularity,f.RADIANS_PER_DEGREE),this._ellipsoid=h.clone(a(e.ellipsoid,h.WGS84)),this._workerName="createPolylineGeometry";var p=1+i.length*r.packedLength;p+=s(o)?1+o.length*n.packedLength:1,this.packedLength=p+h.packedLength+v.packedLength+4}b.pack=function(t,e,i){var o;i=a(i,0);var l=t._positions,u=l.length;for(e[i++]=u,o=0;o<u;++o,i+=r.packedLength)r.pack(l[o],e,i);var p=t._colors;for(u=s(p)?p.length:0,e[i++]=u,o=0;o<u;++o,i+=n.packedLength)n.pack(p[o],e,i);return h.pack(t._ellipsoid,e,i),i+=h.packedLength,v.pack(t._vertexFormat,e,i),i+=v.packedLength,e[i++]=t._width,e[i++]=t._colorsPerVertex?1:0,e[i++]=t._arcType,e[i]=t._granularity,e};var P=h.clone(h.UNIT_SPHERE),A=new v,O={positions:void 0,colors:void 0,ellipsoid:P,vertexFormat:A,width:void 0,colorsPerVertex:void 0,arcType:void 0,granularity:void 0};b.unpack=function(t,e,i){var o;e=a(e,0);var l=t[e++],u=new Array(l);for(o=0;o<l;++o,e+=r.packedLength)u[o]=r.unpack(t,e);var p=(l=t[e++])>0?new Array(l):void 0;for(o=0;o<l;++o,e+=n.packedLength)p[o]=n.unpack(t,e);var d=h.unpack(t,e,P);e+=h.packedLength;var c=v.unpack(t,e,A);e+=v.packedLength;var m=t[e++],f=1===t[e++],y=t[e++],g=t[e];return s(i)?(i._positions=u,i._colors=p,i._ellipsoid=h.clone(d,i._ellipsoid),i._vertexFormat=v.clone(c,i._vertexFormat),i._width=m,i._colorsPerVertex=f,i._arcType=y,i._granularity=g,i):(O.positions=u,O.colors=p,O.width=m,O.colorsPerVertex=f,O.arcType=y,O.granularity=g,new b(O))};var E=new r,C=new r,x=new r,D=new r;return b.createGeometry=function(a){var l,h,v,b=a._width,P=a._vertexFormat,A=a._colors,O=a._colorsPerVertex,T=a._arcType,I=a._granularity,M=a._ellipsoid,V=e(a._positions,r.equalsEpsilon),N=V.length;if(!(N<2||b<=0)){if(T===t.GEODESIC||T===t.RHUMB){var S,L;T===t.GEODESIC?(S=f.chordLength(I,M.maximumRadius),L=y.numberOfPoints):(S=I,L=y.numberOfPointsRhumbLine);var F=y.extractHeights(V,M);if(s(A)){var U=1;for(l=0;l<N-1;++l)U+=L(V[l],V[l+1],S);var R=new Array(U),H=0;for(l=0;l<N-1;++l){var B=V[l],G=V[l+1],k=A[l],z=L(B,G,S);if(O&&l<U){var j=w(0,0,k,A[l+1],z),W=j.length;for(h=0;h<W;++h)R[H++]=j[h]}else for(h=0;h<z;++h)R[H++]=n.clone(k)}R[H]=n.clone(A[A.length-1]),A=R,_.length=0}V=T===t.GEODESIC?y.generateCartesianArc({positions:V,minDistance:S,ellipsoid:M,height:F}):y.generateCartesianRhumbArc({positions:V,granularity:S,ellipsoid:M,height:F})}var Y,q=4*(N=V.length)-4,X=new Float64Array(3*q),Z=new Float64Array(3*q),J=new Float64Array(3*q),K=new Float32Array(2*q),Q=P.st?new Float32Array(2*q):void 0,$=s(A)?new Uint8Array(4*q):void 0,tt=0,et=0,it=0,rt=0;for(h=0;h<N;++h){var nt,ot;0===h?(Y=E,r.subtract(V[0],V[1],Y),r.add(V[0],Y,Y)):Y=V[h-1],r.clone(Y,x),r.clone(V[h],C),h===N-1?(Y=E,r.subtract(V[N-1],V[N-2],Y),r.add(V[N-1],Y,Y)):Y=V[h+1],r.clone(Y,D),s($)&&(nt=0===h||O?A[h]:A[h-1],h!==N-1&&(ot=A[h]));var at=h===N-1?2:4;for(v=0===h?2:0;v<at;++v){r.pack(C,X,tt),r.pack(x,Z,tt),r.pack(D,J,tt),tt+=3;var st=v-2<0?-1:1;if(K[et++]=v%2*2-1,K[et++]=st*b,P.st&&(Q[it++]=h/(N-1),Q[it++]=Math.max(K[et-2],0)),s($)){var lt=v<2?nt:ot;$[rt++]=n.floatToByte(lt.red),$[rt++]=n.floatToByte(lt.green),$[rt++]=n.floatToByte(lt.blue),$[rt++]=n.floatToByte(lt.alpha)}}}var ht=new d;ht.position=new p({componentDatatype:o.DOUBLE,componentsPerAttribute:3,values:X}),ht.prevPosition=new p({componentDatatype:o.DOUBLE,componentsPerAttribute:3,values:Z}),ht.nextPosition=new p({componentDatatype:o.DOUBLE,componentsPerAttribute:3,values:J}),ht.expandAndWidth=new p({componentDatatype:o.FLOAT,componentsPerAttribute:2,values:K}),P.st&&(ht.st=new p({componentDatatype:o.FLOAT,componentsPerAttribute:2,values:Q})),s($)&&(ht.color=new p({componentDatatype:o.UNSIGNED_BYTE,componentsPerAttribute:4,values:$,normalize:!0}));var ut=m.createTypedArray(q,6*N-6),pt=0,dt=0,ct=N-1;for(h=0;h<ct;++h)ut[dt++]=pt,ut[dt++]=pt+2,ut[dt++]=pt+1,ut[dt++]=pt+1,ut[dt++]=pt+2,ut[dt++]=pt+3,pt+=4;return new u({attributes:ht,indices:ut,primitiveType:g.TRIANGLES,boundingSphere:i.fromPoints(V),geometryType:c.POLYLINES})}},b}.apply(e,r))||(t.exports=n)},2053:function(t,e,i){var r,n;r=[i(2),i(228),i(21),i(129),i(0),i(192),i(1961),i(709),i(714),i(715),i(716),i(465),i(332),i(1966),i(128)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m){"use strict";var f=new i,y=new o,g=new o;function v(t,i,r,n,o){var a;a=r instanceof d?h:u,this.orderedGroundPrimitives=t,this.classificationType=i,this.appearanceType=a,this.materialProperty=r,this.updaters=new e,this.createPrimitive=!0,this.primitive=void 0,this.oldPrimitive=void 0,this.geometry=new e,this.material=void 0,this.updatersWithAttributes=new e,this.attributes=new e,this.invalidated=!1,this.removeMaterialSubscription=r.definitionChanged.addEventListener(v.prototype.onMaterialChanged,this),this.subscriptions=new e,this.showsUpdated=new e,this.zIndex=n,this._asynchronous=o}function _(e,i,r){this._items=[],this._orderedGroundPrimitives=e,this._classificationType=i,this._asynchronous=t(r,!0)}return v.prototype.onMaterialChanged=function(){this.invalidated=!0},v.prototype.isMaterial=function(t){var e=this.materialProperty,i=t.fillMaterialProperty;return i===e||i instanceof d&&e instanceof d||n(e)&&e.equals(i)},v.prototype.add=function(t,e,i){var r=e.id;if(this.updaters.set(r,e),this.geometry.set(r,i),e.hasConstantFill&&e.fillMaterialProperty.isConstant&&m.isConstant(e.distanceDisplayConditionProperty)){var n=this;this.subscriptions.set(r,e.entity.definitionChanged.addEventListener(function(t,i,r,o){"isShowing"===i&&n.showsUpdated.set(e.id,e)}))}else this.updatersWithAttributes.set(r,e);this.createPrimitive=!0},v.prototype.remove=function(t){var e=t.id;if(this.createPrimitive=this.geometry.remove(e)||this.createPrimitive,this.updaters.remove(e)){this.updatersWithAttributes.remove(e);var i=this.subscriptions.get(e);return n(i)&&(i(),this.subscriptions.remove(e)),!0}return!1},v.prototype.update=function(t){var e,h=!0,p=this.primitive,d=this.orderedGroundPrimitives,v=this.geometry.values;if(this.createPrimitive){if(v.length>0)n(p)&&(n(this.oldPrimitive)?d.remove(p):this.oldPrimitive=p),p=new l({show:!1,asynchronous:this._asynchronous,geometryInstances:v,appearance:new this.appearanceType,classificationType:this.classificationType}),this.appearanceType===u&&(this.material=c.getValue(t,this.materialProperty,this.material),p.appearance.material=this.material),d.add(p,this.zIndex),h=!1;else{n(p)&&(d.remove(p),p=void 0);var _=this.oldPrimitive;n(_)&&(d.remove(_),this.oldPrimitive=void 0)}this.attributes.removeAll(),this.primitive=p,this.createPrimitive=!1}else if(n(p)&&p.ready){p.show=!0,n(this.oldPrimitive)&&(d.remove(this.oldPrimitive),this.oldPrimitive=void 0),this.appearanceType===u&&(this.material=c.getValue(t,this.materialProperty,this.material),this.primitive.appearance.material=this.material);var w=this.updatersWithAttributes.values,b=w.length;for(e=0;e<b;e++){var P=w[e],A=P.entity,O=this.geometry.get(P.id),E=this.attributes.get(O.id.id);if(n(E)||(E=p.getGeometryInstanceAttributes(O.id),this.attributes.set(O.id.id,E)),!P.fillMaterialProperty.isConstant){var C=P.fillMaterialProperty.color,x=m.getValueOrDefault(C,t,i.WHITE,f);i.equals(E._lastColor,x)||(E._lastColor=i.clone(x,E._lastColor),E.color=r.toValue(x,E.color))}var D=A.isShowing&&(P.hasConstantFill||P.isFilled(t));D!==(1===E.show[0])&&(E.show=s.toValue(D,E.show));var T=P.distanceDisplayConditionProperty;if(!m.isConstant(T)){var I=m.getValueOrDefault(T,t,g,y);o.equals(I,E._lastDistanceDisplayCondition)||(E._lastDistanceDisplayCondition=o.clone(I,E._lastDistanceDisplayCondition),E.distanceDisplayCondition=a.toValue(I,E.distanceDisplayCondition))}}this.updateShows(p)}else n(p)&&!p.ready&&(h=!1);return h},v.prototype.updateShows=function(t){for(var e=this.showsUpdated.values,i=e.length,r=0;r<i;r++){var o=e[r],a=o.entity,l=this.geometry.get(o.id),h=this.attributes.get(l.id.id);n(h)||(h=t.getGeometryInstanceAttributes(l.id),this.attributes.set(l.id.id,h));var u=a.isShowing;u!==(1===h.show[0])&&(h.show=s.toValue(u,h.show),l.attributes.show.value[0]=h.show[0])}this.showsUpdated.removeAll()},v.prototype.contains=function(t){return this.updaters.contains(t.id)},v.prototype.getBoundingSphere=function(t,e){var i=this.primitive;if(!i.ready)return p.PENDING;var r=i.getGeometryInstanceAttributes(t.entity);return!n(r)||!n(r.boundingSphere)||n(r.show)&&0===r.show[0]?p.FAILED:(r.boundingSphere.clone(e),p.DONE)},v.prototype.destroy=function(){var t=this.primitive,e=this.orderedGroundPrimitives;n(t)&&e.remove(t);var i=this.oldPrimitive;n(i)&&e.remove(i),this.removeMaterialSubscription()},_.prototype.add=function(t,e){for(var i=this._items,r=i.length,n=e.createFillGeometryInstance(t),o=m.getValueOrDefault(e.zIndex,0),a=0;a<r;++a){var s=i[a];if(s.isMaterial(e)&&s.zIndex===o)return void s.add(t,e,n)}var l=new v(this._orderedGroundPrimitives,this._classificationType,e.fillMaterialProperty,o,this._asynchronous);l.add(t,e,n),i.push(l)},_.prototype.remove=function(t){for(var e=this._items,i=e.length-1;i>=0;i--){var r=e[i];if(r.remove(t)){0===r.updaters.length&&(e.splice(i,1),r.destroy());break}}},_.prototype.update=function(t){var e,i=this._items;for(e=i.length-1;e>=0;e--){var r=i[e];if(r.invalidated){i.splice(e,1);for(var n=r.updaters.values,o=n.length,a=0;a<o;a++)this.add(t,n[a]);r.destroy()}}var s=!0;for(e=0;e<i.length;e++)s=i[e].update(t)&&s;return s},_.prototype.getBoundingSphere=function(t,e){for(var i=this._items,r=i.length,n=0;n<r;n++){var o=i[n];if(o.contains(t))return o.getBoundingSphere(t,e)}return p.FAILED},_.prototype.removeAllPrimitives=function(){for(var t=this._items,e=t.length,i=0;i<e;i++)t[i].destroy();this._items.length=0},_}.apply(e,r))||(t.exports=n)},747:function(t,e,i){var r,n;r=[i(229),i(31),i(11),i(71),i(2),i(0),i(3),i(13),i(230),i(714),i(711),i(2005),i(725),i(2006),i(465),i(173),i(2007),i(2046),i(2047),i(2048),i(2049),i(2050)],void 0===(n=function(t,e,i,r,n,o,a,s,l,h,u,p,d,c,m,f,y,g,v,_,w,b){"use strict";function P(t){this._displayID=r(),u.initializeTerrainHeights(),h.initializeTerrainHeights();var e=t.scene,i=t.dataSourceCollection;this._eventHelper=new l,this._eventHelper.add(i.dataSourceAdded,this._onDataSourceAdded,this),this._eventHelper.add(i.dataSourceRemoved,this._onDataSourceRemoved,this),this._eventHelper.add(i.dataSourceMoved,this._onDataSourceMoved,this),this._dataSourceCollection=i,this._scene=e,this._visualizersCallback=n(t.visualizersCallback,P.defaultVisualizersCallback);var o=!1,a=new d,s=new d;i.length>0&&(e.primitives.add(a),e.groundPrimitives.add(s),o=!0),this._primitives=a,this._groundPrimitives=s;for(var p=0,c=i.length;p<c;p++)this._onDataSourceAdded(i,i.get(p));var m,y,g=new f;if(this._onDataSourceAdded(void 0,g),this._defaultDataSource=g,!o){var v=this,_=function(){e.primitives.add(a),e.groundPrimitives.add(s),m(),y(),v._removeDefaultDataSoureListener=void 0,v._removeDataSourceCollectionListener=void 0};m=g.entities.collectionChanged.addEventListener(_),y=i.dataSourceAdded.addEventListener(_)}this._removeDefaultDataSoureListener=m,this._removeDataSourceCollectionListener=y,this._ready=!1}P.defaultVisualizersCallback=function(t,e,i){var r=i.entities;return[new c(e,r),new y(t,r,i._primitives,i._groundPrimitives),new g(e,r),new v(t,r),new w(e,r),new _(t,r),new b(t,r,i._primitives,i._groundPrimitives)]},a(P.prototype,{scene:{get:function(){return this._scene}},dataSources:{get:function(){return this._dataSourceCollection}},defaultDataSource:{get:function(){return this._defaultDataSource}},ready:{get:function(){return this._ready}}}),P.prototype.isDestroyed=function(){return!1},P.prototype.destroy=function(){this._eventHelper.removeAll();for(var t=this._dataSourceCollection,e=0,i=t.length;e<i;++e)this._onDataSourceRemoved(this._dataSourceCollection,t.get(e));return this._onDataSourceRemoved(void 0,this._defaultDataSource),o(this._removeDefaultDataSoureListener)?(this._removeDefaultDataSoureListener(),this._removeDataSourceCollectionListener()):(this._scene.primitives.remove(this._primitives),this._scene.groundPrimitives.remove(this._groundPrimitives)),s(this)},P.prototype.update=function(e){if(!t.initialized)return this._ready=!1,!1;var i,r,n,a,s=!0,l=this._dataSourceCollection,h=l.length;for(i=0;i<h;i++){var u=l.get(i);for(o(u.update)&&(s=u.update(e)&&s),a=(n=u._visualizersByDisplayID[this._displayID]).length,r=0;r<a;r++)s=n[r].update(e)&&s}for(a=(n=this._defaultDataSource._visualizersByDisplayID[this._displayID]).length,r=0;r<a;r++)s=n[r].update(e)&&s;return this._ready=s,s};var A=[],O=new e;return P.prototype.getBoundingSphere=function(t,i,r){if(!this._ready)return m.PENDING;var n,a,s=this._defaultDataSource;if(!s.entities.contains(t)){s=void 0;var l=this._dataSourceCollection;for(a=l.length,n=0;n<a;n++){var h=l.get(n);if(h.entities.contains(t)){s=h;break}}}if(!o(s))return m.FAILED;var u=A,p=O,d=0,c=m.DONE,f=s._visualizers,y=f.length;for(n=0;n<y;n++){var g=f[n];if(o(g.getBoundingSphere)){if(c=f[n].getBoundingSphere(t,p),!i&&c===m.PENDING)return m.PENDING;c===m.DONE&&(u[d]=e.clone(p,u[d]),d++)}}return 0===d?m.FAILED:(u.length=d,e.fromBoundingSpheres(u,r),m.DONE)},P.prototype._onDataSourceAdded=function(t,e){var i=this._scene,r=this._primitives,n=this._groundPrimitives,o=r.add(new d),a=n.add(new p);e._primitives=o,e._groundPrimitives=a;var s=e.clustering;s._initialize(i),o.add(s);var l=this._visualizersCallback(i,s,e);e._visualizersByDisplayID=e._visualizersByDisplayID||{},e._visualizersByDisplayID[this._displayID]=l,e._visualizers=e._visualizers||[],e._visualizers=e._visualizers.concat(l)},P.prototype._onDataSourceRemoved=function(t,e){var i=this._primitives,r=this._groundPrimitives,n=e._primitives,a=e._groundPrimitives,s=e.clustering;n.remove(s);var l=e._visualizersByDisplayID[this._displayID];if(o(l)){for(var h=l.length,u=0;u<h;u++){var p=l[u];p.destroy();var d=e._visualizers.indexOf(p);e._visualizers.splice(d,1)}delete e._visualizersByDisplayID[this._displayID],i.remove(n),r.remove(a)}},P.prototype._onDataSourceMoved=function(t,e,i){var r=this._primitives,n=this._groundPrimitives,o=t._primitives,a=t._groundPrimitives;e===i+1?(r.raise(o),n.raise(a)):e===i-1?(r.lower(o),n.lower(a)):0===e?(r.lowerToBottom(o),n.lowerToBottom(a),r.raise(o),n.raise(a)):(r.raiseToTop(o),n.raiseToTop(a))},P}.apply(e,r))||(t.exports=n)}}]);
//# sourceMappingURL=1.TerriaJS-specs.js.map